<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>Lakshyajeet&#039;s Blog</title>
	<atom:link href="https://lakshyajeet.in/feed/" rel="self" type="application/rss+xml" />
	<link>https://lakshyajeet.in/</link>
	<description></description>
	<lastBuildDate>Tue, 20 Jan 2026 08:43:19 +0000</lastBuildDate>
	<language>en-US</language>
	<sy:updatePeriod>
	hourly	</sy:updatePeriod>
	<sy:updateFrequency>
	1	</sy:updateFrequency>
	<generator>https://wordpress.org/?v=6.9</generator>

<image>
	<url>https://lakshyajeet.in/wp-content/uploads/2025/12/nyan-150x150.png</url>
	<title>Lakshyajeet&#039;s Blog</title>
	<link>https://lakshyajeet.in/</link>
	<width>32</width>
	<height>32</height>
</image> 
	<item>
		<title>Building a Kademlia DHT over WebRTC</title>
		<link>https://lakshyajeet.in/building-a-kademlia-dht-over-webrtc/</link>
		
		<dc:creator><![CDATA[lakshyajeet]]></dc:creator>
		<pubDate>Tue, 20 Jan 2026 08:43:19 +0000</pubDate>
				<category><![CDATA[Uncategorized]]></category>
		<guid isPermaLink="false">https://lakshyajeet.in/?p=1233</guid>

					<description><![CDATA[<p>Distributed Hash Tables (DHTs) are the backbone of decentralized file systems (like IPFS) and peer-to-peer networks (like BitTorrent). However, implementing one from scratch is often daunting due to the complexity of node discovery, routing, and NAT traversal. The&#160;WebRTC-DHT&#160;project offers a clean, educational implementation of the Kademlia protocol running on Node.js. It leverages&#160;WebRTC&#160;for peer-to-peer data transport [&#8230;]</p>
<p>The post <a href="https://lakshyajeet.in/building-a-kademlia-dht-over-webrtc/">Building a Kademlia DHT over WebRTC</a> appeared first on <a href="https://lakshyajeet.in/">Lakshyajeet&#039;s Blog</a>.</p>
]]></description>
										<content:encoded><![CDATA[
<p>Distributed Hash Tables (DHTs) are the backbone of decentralized file systems (like IPFS) and peer-to-peer networks (like BitTorrent). However, implementing one from scratch is often daunting due to the complexity of node discovery, routing, and NAT traversal.</p>



<p>The&nbsp;<strong><a href="https://github.com/DarkMatter-999/WebRTC-DHT">WebRTC-DHT</a></strong>&nbsp;project offers a clean, educational implementation of the Kademlia protocol running on Node.js. It leverages&nbsp;<strong>WebRTC</strong>&nbsp;for peer-to-peer data transport allowing for NAT traversal via STUN and introduces a hybrid signalling mechanism that transitions from a centralized WebSocket server to a fully decentralized mesh.</p>



<p>In this article, we will dissect the architecture, explore the core Kademlia logic, and understand how to orchestrate a P2P swarm using Docker.</p>



<p>All the code is available at the Github Repo: <a href="https://github.com/DarkMatter-999/WebRTC-DHT">DarkMatter-999/WebRTC-DHT</a></p>



<h2 class="wp-block-heading">The Problem, The Solution, and The Architecture</h2>



<p>Distributed systems are notoriously difficult to build. If we want to create a database where data is shared across let&#8217;s say 100 computers, and any 10 of them disappear at any moment without losing data, we face three massive challenges.</p>



<ul class="wp-block-list">
<li><strong>Discovery</strong>: How do nodes find each other?</li>



<li><strong>Connectivity</strong>: How do they talk to each other?</li>



<li><strong>Routing</strong>: How do they find specific nodes with the data we want?</li>
</ul>



<p><strong>WebRTC-DHT</strong> is a reference implementation that solves these challenges using <strong>Kademlia</strong> (the routing algorithm behind BitTorrent) and <strong>WebRTC</strong> (for peer-to-peer connectivity).</p>



<h3 class="wp-block-heading">What are we building?</h3>



<p>We are looking at a <strong>Node.js based Distributed Hash Table (DHT)</strong>.<br>Think of a standard JavaScript <code>Map</code>:</p>



<pre class="wp-block-dm-hcb-highlighted-code-block"><button class="dm-hcb-copy hljs" data-code="const map = new Map();
map.set('my-key', 'my-value');" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" aria-hidden="true"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 4.5h11a.5.5 0 0 1 .5.5v11a.5.5 0 0 1-.5.5H5a.5.5 0 0 1-.5-.5V5a.5.5 0 0 1 .5-.5ZM3 5a2 2 0 0 1 2-2h11a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5Zm17 3v10.75c0 .69-.56 1.25-1.25 1.25H6v1.5h12.75a2.75 2.75 0 0 0 2.75-2.75V8H20Z"></path></svg><span>Copy</span></button><code class="hljs language-javascript"><span class="hljs-keyword">const</span> map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
map.<span class="hljs-title function_">set</span>(<span class="hljs-string">&apos;my-key&apos;</span>, <span class="hljs-string">&apos;my-value&apos;</span>);</code></pre>



<p>This data lives in the memory of <strong>one</strong> computer. If that computer crashes, the data is gone.</p>



<p>In this project, we are building a network where that <code>Map</code> is sliced up and spread across hundreds of peers. So that when we run:</p>



<pre class="wp-block-dm-hcb-highlighted-code-block"><button class="dm-hcb-copy hljs" data-code="node.storeValue('my-key', 'my-value');" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" aria-hidden="true"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 4.5h11a.5.5 0 0 1 .5.5v11a.5.5 0 0 1-.5.5H5a.5.5 0 0 1-.5-.5V5a.5.5 0 0 1 .5-.5ZM3 5a2 2 0 0 1 2-2h11a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5Zm17 3v10.75c0 .69-.56 1.25-1.25 1.25H6v1.5h12.75a2.75 2.75 0 0 0 2.75-2.75V8H20Z"></path></svg><span>Copy</span></button><code class="hljs language-javascript">node.<span class="hljs-title function_">storeValue</span>(<span class="hljs-string">&apos;my-key&apos;</span>, <span class="hljs-string">&apos;my-value&apos;</span>);</code></pre>



<p>The system calculates the hash of <code>'my-key'</code>, finds the peers/nodes in the network whose IDs are mathematically &#8220;closest&#8221; to that hash, and stores the data on them.</p>



<h3 class="wp-block-heading">The Tech Stack</h3>



<p>The project relies on a few specific libraries to make this happen. To keep the implementation bare-bones and educational, the project relies on only a few essential libraries:</p>



<ul class="wp-block-list">
<li><strong><code>wrtc</code></strong>: This is a Node.js binding for the WebRTC API. Usually, WebRTC is for browsers (Chrome/Firefox), but this library lets our Node.js server processes act like browsers to establish Peer-to-Peer (P2P) data channels.</li>



<li><strong><code>ws</code></strong>: A standard WebSocket library. We use this <em>only</em> for the initial handshake (signalling).</li>



<li><strong>Docker</strong>: This is used to provide orchestration layer to simulate a whole network on our machine.</li>
</ul>



<h3 class="wp-block-heading">Architecture &amp; File Structure</h3>



<figure class="wp-block-image size-large"><img fetchpriority="high" decoding="async" width="1024" height="635" src="https://lakshyajeet.in/wp-content/uploads/2026/01/image-1024x635.png" alt="Kademlia Architecture Diagram for the project" class="wp-image-1250" srcset="https://lakshyajeet.in/wp-content/uploads/2026/01/image-1024x635.png 1024w, https://lakshyajeet.in/wp-content/uploads/2026/01/image-300x186.png 300w, https://lakshyajeet.in/wp-content/uploads/2026/01/image-768x476.png 768w, https://lakshyajeet.in/wp-content/uploads/2026/01/image.png 1095w" sizes="(max-width: 1024px) 100vw, 1024px" /></figure>



<h4 class="wp-block-heading">A. The &#8220;Physical&#8221; Layer (Networking)</h4>



<ul class="wp-block-list">
<li>The Signalling server is a centralized WebSocket server(<strong><code>src/signalling/index.js</code></strong>). Nodes connect here first to say &#8220;I exist.&#8221; It introduces them to their first few peers, then steps back.</li>



<li>The Connection Manager class(<strong><code>src/peer/connection-manager.js</code></strong>) handles the dirty work of WebRTC. It manages ICE candidates, SDP offers, and maintains the list of open sockets (DataChannels) to other peers.</li>
</ul>



<h4 class="wp-block-heading">B. The &#8220;Logical&#8221; Layer (Kademlia)</h4>



<ul class="wp-block-list">
<li>The Routing Table(<strong><code>src/peer/routing-table.js</code></strong>) it doesn&#8217;t send data, it just remembers <em>who</em> we know. It organizes peers into &#8220;Buckets&#8221; based on their ID distance. This is pure Kademlia logic.</li>



<li>The nodes speak a custom binary protocol to save bandwidth. The utility functions convert JavaScript objects into compact Buffers (e.g., packing a <code>STORE</code> command into bytes).</li>
</ul>



<h4 class="wp-block-heading">C. The &#8220;Application&#8221; Layer (The Brain)</h4>



<ul class="wp-block-list">
<li>The Peer Node class(<strong><code>src/peer/peer-node.js</code></strong>). This ties everything together. It owns the Storage (the actual data), runs the Routing Table, and executes the complex algorithms to find data (<code>findValue</code>) or store it (<code>storeValue</code>).</li>
</ul>



<p>Now, with the basics all clear we can move to nuts and bolts of the system.</p>



<h2 class="wp-block-heading">Networking &amp; Hybrid Signalling</h2>



<p>In a distributed network, the hardest part is often just saying &#8220;Hello.&#8221;</p>



<p>This project uses <strong>WebRTC</strong>, which is famous for its ability to punch through firewalls and offers a P2P connection between the nodes. But, this P2P connection starts with a catch, before any two peers can connect directly, they must exchange setup data (SDP offers, Answers and ICE candidates), this process is done through a third-party called <strong>Signalling</strong>. </p>



<figure class="wp-block-image size-full"><img decoding="async" width="815" height="792" src="https://lakshyajeet.in/wp-content/uploads/2026/01/image-1.png" alt="Networking &amp; Hybrid Signalling" class="wp-image-1251" srcset="https://lakshyajeet.in/wp-content/uploads/2026/01/image-1.png 815w, https://lakshyajeet.in/wp-content/uploads/2026/01/image-1-300x292.png 300w, https://lakshyajeet.in/wp-content/uploads/2026/01/image-1-768x746.png 768w" sizes="(max-width: 815px) 100vw, 815px" /></figure>



<p>While most implementation of WebRTC stick with a permanent WebSocket server in the middle for signalling, going with the spirit of decentralization and to avoid a single point of failure, we use a <strong>Hybrid Strategy</strong>.</p>



<ol class="wp-block-list">
<li><strong>Bootstrap</strong>: Use a WebSocket server to find the <em>first</em> few peers.</li>



<li><strong>Decentralization</strong>: Once connected, use the existing peer connections to route signals and offers to new peers.</li>
</ol>



<h3 class="wp-block-heading">The Signalling Server</h3>



<p>Open <code><a href="https://github.com/DarkMatter-999/WebRTC-DHT/blob/master/src/signalling/index.js">src/signalling/index.js</a></code>, you might be surprised to see by how small the file is (~100 lines). That&#8217;s intentional as this server is <strong>dumb</strong>. It does not know anything about the DHT logic, it just passes notes between the peers.<br>When a node starts, it first connects here.</p>



<ol class="wp-block-list">
<li><strong>Register</strong>: The node sends <code>type: 'register'</code> with its ID.</li>



<li><strong>Discovery:</strong> The node sends <code>type: 'get-peers'</code>.</li>



<li><strong>Introduction:</strong> The server calculates the XOR distance between the requester and everyone else it knows, returning the 5 closest peers.</li>
</ol>



<pre class="wp-block-dm-hcb-highlighted-code-block"><button class="dm-hcb-copy hljs" data-code="// src/signalling/index.js (Excerpt)
case 'get-peers':
  // ... (logic to calculate distance) ...
  // Return top 5 closest peers so the new node has someone to talk to
  ws.send(JSON.stringify({ type: 'peers', peers: closestPeers }));
  break;" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" aria-hidden="true"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 4.5h11a.5.5 0 0 1 .5.5v11a.5.5 0 0 1-.5.5H5a.5.5 0 0 1-.5-.5V5a.5.5 0 0 1 .5-.5ZM3 5a2 2 0 0 1 2-2h11a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5Zm17 3v10.75c0 .69-.56 1.25-1.25 1.25H6v1.5h12.75a2.75 2.75 0 0 0 2.75-2.75V8H20Z"></path></svg><span>Copy</span></button><code class="hljs language-javascript"><span class="hljs-comment">// src/signalling/index.js (Excerpt)</span>
<span class="hljs-keyword">case</span> <span class="hljs-string">&apos;get-peers&apos;</span>:
  <span class="hljs-comment">// ... (logic to calculate distance) ...</span>
  <span class="hljs-comment">// Return top 5 closest peers so the new node has someone to talk to</span>
  ws.<span class="hljs-title function_">send</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">&apos;peers&apos;</span>, <span class="hljs-attr">peers</span>: closestPeers }));
  <span class="hljs-keyword">break</span>;</code></pre>



<p>Once the node receives this list, it disconnects from the logic of the server and moves to the <strong>ConnectionManager</strong>.</p>



<h3 class="wp-block-heading"><strong>The Switchboard: ConnectionManager</strong></h3>



<p>The heavy lifting happens in <code><a href="https://github.com/DarkMatter-999/WebRTC-DHT/blob/master/src/peer/connection-manager.js">src/peer/connection-manager.js</a></code>. This class manages the lifecycle of peer connections.</p>



<p>The most critical function in this file is <code>_sendSignal</code>. This function decides <em>how</em> to send the connection setup data to a target peer.</p>



<pre class="wp-block-dm-hcb-highlighted-code-block"><button class="dm-hcb-copy hljs" data-code="// src/peer/connection-manager.js

_sendSignal(peerIdHex, type, payload) {
  // STRATEGY 1: The Easy Way
  // If we are still connected to the WebSocket server, use it.
  if (WebSocket.OPEN === this.socket?.readyState) {
    this._sendSignalWS(wstype, peerIdHex, payload);
    return;
  }

  // STRATEGY 2: The Decentralized Way (The Cool Part)
  // If no server, we route the signal through the DHT mesh we already have!
  if (!this.routeSignal) return; // (Safety check)

  // Wrap the signal in a DHT packet
  const msg = encodeSignal(type, {
    from: this.nodeIdHex,
    to: peerIdHex,
    payload,
  });

  // Ask the routing table: &quot;Who is closest to this target peer?&quot;
  const next = this.routeSignal(peerIdHex);

  // Send the signal to those neighbors, asking them to forward it.
  for (const hex of next) {
    const peer = this.peers.get(hex);
    if (peer?.channel?.readyState === 'open') {
      peer.channel.send(msg);
    }
  }
}" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" aria-hidden="true"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 4.5h11a.5.5 0 0 1 .5.5v11a.5.5 0 0 1-.5.5H5a.5.5 0 0 1-.5-.5V5a.5.5 0 0 1 .5-.5ZM3 5a2 2 0 0 1 2-2h11a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5Zm17 3v10.75c0 .69-.56 1.25-1.25 1.25H6v1.5h12.75a2.75 2.75 0 0 0 2.75-2.75V8H20Z"></path></svg><span>Copy</span></button><code class="hljs language-javascript"><span class="hljs-comment">// src/peer/connection-manager.js</span>

<span class="hljs-title function_">_sendSignal</span>(<span class="hljs-params">peerIdHex, type, payload</span>) {
  <span class="hljs-comment">// STRATEGY 1: The Easy Way</span>
  <span class="hljs-comment">// If we are still connected to the WebSocket server, use it.</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-title class_">WebSocket</span>.<span class="hljs-property">OPEN</span> === <span class="hljs-variable language_">this</span>.<span class="hljs-property">socket</span>?.<span class="hljs-property">readyState</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_sendSignalWS</span>(wstype, peerIdHex, payload);
    <span class="hljs-keyword">return</span>;
  }

  <span class="hljs-comment">// STRATEGY 2: The Decentralized Way (The Cool Part)</span>
  <span class="hljs-comment">// If no server, we route the signal through the DHT mesh we already have!</span>
  <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">routeSignal</span>) <span class="hljs-keyword">return</span>; <span class="hljs-comment">// (Safety check)</span>

  <span class="hljs-comment">// Wrap the signal in a DHT packet</span>
  <span class="hljs-keyword">const</span> msg = <span class="hljs-title function_">encodeSignal</span>(type, {
    <span class="hljs-attr">from</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">nodeIdHex</span>,
    <span class="hljs-attr">to</span>: peerIdHex,
    payload,
  });

  <span class="hljs-comment">// Ask the routing table: &quot;Who is closest to this target peer?&quot;</span>
  <span class="hljs-keyword">const</span> next = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">routeSignal</span>(peerIdHex);

  <span class="hljs-comment">// Send the signal to those neighbors, asking them to forward it.</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> hex <span class="hljs-keyword">of</span> next) {
    <span class="hljs-keyword">const</span> peer = <span class="hljs-variable language_">this</span>.<span class="hljs-property">peers</span>.<span class="hljs-title function_">get</span>(hex);
    <span class="hljs-keyword">if</span> (peer?.<span class="hljs-property">channel</span>?.<span class="hljs-property">readyState</span> === <span class="hljs-string">&apos;open&apos;</span>) {
      peer.<span class="hljs-property">channel</span>.<span class="hljs-title function_">send</span>(msg);
    }
  }
}</code></pre>



<p>This is the key to decentralization. Once we have a few friends in the network, we no longer need the signalling server. If we want to connect to a stranger, we just ask our friends to pass the note along until it reaches the stranger, Kademlia makes it very efficient by organizing the network into a structured <strong>Distributed Hash Table (DHT)</strong> where every participant is assigned a unique ID. Instead of broadcasting a request to everyone or wandering aimlessly through a list of friends. </p>



<p>Kademlia uses a <strong>logical distance metric (XOR)</strong> to &#8220;map&#8221; the network, when you ask your friends to pass a note, they don&#8217;t just pass it to anyone, they pass it to the person they know whose ID is numerically &#8220;closer&#8221; to the stranger&#8217;s ID. This creates a routing system where the number of hops required to find anyone stays very small, specifically scaling at a rate of <em>O(log n)</em>, meaning even in a network of millions, you can reach a stranger in just a few steps.</p>



<h3 class="wp-block-heading">Handling Incoming Signals</h3>



<p>When a signal arrives (either via WebSocket or forwarded by another peer), <code>_handleDhtSignal</code> processes it.<br>There is a subtle but important piece of code here for <strong>Deduplication</strong>. In a mesh network, you might receive the same forwarded message from three different neighbors. We must process it only once.</p>



<pre class="wp-block-dm-hcb-highlighted-code-block"><button class="dm-hcb-copy hljs" data-code="// src/peer/connection-manager.js

async _handleDhtSignal(buf) {
  const { type, payload } = decodeSignal(buf);
  const { messageId } = payload;

  // Have we seen this message ID recently?
  const now = Date.now();
  const ts = this.seenSignalIds.get(messageId);
  if (ts &amp;&amp; now - ts < SEEN_SIGNAL_TTL) return; // Ignore duplicate

  this.seenSignalIds.set(messageId, now); // Mark as seen

  // Is this meant for me?
  if (payload.to !== this.nodeIdHex) {
    // Forwarding logic would go here
    // ...
    return;
  }

  // It is for me! Process the Offer/Answer/ICE...
}" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" aria-hidden="true"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 4.5h11a.5.5 0 0 1 .5.5v11a.5.5 0 0 1-.5.5H5a.5.5 0 0 1-.5-.5V5a.5.5 0 0 1 .5-.5ZM3 5a2 2 0 0 1 2-2h11a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5Zm17 3v10.75c0 .69-.56 1.25-1.25 1.25H6v1.5h12.75a2.75 2.75 0 0 0 2.75-2.75V8H20Z"></path></svg><span>Copy</span></button><code class="hljs language-javascript"><span class="hljs-comment">// src/peer/connection-manager.js</span>

<span class="hljs-keyword">async</span> <span class="hljs-title function_">_handleDhtSignal</span>(<span class="hljs-params">buf</span>) {
  <span class="hljs-keyword">const</span> { type, payload } = <span class="hljs-title function_">decodeSignal</span>(buf);
  <span class="hljs-keyword">const</span> { messageId } = payload;

  <span class="hljs-comment">// Have we seen this message ID recently?</span>
  <span class="hljs-keyword">const</span> now = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
  <span class="hljs-keyword">const</span> ts = <span class="hljs-variable language_">this</span>.<span class="hljs-property">seenSignalIds</span>.<span class="hljs-title function_">get</span>(messageId);
  <span class="hljs-keyword">if</span> (ts &amp;&amp; now - ts &lt; <span class="hljs-variable constant_">SEEN_SIGNAL_TTL</span>) <span class="hljs-keyword">return</span>; <span class="hljs-comment">// Ignore duplicate</span>

  <span class="hljs-variable language_">this</span>.<span class="hljs-property">seenSignalIds</span>.<span class="hljs-title function_">set</span>(messageId, now); <span class="hljs-comment">// Mark as seen</span>

  <span class="hljs-comment">// Is this meant for me?</span>
  <span class="hljs-keyword">if</span> (payload.<span class="hljs-property">to</span> !== <span class="hljs-variable language_">this</span>.<span class="hljs-property">nodeIdHex</span>) {
    <span class="hljs-comment">// Forwarding logic would go here</span>
    <span class="hljs-comment">// ...</span>
    <span class="hljs-keyword">return</span>;
  }

  <span class="hljs-comment">// It is for me! Process the Offer/Answer/ICE...</span>
}</code></pre>



<hr class="wp-block-separator has-alpha-channel-opacity is-style-dots"/>



<h2 class="wp-block-heading">The Routing Table</h2>



<p>Now that our nodes can exchange binary messages, they need to know <em>who</em> to send those messages to. If we have 10,000 nodes in a network, we can&#8217;t simply keep a list of everyone in memory, that doesn&#8217;t scale.<br>Instead, Kademlia uses a clever strategy: <strong><em>Know a lot about your neighbors, and a little about everyone else.</em></strong></p>



<p>This logic lives in <code><a href="https://github.com/DarkMatter-999/WebRTC-DHT/blob/master/src/peer/routing-table.js">src/peer/routing-table.js</a></code>. It is arguably the most mathematically interesting part of the project.</p>



<h3 class="wp-block-heading">The Metric: XOR Distance</h3>



<p>How do we define <em>&#8220;distance&#8221;</em> on internet? Latency? Hops? Geographical location?<br>Kademlia ignores all of that. It defines the distance purely mathematically using the <strong>XOR</strong> operation on Node IDs.</p>



<p>If Node A is <code>0101</code> and Node B is <code>0100</code>, the distance between them is <code>0001</code>.</p>



<p>This has a powerful property of <strong>Unidirectionality</strong>. For any point <em>x</em> and distance <em>d</em>, there is exactly one point <em>y</em> such that distance(<em>x</em>, <em>y</em>) = <em>d</em>. This eliminates &#8220;routing loops&#8221; naturally.</p>



<p>In <code><a href="https://github.com/DarkMatter-999/WebRTC-DHT/blob/master/src/peer/utils.js">src/peer/utils.js</a></code>, we see the raw buffer implementation:</p>



<pre class="wp-block-dm-hcb-highlighted-code-block"><button class="dm-hcb-copy hljs" data-code="// src/peer/utils.js

export function xorDistance(a, b) {
  const buf = Buffer.alloc(a.length);
  for (let i = 0; i < a.length; i++) {
    buf[i] = a[i] ^ b[i]; // Bitwise XOR
  }
  return buf;
}" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" aria-hidden="true"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 4.5h11a.5.5 0 0 1 .5.5v11a.5.5 0 0 1-.5.5H5a.5.5 0 0 1-.5-.5V5a.5.5 0 0 1 .5-.5ZM3 5a2 2 0 0 1 2-2h11a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5Zm17 3v10.75c0 .69-.56 1.25-1.25 1.25H6v1.5h12.75a2.75 2.75 0 0 0 2.75-2.75V8H20Z"></path></svg><span>Copy</span></button><code class="hljs language-javascript"><span class="hljs-comment">// src/peer/utils.js</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">xorDistance</span>(<span class="hljs-params">a, b</span>) {
  <span class="hljs-keyword">const</span> buf = <span class="hljs-title class_">Buffer</span>.<span class="hljs-title function_">alloc</span>(a.<span class="hljs-property">length</span>);
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; a.<span class="hljs-property">length</span>; i++) {
    buf[i] = a[i] ^ b[i]; <span class="hljs-comment">// Bitwise XOR</span>
  }
  <span class="hljs-keyword">return</span> buf;
}</code></pre>



<h3 class="wp-block-heading">K-Buckets</h3>



<p>The routing table isn&#8217;t just one big list. It is an array of <strong>Buckets</strong>.<br>Since our Node IDs are 256 bits (<em>SHA-256</em>), the routing table has <strong>256 buckets</strong>.</p>



<ul class="wp-block-list">
<li><strong>Bucket 0</strong>: Stores nodes that share the first 0 bits with us (very far away).</li>



<li><strong>Bucket 255</strong>: Stores nodes that differ only at the very last bit (immediate neighbors).</li>
</ul>



<p>This creates a logarithmic view of the network. We have highly detailed knowledge of nodes close to us, and sparse knowledge of nodes far away.</p>



<p>How do we decide which bucket a peer goes into? We find the <strong>First Differing Bit</strong> (or leading zero count of the XOR distance).</p>



<pre class="wp-block-dm-hcb-highlighted-code-block"><button class="dm-hcb-copy hljs" data-code="// src/peer/routing-table.js

_bucketIndex(nodeId) {
  const dist = xorDistance(this.nodeId, nodeId);

  // Scan byte by byte
  for (let i = 0; i < dist.length; i++) {
    if (dist[i] === 0) continue; // Bytes are identical, keep going

    // Found a differing byte, now find the specific bit
    for (let bit = 0; bit < 8; bit++) {
      if (dist[i] &amp; (0x80 &gt;&gt; bit)) {
        return i * 8 + bit; // Return the exact bit position (0-255)
      }
    }
  }
  return this.buckets.length - 1;
}" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" aria-hidden="true"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 4.5h11a.5.5 0 0 1 .5.5v11a.5.5 0 0 1-.5.5H5a.5.5 0 0 1-.5-.5V5a.5.5 0 0 1 .5-.5ZM3 5a2 2 0 0 1 2-2h11a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5Zm17 3v10.75c0 .69-.56 1.25-1.25 1.25H6v1.5h12.75a2.75 2.75 0 0 0 2.75-2.75V8H20Z"></path></svg><span>Copy</span></button><code class="hljs language-javascript"><span class="hljs-comment">// src/peer/routing-table.js</span>

<span class="hljs-title function_">_bucketIndex</span>(<span class="hljs-params">nodeId</span>) {
  <span class="hljs-keyword">const</span> dist = <span class="hljs-title function_">xorDistance</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">nodeId</span>, nodeId);

  <span class="hljs-comment">// Scan byte by byte</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; dist.<span class="hljs-property">length</span>; i++) {
    <span class="hljs-keyword">if</span> (dist[i] === <span class="hljs-number">0</span>) <span class="hljs-keyword">continue</span>; <span class="hljs-comment">// Bytes are identical, keep going</span>

    <span class="hljs-comment">// Found a differing byte, now find the specific bit</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> bit = <span class="hljs-number">0</span>; bit &lt; <span class="hljs-number">8</span>; bit++) {
      <span class="hljs-keyword">if</span> (dist[i] &amp; (<span class="hljs-number">0x80</span> &gt;&gt; bit)) {
        <span class="hljs-keyword">return</span> i * <span class="hljs-number">8</span> + bit; <span class="hljs-comment">// Return the exact bit position (0-255)</span>
      }
    }
  }
  <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">buckets</span>.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>;
}</code></pre>



<h3 class="wp-block-heading">Managing Buckets: The &#8220;k=20&#8221; Rule</h3>



<p>Each bucket has a size limit, usually denoted as the <em>k</em> (default is 20 in this project).<br>Why limit it, you might ask? To keep the traffic low. If we know 20 nodes in a specific region of the ID space, that is statistically enough to route messages successfully even if half of them go offline any time.</p>



<p>But what happens when we meet a new node and the corresponding bucket is <strong>Full</strong>? This is where Kademlia&#8217;s &#8220;Eviction Policy&#8221; comes in.</p>



<h4 class="wp-block-heading">The &#8220;Wait and See&#8221; Strategy</h4>



<p>We do <strong>not</strong> simply drop the new node. Nor do we blindly drop the old node. We favor stability (old reliable nodes) over novelty (new unverified nodes).</p>



<ol class="wp-block-list">
<li><strong>Update:</strong> If the node is already in the bucket, move it to the tail (mark as recently seen).</li>



<li><strong>Add:</strong> If the bucket has space (<em>&lt; 20</em>), just add it.</li>



<li><strong>Standby:</strong> If the bucket is <strong>Full</strong>, we put the new node into a separate <code>replacements</code> list.</li>
</ol>



<pre class="wp-block-dm-hcb-highlighted-code-block"><button class="dm-hcb-copy hljs" data-code="// src/peer/routing-table.js (Excerpt)

if (bucket.nodes.length < this.k) {
  bucket.nodes.push(nodeId);
  return { action: 'added' };
}

// Bucket is full. Don't add yet. Store as a replacement candidate.
if (!bucket.replacements.some((id) =&gt; id.equals(nodeId))) {
  bucket.replacements.push(nodeId);
  // Keep the replacement list small too
  if (bucket.replacements.length &gt; this.k) {
    bucket.replacements.shift();
  }
}
return { action: 'full', bucketIndex: i };" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" aria-hidden="true"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 4.5h11a.5.5 0 0 1 .5.5v11a.5.5 0 0 1-.5.5H5a.5.5 0 0 1-.5-.5V5a.5.5 0 0 1 .5-.5ZM3 5a2 2 0 0 1 2-2h11a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5Zm17 3v10.75c0 .69-.56 1.25-1.25 1.25H6v1.5h12.75a2.75 2.75 0 0 0 2.75-2.75V8H20Z"></path></svg><span>Copy</span></button><code class="hljs language-javascript"><span class="hljs-comment">// src/peer/routing-table.js (Excerpt)</span>

<span class="hljs-keyword">if</span> (bucket.<span class="hljs-property">nodes</span>.<span class="hljs-property">length</span> &lt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">k</span>) {
  bucket.<span class="hljs-property">nodes</span>.<span class="hljs-title function_">push</span>(nodeId);
  <span class="hljs-keyword">return</span> { <span class="hljs-attr">action</span>: <span class="hljs-string">&apos;added&apos;</span> };
}

<span class="hljs-comment">// Bucket is full. Don&apos;t add yet. Store as a replacement candidate.</span>
<span class="hljs-keyword">if</span> (!bucket.<span class="hljs-property">replacements</span>.<span class="hljs-title function_">some</span>(<span class="hljs-function">(<span class="hljs-params">id</span>) =&gt;</span> id.<span class="hljs-title function_">equals</span>(nodeId))) {
  bucket.<span class="hljs-property">replacements</span>.<span class="hljs-title function_">push</span>(nodeId);
  <span class="hljs-comment">// Keep the replacement list small too</span>
  <span class="hljs-keyword">if</span> (bucket.<span class="hljs-property">replacements</span>.<span class="hljs-property">length</span> &gt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">k</span>) {
    bucket.<span class="hljs-property">replacements</span>.<span class="hljs-title function_">shift</span>();
  }
}
<span class="hljs-keyword">return</span> { <span class="hljs-attr">action</span>: <span class="hljs-string">&apos;full&apos;</span>, <span class="hljs-attr">bucketIndex</span>: i };</code></pre>



<p><strong>So when does the new node actually get in?</strong><br>Later, in the background, <code>PeerNode</code> checks the &#8220;Least Recently Seen&#8221; node in that full bucket. It pings it.</p>



<ul class="wp-block-list">
<li>If the old node responds: It stays. The new node stays in the waiting list.</li>



<li>If the old node is dead: It is evicted. The new node is promoted from <code>replacements</code> to <code>nodes</code>.</li>
</ul>



<p>This guarantees that our routing table is filled with robust, long-lived peers.</p>



<h3 class="wp-block-heading">Finding Neighbors</h3>



<p>Finally, the most used function in our entire DHT is <code>findClosest</code>. When we want to look up a key, we need to ask the nodes mathematically closest to it.<br>This function aggregates nodes from the target bucket, and then moves outwards to the adjacent buckets until sufficient candidates are found.</p>



<pre class="wp-block-dm-hcb-highlighted-code-block"><button class="dm-hcb-copy hljs" data-code="// src/peer/routing-table.js

findClosest(targetId, count = this.k) {
  const results = [];
  const start = this._bucketIndex(targetId);

  // We check buckets [start], [start+1], [start-1], [start+2]...
  // expanding outward from the target distance.
  for (let d = 0; d < this.buckets.length &amp;&amp; results.length < count; d++) {
    const i = d % 2 === 0 ? start + d : start - d;
    if (i < 0 || i &gt;= this.buckets.length) continue;

    const bucket = this.buckets[i];
    results.push(...bucket.nodes);
  }

  // Finally, sort everything by XOR distance to the target
  results.sort((a, b) =&gt;
    compareDistance(xorDistance(a, targetId), xorDistance(b, targetId))
  );

  return results.slice(0, count);
}" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" aria-hidden="true"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 4.5h11a.5.5 0 0 1 .5.5v11a.5.5 0 0 1-.5.5H5a.5.5 0 0 1-.5-.5V5a.5.5 0 0 1 .5-.5ZM3 5a2 2 0 0 1 2-2h11a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5Zm17 3v10.75c0 .69-.56 1.25-1.25 1.25H6v1.5h12.75a2.75 2.75 0 0 0 2.75-2.75V8H20Z"></path></svg><span>Copy</span></button><code class="hljs language-javascript"><span class="hljs-comment">// src/peer/routing-table.js</span>

<span class="hljs-title function_">findClosest</span>(<span class="hljs-params">targetId, count = <span class="hljs-variable language_">this</span>.k</span>) {
  <span class="hljs-keyword">const</span> results = [];
  <span class="hljs-keyword">const</span> start = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_bucketIndex</span>(targetId);

  <span class="hljs-comment">// We check buckets [start], [start+1], [start-1], [start+2]...</span>
  <span class="hljs-comment">// expanding outward from the target distance.</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> d = <span class="hljs-number">0</span>; d &lt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">buckets</span>.<span class="hljs-property">length</span> &amp;&amp; results.<span class="hljs-property">length</span> &lt; count; d++) {
    <span class="hljs-keyword">const</span> i = d % <span class="hljs-number">2</span> === <span class="hljs-number">0</span> ? start + d : start - d;
    <span class="hljs-keyword">if</span> (i &lt; <span class="hljs-number">0</span> || i &gt;= <span class="hljs-variable language_">this</span>.<span class="hljs-property">buckets</span>.<span class="hljs-property">length</span>) <span class="hljs-keyword">continue</span>;

    <span class="hljs-keyword">const</span> bucket = <span class="hljs-variable language_">this</span>.<span class="hljs-property">buckets</span>[i];
    results.<span class="hljs-title function_">push</span>(...bucket.<span class="hljs-property">nodes</span>);
  }

  <span class="hljs-comment">// Finally, sort everything by XOR distance to the target</span>
  results.<span class="hljs-title function_">sort</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span>
    <span class="hljs-title function_">compareDistance</span>(<span class="hljs-title function_">xorDistance</span>(a, targetId), <span class="hljs-title function_">xorDistance</span>(b, targetId))
  );

  <span class="hljs-keyword">return</span> results.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>, count);
}</code></pre>



<hr class="wp-block-separator has-alpha-channel-opacity is-style-dots"/>



<h2 class="wp-block-heading">The Core Logic (PeerNode)</h2>



<p>We have the phone lines (WebRTC/ConnectionManager) and the phone book (RoutingTable). Now we need the operator.<br><code>PeerNode</code>(<code><a href="https://github.com/DarkMatter-999/WebRTC-DHT/blob/master/src/peer/peer-node.js">src/peer/peer-node.js</a></code>) is the brain of the operation. It is where the actual &#8220;Kademlia&#8221; happens, it orchestrates the complex operation of asking peers for information, collecting responses, and deciding where to go next. It is responsible for <strong>Iterative Lookups</strong>, <strong>Data Persistence</strong>, and <strong>Network Maintenance</strong>.</p>



<h3 class="wp-block-heading">The Search: <code>iterativeFindNode</code></h3>



<p>This is the most critical algorithm in any DHT, when we want to find a node (or a piece of data/value), you can&#8217;t just ask any one of the neighbors and hope they know. We have to crawl the network, getting closer to the target one step at a time.</p>



<p>Kademlia uses an <strong><em>alpha</em>-parallel</strong> search (where <em>alpha=3</em> in this project).</p>



<figure class="wp-block-image size-large is-resized"><img decoding="async" width="964" height="1024" src="https://lakshyajeet.in/wp-content/uploads/2026/01/image-2-964x1024.png" alt="Iterative Find Node algorithm" class="wp-image-1252" style="width:576px;height:auto" srcset="https://lakshyajeet.in/wp-content/uploads/2026/01/image-2-964x1024.png 964w, https://lakshyajeet.in/wp-content/uploads/2026/01/image-2-283x300.png 283w, https://lakshyajeet.in/wp-content/uploads/2026/01/image-2-768x816.png 768w, https://lakshyajeet.in/wp-content/uploads/2026/01/image-2.png 970w" sizes="(max-width: 964px) 100vw, 964px" /></figure>



<p>The process is as follows:</p>



<ol class="wp-block-list">
<li><strong>Shortlist:</strong> Pick the 20 closest nodes we already know.</li>



<li><strong>Parallel Query:</strong> Pick the top 3 (<em>alpha</em>) nodes we haven&#8217;t asked yet.</li>



<li><strong>Ask:</strong> Send <code>FIND_NODE</code> requests to them simultaneously.</li>



<li><strong>Update:</strong> They reply with <em>their</em> closest neighbors. We add these new nodes to our shortlist.</li>



<li><strong>Repeat:</strong> Sort the list, pick the next 3, and loop until we stop finding closer nodes.</li>
</ol>



<p>This logic guarantees that even in a network of millions, we can find a target in <em>O(log N)</em> hops (usually just 3 or 4 jumps).</p>



<pre class="wp-block-dm-hcb-highlighted-code-block"><button class="dm-hcb-copy hljs" data-code="// src/peer/peer-node.js (Simplified)

async iterativeFindNode(targetNodeId) {
  let shortlist = this.routingTable.findClosest(targetNodeId, this.K);
  
  // The loop runs until we stop making progress or hit a max limit
  while (rounds++ < MAX_ROUNDS) {
    
    // Pick 'alpha' (3) unqueried nodes
    const batch = shortlist.filter(n =&gt; !queried.has(n)).slice(0, this.ALPHA);
    
    // Blast out requests in parallel
    const responses = await Promise.all(
      batch.map(node =&gt; this.sendFindNode(node, targetNodeId))
    );

    // Add new nodes discovered from responses to the shortlist
    for (const nodes of responses) {
      updateShortlist(shortlist, nodes);
    }

    // Sort by distance again
    shortlist.sort(/* sort by distance to target */);
  }

  return shortlist;
}" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" aria-hidden="true"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 4.5h11a.5.5 0 0 1 .5.5v11a.5.5 0 0 1-.5.5H5a.5.5 0 0 1-.5-.5V5a.5.5 0 0 1 .5-.5ZM3 5a2 2 0 0 1 2-2h11a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5Zm17 3v10.75c0 .69-.56 1.25-1.25 1.25H6v1.5h12.75a2.75 2.75 0 0 0 2.75-2.75V8H20Z"></path></svg><span>Copy</span></button><code class="hljs language-javascript"><span class="hljs-comment">// src/peer/peer-node.js (Simplified)</span>

<span class="hljs-keyword">async</span> <span class="hljs-title function_">iterativeFindNode</span>(<span class="hljs-params">targetNodeId</span>) {
  <span class="hljs-keyword">let</span> shortlist = <span class="hljs-variable language_">this</span>.<span class="hljs-property">routingTable</span>.<span class="hljs-title function_">findClosest</span>(targetNodeId, <span class="hljs-variable language_">this</span>.<span class="hljs-property">K</span>);
  
  <span class="hljs-comment">// The loop runs until we stop making progress or hit a max limit</span>
  <span class="hljs-keyword">while</span> (rounds++ &lt; <span class="hljs-variable constant_">MAX_ROUNDS</span>) {
    
    <span class="hljs-comment">// Pick &apos;alpha&apos; (3) unqueried nodes</span>
    <span class="hljs-keyword">const</span> batch = shortlist.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">n</span> =&gt;</span> !queried.<span class="hljs-title function_">has</span>(n)).<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">ALPHA</span>);
    
    <span class="hljs-comment">// Blast out requests in parallel</span>
    <span class="hljs-keyword">const</span> responses = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>(
      batch.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">node</span> =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">sendFindNode</span>(node, targetNodeId))
    );

    <span class="hljs-comment">// Add new nodes discovered from responses to the shortlist</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> nodes <span class="hljs-keyword">of</span> responses) {
      <span class="hljs-title function_">updateShortlist</span>(shortlist, nodes);
    }

    <span class="hljs-comment">// Sort by distance again</span>
    shortlist.<span class="hljs-title function_">sort</span>(<span class="hljs-comment">/* sort by distance to target */</span>);
  }

  <span class="hljs-keyword">return</span> shortlist;
}</code></pre>



<h3 class="wp-block-heading">The Memory: <code>storeValue</code> and Quorums</h3>



<p>A DHT isn&#8217;t useful if it loses data when a node goes offline. To prevent this, we never store data on just a <em>single</em> node. We store it on the  <em><strong>k </strong></em><strong>closest nodes</strong> (where <em>k=20</em>).</p>



<p>However, we don&#8217;t need <em>all</em> 20 nodes to confirm success. We wait for a <strong>Write Quorum</strong> (<em>w</em>).</p>



<ul class="wp-block-list">
<li><em>k = 20</em></li>



<li><em>W = [k/2] = 10</em></li>
</ul>



<p>This means if 10 nodes accept our data, we consider it <em>saved</em>. This ensures high availability. Even if 9 nodes crash immediately after the write, the data survives on the 10th node (and eventually with others).</p>



<pre class="wp-block-dm-hcb-highlighted-code-block"><button class="dm-hcb-copy hljs" data-code="// src/peer/peer-node.js

async storeValue(key, value) {
  // 1. Find the 20 closest nodes to the Key's hash
  const closest = await this.iterativeFindNode(keyId);
  
  const W = Math.ceil(this.K / 2); // 10
  let acks = 0;

  // 2. Send STORE command to them
  for (const hex of targets) {
    const ok = await this.conn.send(hex, /* STORE command */);
    
    if (ok) {
      acks++;
      // 3. Stop once we hit Quorum
      if (acks &gt;= W) break;
    }
  }

  if (acks < W) {
    throw new Error(`STORE failed: quorum not reached (${acks}/${W})`);
  }
}" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" aria-hidden="true"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 4.5h11a.5.5 0 0 1 .5.5v11a.5.5 0 0 1-.5.5H5a.5.5 0 0 1-.5-.5V5a.5.5 0 0 1 .5-.5ZM3 5a2 2 0 0 1 2-2h11a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5Zm17 3v10.75c0 .69-.56 1.25-1.25 1.25H6v1.5h12.75a2.75 2.75 0 0 0 2.75-2.75V8H20Z"></path></svg><span>Copy</span></button><code class="hljs language-javascript"><span class="hljs-comment">// src/peer/peer-node.js</span>

<span class="hljs-keyword">async</span> <span class="hljs-title function_">storeValue</span>(<span class="hljs-params">key, value</span>) {
  <span class="hljs-comment">// 1. Find the 20 closest nodes to the Key&apos;s hash</span>
  <span class="hljs-keyword">const</span> closest = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">iterativeFindNode</span>(keyId);
  
  <span class="hljs-keyword">const</span> W = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">ceil</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">K</span> / <span class="hljs-number">2</span>); <span class="hljs-comment">// 10</span>
  <span class="hljs-keyword">let</span> acks = <span class="hljs-number">0</span>;

  <span class="hljs-comment">// 2. Send STORE command to them</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> hex <span class="hljs-keyword">of</span> targets) {
    <span class="hljs-keyword">const</span> ok = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">conn</span>.<span class="hljs-title function_">send</span>(hex, <span class="hljs-comment">/* STORE command */</span>);
    
    <span class="hljs-keyword">if</span> (ok) {
      acks++;
      <span class="hljs-comment">// 3. Stop once we hit Quorum</span>
      <span class="hljs-keyword">if</span> (acks &gt;= W) <span class="hljs-keyword">break</span>;
    }
  }

  <span class="hljs-keyword">if</span> (acks &lt; W) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`STORE failed: quorum not reached (<span class="hljs-subst">${acks}</span>/<span class="hljs-subst">${W}</span>)`</span>);
  }
}</code></pre>



<h3 class="wp-block-heading">The Retrieval: <code>findValue</code> &amp; Repair</h3>



<p>Retrieving data (<code>findValue</code>) looks very similar to <code>iterativeFindNode</code>, with two key differences:</p>



<ol class="wp-block-list">
<li><strong>Early Exit:</strong> If a peer replies with the <em>Data</em> instead of a list of nodes, the search stops immediately.</li>



<li><strong>Opportunistic Replication (Repair):</strong> This is a cool optimization.</li>
</ol>



<p>Imagine you find the data on Node D. But Node A, Node B, and Node C were mathematically <em>closer</em> to the key but didn&#8217;t have it (maybe they were offline when it was published).<br>Since we are walking past A, B, and C anyway, we should fix that!</p>



<pre class="wp-block-dm-hcb-highlighted-code-block"><button class="dm-hcb-copy hljs" data-code="// src/peer/peer-node.js (Excerpt from findValue)

if (res.record) {
  // We found the data!
  bestRecord = res.record;

  // Look for a node that was CLOSER than the one who had the data
  const closer = shortlist.find(n =&gt; isCloser(n, responder));

  // &quot;Store-back&quot;: Give the data to that closer node so the next person finds it faster
  if (closer) {
    this.conn.send(closer, encodeStore(keyId, bestRecord));
  }
}" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" aria-hidden="true"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 4.5h11a.5.5 0 0 1 .5.5v11a.5.5 0 0 1-.5.5H5a.5.5 0 0 1-.5-.5V5a.5.5 0 0 1 .5-.5ZM3 5a2 2 0 0 1 2-2h11a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5Zm17 3v10.75c0 .69-.56 1.25-1.25 1.25H6v1.5h12.75a2.75 2.75 0 0 0 2.75-2.75V8H20Z"></path></svg><span>Copy</span></button><code class="hljs language-javascript"><span class="hljs-comment">// src/peer/peer-node.js (Excerpt from findValue)</span>

<span class="hljs-keyword">if</span> (res.<span class="hljs-property">record</span>) {
  <span class="hljs-comment">// We found the data!</span>
  bestRecord = res.<span class="hljs-property">record</span>;

  <span class="hljs-comment">// Look for a node that was CLOSER than the one who had the data</span>
  <span class="hljs-keyword">const</span> closer = shortlist.<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">n</span> =&gt;</span> <span class="hljs-title function_">isCloser</span>(n, responder));

  <span class="hljs-comment">// &quot;Store-back&quot;: Give the data to that closer node so the next person finds it faster</span>
  <span class="hljs-keyword">if</span> (closer) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">conn</span>.<span class="hljs-title function_">send</span>(closer, <span class="hljs-title function_">encodeStore</span>(keyId, bestRecord));
  }
}</code></pre>



<p>This &#8220;<em>Store-back</em>&#8221; mechanism ensures that popular data naturally migrates to the nodes where it &#8220;<em>belongs</em>&#8221; (the closest ones), keeping the network efficient.</p>



<h3 class="wp-block-heading">The Gardening: Maintenance Timers</h3>



<p>This is my favorite example of emergent behavior derived from simple rules. A DHT is like a living organism. Nodes join, leave, and crash. Data expires. If we did nothing, the routing tables would rot and data would vanish.</p>



<p>In <code>node.start()</code>, several background timers are launched to act as janitors:</p>



<ol class="wp-block-list">
<li><strong>Bucket Refresh:</strong> Pick a random ID in a bucket&#8217;s range and search for it. This forces us to find new peers in that specific area of the network, keeping the routing table full.</li>



<li><strong>Republish:</strong> If <em>I</em> am the original author of a piece of data, I must re-upload it every hour so peers know it&#8217;s still valid.</li>



<li><strong>Replica Repair:</strong> If I am holding data for someone else, I check if I am still one of the closest nodes. If not, I move the data to someone closer.</li>



<li><strong>Liveness Checks:</strong> Ping the oldest nodes in my routing table. If they don&#8217;t answer, evict them and replace them with fresh nodes.</li>
</ol>



<hr class="wp-block-separator has-alpha-channel-opacity is-style-dots"/>



<h2 class="wp-block-heading">Orchestration &amp; Usage (Running the Swarm)</h2>



<p>We have explored the code and understood the logic. Now, let&#8217;s play with it.</p>



<p>Developing a Distributed system is hard because we can&#8217;t easily run 50 copies of our app on our machine manually. We need <strong>Orchestration</strong>. The project includes a dedicated orchestration layer built using <strong>Docker Compose</strong>.<br></p>



<h3 class="wp-block-heading">The Orchestrator</h3>



<p>Instead of writing <code>docker</code> commands, the project includes a helper script(<code><a href="https://github.com/DarkMatter-999/WebRTC-DHT/blob/master/index.js">index.js</a></code>) at the root directory.<br>When you run:</p>



<pre class="wp-block-dm-hcb-highlighted-code-block"><button class="dm-hcb-copy hljs" data-code="$ npm run docker -- up --peers 10" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" aria-hidden="true"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 4.5h11a.5.5 0 0 1 .5.5v11a.5.5 0 0 1-.5.5H5a.5.5 0 0 1-.5-.5V5a.5.5 0 0 1 .5-.5ZM3 5a2 2 0 0 1 2-2h11a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5Zm17 3v10.75c0 .69-.56 1.25-1.25 1.25H6v1.5h12.75a2.75 2.75 0 0 0 2.75-2.75V8H20Z"></path></svg><span>Copy</span></button><code class="hljs language-powershell"><span class="hljs-variable">$</span> npm run docker <span class="hljs-literal">--</span> up <span class="hljs-literal">--peers</span> <span class="hljs-number">10</span></code></pre>



<p>The script parses the arguments and executes:</p>



<pre class="wp-block-dm-hcb-highlighted-code-block"><button class="dm-hcb-copy hljs" data-code="$ docker compose -f docker-compose.yml up -d --scale peer=10" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" aria-hidden="true"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 4.5h11a.5.5 0 0 1 .5.5v11a.5.5 0 0 1-.5.5H5a.5.5 0 0 1-.5-.5V5a.5.5 0 0 1 .5-.5ZM3 5a2 2 0 0 1 2-2h11a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5Zm17 3v10.75c0 .69-.56 1.25-1.25 1.25H6v1.5h12.75a2.75 2.75 0 0 0 2.75-2.75V8H20Z"></path></svg><span>Copy</span></button><code class="hljs language-powershell"><span class="hljs-variable">$</span> docker compose <span class="hljs-operator">-f</span> docker<span class="hljs-literal">-compose</span>.yml up <span class="hljs-literal">-d</span> <span class="hljs-literal">--scale</span> peer=<span class="hljs-number">10</span></code></pre>



<p>The magic word here is <strong><code>--scale</code></strong>. This tells Docker Compose to spin up 1 instance of the <code>signalling</code> server, 1 instance of the <code>client</code>, and <strong>10 instances</strong> of the <code>peer</code> service.</p>



<p>Looking at <code>docker-compose.yml</code>, we see the network topology:</p>



<ul class="wp-block-list">
<li><strong><code>signalling</code></strong>: The bootstrap server. It exposes port 3000, so that, we can connect to it from our machine outside Docker.</li>



<li><strong><code>client</code></strong>: The CLI tool. It depends on <code>signalling</code>. This can be run on our machine bare-metal.</li>



<li><strong><code>peer</code></strong>: The worker nodes. They also depend on <code>signalling</code>.</li>
</ul>



<h3 class="wp-block-heading">Solving the &#8220;Thundering Herd&#8221; Problem</h3>



<p>If we launch 50 peers simultaneously, they will all try to hit the WebSocket server and eventually each other at the same exact millisecond. This can cause network stall and connection timeouts.<br>To solve this, we add a small <strong>Jitter</strong> to our peer startup(<code><a href="https://github.com/DarkMatter-999/WebRTC-DHT/blob/master/peer-entry.sh">peer-entry.sh</a></code>). It spreads the load over 30 seconds, thus, ensuring the network bootstraps smoothly. This simulates how the network behaves in real life as all peers cannot start at the exact same time in real-life.</p>



<pre class="wp-block-dm-hcb-highlighted-code-block"><button class="dm-hcb-copy hljs" data-code="#!/bin/sh
# peer-entry.sh

# Generate a random delay between 0 and 30 seconds
DELAY=$(awk -v max=&quot;$STARTUP_DELAY_MAX&quot; 'BEGIN{srand(); print int(rand()*(max+1))}')

echo &quot;Startup delay: ${DELAY}s&quot;
sleep &quot;$DELAY&quot;

# Start the node
exec &quot;$@&quot;" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" aria-hidden="true"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 4.5h11a.5.5 0 0 1 .5.5v11a.5.5 0 0 1-.5.5H5a.5.5 0 0 1-.5-.5V5a.5.5 0 0 1 .5-.5ZM3 5a2 2 0 0 1 2-2h11a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5Zm17 3v10.75c0 .69-.56 1.25-1.25 1.25H6v1.5h12.75a2.75 2.75 0 0 0 2.75-2.75V8H20Z"></path></svg><span>Copy</span></button><code class="hljs language-bash"><span class="hljs-meta">#!/bin/sh</span>
<span class="hljs-comment"># peer-entry.sh</span>

<span class="hljs-comment"># Generate a random delay between 0 and 30 seconds</span>
DELAY=$(awk -v max=<span class="hljs-string">&quot;<span class="hljs-variable">$STARTUP_DELAY_MAX</span>&quot;</span> <span class="hljs-string">&apos;BEGIN{srand(); print int(rand()*(max+1))}&apos;</span>)

<span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;Startup delay: <span class="hljs-variable">${DELAY}</span>s&quot;</span>
<span class="hljs-built_in">sleep</span> <span class="hljs-string">&quot;<span class="hljs-variable">$DELAY</span>&quot;</span>

<span class="hljs-comment"># Start the node</span>
<span class="hljs-built_in">exec</span> <span class="hljs-string">&quot;<span class="hljs-variable">$@</span>&quot;</span></code></pre>



<h3 class="wp-block-heading">The Interactive Client</h3>



<p>Once the swarm is running, we need a way to control it. We can check the logs manually, but that&#8217;s messy and hard. Instead, the project provides a &#8220;<em>God Mode</em>&#8221; client.<br>The client(<code><a href="https://github.com/DarkMatter-999/WebRTC-DHT/blob/master/src/peer/client.js">src/peer/client.js</a></code>) connects to the mesh just like any other peer and indeed behaves as a peer, but it exposes its routing table, events and commands in an interface directly to your terminal.</p>



<p>The CLI accepts several commands that trigger the internal <code>PeerNode</code> methods.</p>



<ul class="wp-block-list">
<li><strong><code>peers</code></strong>: Calls <code>node.conn.getConnectedPeers()</code>. Shows who we are directly connected to via WebRTC.</li>



<li><strong><code>store &lt;key> &lt;value></code></strong>: Triggers <code>node.storeValue()</code>. Will show &#8220;Store complete (quorum reached)&#8221; if it succeeds.</li>



<li><strong><code>get &lt;key></code></strong>: Triggers <code>node.findValue()</code>. It will perform the lookup and print the result.</li>



<li><strong><code>find &lt;nodeId></code></strong>: Triggers <code>iterativeFindNode</code>. Useful for debugging routing paths.</li>



<li><strong><code>dump</code></strong>: Dumps the entire routing table (all buckets).</li>
</ul>



<h3 class="wp-block-heading">Putting it all together</h3>



<p>Finally, here is how you simulate a Kademlia network on your machine.</p>



<p><strong>Step 1: Start the Swarm</strong><br>Boot up a network with 25 peers.</p>



<pre class="wp-block-dm-hcb-highlighted-code-block"><button class="dm-hcb-copy hljs" data-code="$ npm run docker -- all --peers 25" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" aria-hidden="true"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 4.5h11a.5.5 0 0 1 .5.5v11a.5.5 0 0 1-.5.5H5a.5.5 0 0 1-.5-.5V5a.5.5 0 0 1 .5-.5ZM3 5a2 2 0 0 1 2-2h11a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5Zm17 3v10.75c0 .69-.56 1.25-1.25 1.25H6v1.5h12.75a2.75 2.75 0 0 0 2.75-2.75V8H20Z"></path></svg><span>Copy</span></button><code class="hljs language-powershell"><span class="hljs-variable">$</span> npm run docker <span class="hljs-literal">--</span> all <span class="hljs-literal">--peers</span> <span class="hljs-number">25</span></code></pre>



<p><em>Wait about 30 seconds for the startup jitter to finish and the mesh to form.</em></p>



<p><strong>Step 2: Enter the Client</strong></p>



<pre class="wp-block-dm-hcb-highlighted-code-block"><button class="dm-hcb-copy hljs" data-code="# In a new terminal
$ npm run client" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" aria-hidden="true"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 4.5h11a.5.5 0 0 1 .5.5v11a.5.5 0 0 1-.5.5H5a.5.5 0 0 1-.5-.5V5a.5.5 0 0 1 .5-.5ZM3 5a2 2 0 0 1 2-2h11a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5Zm17 3v10.75c0 .69-.56 1.25-1.25 1.25H6v1.5h12.75a2.75 2.75 0 0 0 2.75-2.75V8H20Z"></path></svg><span>Copy</span></button><code class="hljs language-powershell"><span class="hljs-comment"># In a new terminal</span>
<span class="hljs-variable">$</span> npm run client</code></pre>



<p><strong>Step 3: Check Connections</strong><br>Inside the client REPL:</p>



<pre class="wp-block-dm-hcb-highlighted-code-block"><button class="dm-hcb-copy hljs" data-code="&gt; peers
Connected peers: [ 'a1b2...', 'c3d4...' ]" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" aria-hidden="true"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 4.5h11a.5.5 0 0 1 .5.5v11a.5.5 0 0 1-.5.5H5a.5.5 0 0 1-.5-.5V5a.5.5 0 0 1 .5-.5ZM3 5a2 2 0 0 1 2-2h11a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5Zm17 3v10.75c0 .69-.56 1.25-1.25 1.25H6v1.5h12.75a2.75 2.75 0 0 0 2.75-2.75V8H20Z"></path></svg><span>Copy</span></button><code class="hljs language-powershell">&gt; peers
Connected peers: [ <span class="hljs-string">&apos;a1b2...&apos;</span>, <span class="hljs-string">&apos;c3d4...&apos;</span> ]</code></pre>



<p>You should see at least one or two peers.</p>



<p><strong>Step 4: Store Data</strong><br>Let&#8217;s save a value into the cloud.</p>



<pre class="wp-block-dm-hcb-highlighted-code-block"><button class="dm-hcb-copy hljs" data-code="&gt; store 67 &quot;My value&quot;
Store complete (quorum reached)" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" aria-hidden="true"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 4.5h11a.5.5 0 0 1 .5.5v11a.5.5 0 0 1-.5.5H5a.5.5 0 0 1-.5-.5V5a.5.5 0 0 1 .5-.5ZM3 5a2 2 0 0 1 2-2h11a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5Zm17 3v10.75c0 .69-.56 1.25-1.25 1.25H6v1.5h12.75a2.75 2.75 0 0 0 2.75-2.75V8H20Z"></path></svg><span>Copy</span></button><code class="hljs language-powershell">&gt; store <span class="hljs-number">67</span> <span class="hljs-string">&quot;My value&quot;</span>
Store complete (quorum reached)</code></pre>



<p>Behind the scenes, our client hashed &#8220;67&#8221;, found the 10 closest nodes among the 25 running containers, and replicated the data to them.</p>



<p><strong>Step 5: Retrieve Data</strong><br>Now, let&#8217;s ask the network for it back.</p>



<pre class="wp-block-dm-hcb-highlighted-code-block"><button class="dm-hcb-copy hljs" data-code="&gt; get 67
Value found: &quot;My value&quot;" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" aria-hidden="true"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 4.5h11a.5.5 0 0 1 .5.5v11a.5.5 0 0 1-.5.5H5a.5.5 0 0 1-.5-.5V5a.5.5 0 0 1 .5-.5ZM3 5a2 2 0 0 1 2-2h11a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5Zm17 3v10.75c0 .69-.56 1.25-1.25 1.25H6v1.5h12.75a2.75 2.75 0 0 0 2.75-2.75V8H20Z"></path></svg><span>Copy</span></button><code class="hljs language-powershell">&gt; get <span class="hljs-number">67</span>
Value found: <span class="hljs-string">&quot;My value&quot;</span></code></pre>



<p><strong>Step 6: Scale Up</strong><br>Want to see how it handles growth? Leave the client open, and in another terminal run:</p>



<pre class="wp-block-dm-hcb-highlighted-code-block"><button class="dm-hcb-copy hljs" data-code="$ npm run docker -- up --peers 35" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" aria-hidden="true"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 4.5h11a.5.5 0 0 1 .5.5v11a.5.5 0 0 1-.5.5H5a.5.5 0 0 1-.5-.5V5a.5.5 0 0 1 .5-.5ZM3 5a2 2 0 0 1 2-2h11a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5Zm17 3v10.75c0 .69-.56 1.25-1.25 1.25H6v1.5h12.75a2.75 2.75 0 0 0 2.75-2.75V8H20Z"></path></svg><span>Copy</span></button><code class="hljs language-powershell"><span class="hljs-variable">$</span> npm run docker <span class="hljs-literal">--</span> up <span class="hljs-literal">--peers</span> <span class="hljs-number">35</span></code></pre>



<p>Docker will add 10 <em>new</em> peers to the existing network. The existing nodes will see them, add them to buckets, and the network topology will evolve automatically.</p>



<h3 class="wp-block-heading">Real-world limitations</h3>



<p>While <a href="https://github.com/DarkMatter-999/WebRTC-DHT">WebRTC-DHT</a> is a fully functional Kademlia implementation, it is designed for <strong>education and prototyping</strong>, not high-stakes production environments. If you plan to build the next IPFS or BitTorrent, you must address these constraints:</p>



<ol class="wp-block-list">
<li><strong>NAT Traversal (STUN only):</strong> This project relies solely on public STUN servers (<code>stun.l.google.com</code>). This works for most home connections but will fail behind strict corporate firewalls or Symmetric NATs. A production system requires <strong>TURN</strong> servers to relay traffic when direct P2P connections fail.</li>



<li><strong>Memory-Only Storage:</strong> Data is stored in a JavaScript Map. If a node crashes or the container restarts, its specific shard of data is lost. Real systems must persist data to disk (e.g., LevelDB, SQLite) so that data survives application restarts.</li>



<li><strong>Security &amp; Auth:</strong> There is no authentication mechanism, we trust all nodes. Anyone who knows the signalling server address can join the swarm. This makes the network vulnerable to <strong>Sybil Attacks</strong> (flooding the network with fake nodes to poison routing tables) or data tampering.</li>



<li><strong>Performance:</strong> Node.js with the <code>wrtc</code> binding is heavy. High-throughput distributed systems are typically implemented in Systems Languages (Rust, Go, C++) to avoid Garbage Collection pauses and minimize memory footprint per peer.</li>
</ol>



<hr class="wp-block-separator has-alpha-channel-opacity is-style-dots"/>



<h2 class="wp-block-heading">Conclusion</h2>



<p>We have walked through the entire stack of <strong>WebRTC-DHT</strong>:</p>



<ol class="wp-block-list">
<li><strong>Architecture:</strong> We saw how the code separates Networking, Routing, and Logic.</li>



<li><strong>Hybrid Signalling:</strong> We learned how to bootstrap via WebSockets and switch to P2P signalling.</li>



<li><strong>Routing Table:</strong> We explored XOR distance, buckets, and LRU eviction.</li>



<li><strong>Core Logic:</strong> We dissected the iterative lookup and quorum storage algorithms.</li>



<li><strong>Orchestration:</strong> We used Docker to simulate a swarm and handle thundering herds.</li>
</ol>



<p>This project serves as a compact, readable reference for anyone wanting to understand how decentralized networks like IPFS or BitTorrent actually work under the hood.</p>



<p><strong>Happy Hacking!</strong></p>



<p></p>
<p>The post <a href="https://lakshyajeet.in/building-a-kademlia-dht-over-webrtc/">Building a Kademlia DHT over WebRTC</a> appeared first on <a href="https://lakshyajeet.in/">Lakshyajeet&#039;s Blog</a>.</p>
]]></content:encoded>
					
		
		
			</item>
		<item>
		<title>WordPress Block Themes: Block Themes and Block Patterns Explained</title>
		<link>https://lakshyajeet.in/wordpress-block-themes-block-themes-and-block-patterns-explained/</link>
					<comments>https://lakshyajeet.in/wordpress-block-themes-block-themes-and-block-patterns-explained/#respond</comments>
		
		<dc:creator><![CDATA[lakshyajeet]]></dc:creator>
		<pubDate>Tue, 13 May 2025 16:28:27 +0000</pubDate>
				<category><![CDATA[Uncategorized]]></category>
		<category><![CDATA[blog]]></category>
		<category><![CDATA[blogging]]></category>
		<category><![CDATA[digital-marketing]]></category>
		<category><![CDATA[wordpress]]></category>
		<category><![CDATA[writing]]></category>
		<guid isPermaLink="false">https://lakshyajeet999.wordpress.com/?p=898</guid>

					<description><![CDATA[<p>As WordPress continues to evolve, so does the way we design and build websites. With the introduction of Full Site Editing (FSE), we’ve entered a new era where Block Themes and Block Patterns play a central role in how our sites look and function. Let’s dive into what Block Themes and Block Patterns are, how [&#8230;]</p>
<p>The post <a href="https://lakshyajeet.in/wordpress-block-themes-block-themes-and-block-patterns-explained/">WordPress Block Themes: Block Themes and Block Patterns Explained</a> appeared first on <a href="https://lakshyajeet.in/">Lakshyajeet&#039;s Blog</a>.</p>
]]></description>
										<content:encoded><![CDATA[
<p>As WordPress continues to evolve, so does the way we design and build websites. With the introduction of Full Site Editing (FSE), we’ve entered a new era where <strong>Block Themes</strong> and <strong>Block Patterns</strong> play a central role in how our sites look and function.</p>



<p>Let’s dive into what Block Themes and Block Patterns are, how they differ, and how we can use them to create more flexible and beautiful websites.</p>



<h2 class="wp-block-heading">What Are WordPress Block Themes?</h2>



<p><strong>Block Themes</strong> are a new type of WordPress theme that are built entirely with blocks. These themes leverage the power of the Gutenberg block editor to allow us to customize every part of our site—from headers and footers to templates and content areas—without writing custom PHP templates.</p>



<h3 class="wp-block-heading">Key Features of Block Themes:</h3>



<ul class="wp-block-list">
<li>Fully compatible with Full Site Editing (FSE)</li>



<li>Use of <code>theme.json</code> for global settings and styles</li>



<li>All templates and parts are created using blocks (<code>.html</code> files)</li>



<li>High design flexibility without needing a child theme</li>
</ul>



<h3 class="wp-block-heading">A Basic Structure of a Block Theme:</h3>



<pre class="wp-block-code"><code>my-block-theme/
├── block-templates/
│   ├── index.html
│   └── single.html
├── block-template-parts/
│   ├── header.html
│   └── footer.html
├── patterns/
│   └── test.html
├── styles/
│   └── style.css
├── functions.php
├── style.css
├── theme.json</code></pre>



<p>Example of <code>theme.json</code> in a Block Theme:</p>



<pre class="wp-block-dm-hcb-highlighted-code-block"><code class="hljs language-javascript">
{
  <span class="hljs-string">&quot;version&quot;</span>: <span class="hljs-number">2</span>,
  <span class="hljs-string">&quot;settings&quot;</span>: {
    <span class="hljs-string">&quot;color&quot;</span>: {
      <span class="hljs-string">&quot;palette&quot;</span>: [
        {
          <span class="hljs-string">&quot;slug&quot;</span>: <span class="hljs-string">&quot;primary&quot;</span>,
          <span class="hljs-string">&quot;color&quot;</span>: <span class="hljs-string">&quot;#0073aa&quot;</span>,
          <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;Primary&quot;</span>
        }
      ]
    }
  },
  <span class="hljs-string">&quot;styles&quot;</span>: {
    <span class="hljs-string">&quot;elements&quot;</span>: {
      <span class="hljs-string">&quot;h1&quot;</span>: {
        <span class="hljs-string">&quot;typography&quot;</span>: {
          <span class="hljs-string">&quot;fontSize&quot;</span>: <span class="hljs-string">&quot;2.5rem&quot;</span>
        }
      }
    }
  }
}
</code></pre>



<p>This file gives us centralized control over global styles like fonts, colors, and spacing—without editing any CSS.</p>



<h2 class="wp-block-heading">What Are WordPress Block Patterns?</h2>



<p><strong>Block Patterns</strong> are predefined collections of blocks that we can insert into pages or posts to speed up the design process. Think of them like reusable design sections—call to actions, hero sections, testimonials—that can be dropped in with one click.</p>



<h3 class="wp-block-heading">Why We Love Block Patterns:</h3>



<ul class="wp-block-list">
<li>Reusable and modular</li>



<li>Speeds up page design</li>



<li>Customizable after insertion</li>



<li>Encourages consistent design</li>
</ul>



<h3 class="wp-block-heading">Registering a Custom Block Pattern in a Theme:</h3>



<p>We can register patterns by adding a PHP file in the <code>patterns/</code> directory and hooking into it in <code>functions.php</code>.</p>



<h5 class="wp-block-heading">Example: <code>patterns/call-to-action.php</code></h5>



<pre class="wp-block-dm-hcb-highlighted-code-block"><code class="hljs language-php">
<span class="hljs-meta">&lt;?php</span>
<span class="hljs-title function_ invoke__">register_block_pattern</span>(
    <span class="hljs-string">&apos;mytheme/call-to-action&apos;</span>,
    <span class="hljs-keyword">array</span>(
        <span class="hljs-string">&apos;title&apos;</span>       =&gt; <span class="hljs-title function_ invoke__">__</span>(<span class="hljs-string">&apos;Call to Action&apos;</span>, <span class="hljs-string">&apos;mytheme&apos;</span>),
        <span class="hljs-string">&apos;description&apos;</span> =&gt; <span class="hljs-title function_ invoke__">_x</span>(<span class="hljs-string">&apos;A full-width call to action section.&apos;</span>, <span class="hljs-string">&apos;Block pattern description&apos;</span>, <span class="hljs-string">&apos;mytheme&apos;</span>),
        <span class="hljs-string">&apos;content&apos;</span>     =&gt; <span class="hljs-string">&apos;&lt;!-- wp:group {&quot;align&quot;:&quot;full&quot;,&quot;backgroundColor&quot;:&quot;primary&quot;,&quot;className&quot;:&quot;cta&quot;} --&gt;
                            &lt;div class=&quot;wp-block-group alignfull cta has-primary-background-color&quot;&gt;
                              &lt;h2&gt;Ready to start your journey?&lt;/h2&gt;
                              &lt;p&gt;Join us today and build your future.&lt;/p&gt;
                              &lt;a class=&quot;wp-block-button__link&quot; href=&quot;/signup&quot;&gt;Get Started&lt;/a&gt;
                            &lt;/div&gt;
                          &lt;!-- /wp:group --&gt;&apos;</span>,
        <span class="hljs-string">&apos;categories&apos;</span>  =&gt; <span class="hljs-keyword">array</span>(<span class="hljs-string">&apos;call-to-action&apos;</span>),
    )
);
</code></pre>



<h2 class="wp-block-heading">Block Themes vs Classic Themes</h2>



<figure class="wp-block-table"><table class="has-fixed-layout"><thead><tr><th>Feature</th><th>Classic Themes</th><th>Block Themes</th></tr></thead><tbody><tr><td>Template Language</td><td>PHP</td><td>HTML + Gutenberg Blocks</td></tr><tr><td>Customizer Support</td><td>Yes</td><td>Limited</td></tr><tr><td>FSE Compatibility</td><td>No</td><td>Yes</td></tr><tr><td><code>theme.json</code> Support</td><td>No</td><td>Yes</td></tr><tr><td>Developer Focus</td><td>More code-heavy</td><td>Visual-first, block-based</td></tr></tbody></table></figure>



<h2 class="wp-block-heading">Best Practices When Using Block Themes and Patterns</h2>



<ul class="wp-block-list">
<li>Use <code>theme.json</code> to manage styles globally.</li>



<li>Keep templates modular—use template parts for headers, footers, etc.</li>



<li>Take advantage of WordPress’s native block patterns directory.</li>



<li>Encourage team members to reuse patterns for brand consistency.</li>
</ul>



<h2 class="wp-block-heading">Conclusion</h2>



<p>Block Themes and Block Patterns aren’t just buzzwords—they&#8217;re the future of WordPress. Whether we’re building for clients or crafting our own sites, these tools give us greater flexibility, faster development, and more power over design—all while embracing a no-code/low-code philosophy.</p>
<p>The post <a href="https://lakshyajeet.in/wordpress-block-themes-block-themes-and-block-patterns-explained/">WordPress Block Themes: Block Themes and Block Patterns Explained</a> appeared first on <a href="https://lakshyajeet.in/">Lakshyajeet&#039;s Blog</a>.</p>
]]></content:encoded>
					
					<wfw:commentRss>https://lakshyajeet.in/wordpress-block-themes-block-themes-and-block-patterns-explained/feed/</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
			</item>
		<item>
		<title>WordPress Block Themes: Introduction</title>
		<link>https://lakshyajeet.in/wordpress-block-themes-introduction/</link>
					<comments>https://lakshyajeet.in/wordpress-block-themes-introduction/#respond</comments>
		
		<dc:creator><![CDATA[lakshyajeet]]></dc:creator>
		<pubDate>Mon, 12 May 2025 14:58:01 +0000</pubDate>
				<category><![CDATA[Uncategorized]]></category>
		<category><![CDATA[blog]]></category>
		<category><![CDATA[blogging]]></category>
		<category><![CDATA[technology]]></category>
		<category><![CDATA[wordpress]]></category>
		<category><![CDATA[writing]]></category>
		<guid isPermaLink="false">https://lakshyajeet999.wordpress.com/?p=890</guid>

					<description><![CDATA[<p>In the world of WordPress, there were lot of changes over the years. One of the most significant advancements has been the introduction of Block Themes. As we explore this new concept, we’ll break down what WordPress Block Themes are, how they differ from traditional themes, and why they are essential for the future of [&#8230;]</p>
<p>The post <a href="https://lakshyajeet.in/wordpress-block-themes-introduction/">WordPress Block Themes: Introduction</a> appeared first on <a href="https://lakshyajeet.in/">Lakshyajeet&#039;s Blog</a>.</p>
]]></description>
										<content:encoded><![CDATA[
<p>In the world of WordPress, there were lot of changes over the years. One of the most significant advancements has been the introduction of <strong>Block Themes</strong>. As we explore this new concept, we’ll break down what WordPress Block Themes are, how they differ from traditional themes, and why they are essential for the future of web design on WordPress.</p>



<h2 class="wp-block-heading">What are WordPress Block Themes?</h2>



<p>A WordPress Block Theme is a theme that fully embraces the <strong>Block Editor</strong>, also known as <strong>Gutenberg</strong>. Block Themes are designed to work with the block-based approach that WordPress introduced to content creation. Unlike traditional themes, which rely heavily on PHP templates and widget areas, Block Themes provide an entirely block-based approach to building and customizing a website.</p>



<p>Essentially, a Block Theme uses blocks for all aspects of the site — including the header, footer, and sidebar. With this structure, everything on the website, from the smallest detail to the entire layout, is built using blocks. This creates a more unified and consistent experience when it comes to designing and customizing a website in WordPress.</p>



<h2 class="wp-block-heading">How Block Themes Differ from Traditional Themes</h2>



<p>Before Block Themes, WordPress used a theme structure that involved PHP files for templates, like <code>header.php</code>, <code>footer.php</code>, <code>single.php</code>, and others. These files were designed to output various sections of a webpage, which would then be styled using CSS and customized using widgets.</p>



<p>In contrast, Block Themes shift the focus to <strong>blocks</strong> as the main building components for every part of a WordPress site. This has a few important differences:</p>



<ol class="wp-block-list">
<li><strong>Template Parts as Blocks</strong>: In traditional themes, elements like the header, footer, and sidebar are typically added through PHP code. In Block Themes, these elements are created as blocks. This gives users the ability to edit these parts directly in the WordPress Block Editor.</li>



<li><strong>No PHP Template Files</strong>: Traditional themes heavily rely on PHP files like <code>index.php</code> or <code>page.php</code> for rendering. In Block Themes, most of the rendering is done through <strong>HTML templates</strong> powered by the block-based system.</li>



<li><strong>Full-Site Editing</strong>: Block Themes are built for <strong>Full-Site Editing (FSE)</strong>, which allows users to edit their entire website (not just posts and pages) from the block editor. This includes editing headers, footers, and sidebars — everything becomes editable within the block editor environment.</li>
</ol>



<h2 class="wp-block-heading">Why Are WordPress Block Themes Important?</h2>



<p>As WordPress evolves, so do the needs of developers and users alike. Block Themes represent the future of WordPress theming and offer several important advantages:</p>



<ol class="wp-block-list">
<li><strong>Simplified Design Process</strong>: With everything built as blocks, users can easily edit, move, or add new components to their website. No need to dive deep into PHP files or manage widgets — everything is in the editor.</li>



<li><strong>Consistency Across the Site</strong>: Since the whole website structure is built with blocks, it ensures that the design remains consistent. For instance, the header block is the same across all pages, ensuring a uniform look and feel.</li>



<li><strong>Improved Customization</strong>: With Block Themes, we can customize our entire site directly from the WordPress admin area, without needing to use custom code. This is great for non-developers and designers who want to focus more on content and layout.</li>



<li><strong>Compatibility with the Block Editor</strong>: Block Themes are fully compatible with the Gutenberg Block Editor, making it easier to design content-heavy pages. Gutenberg continues to evolve, and using a Block Theme ensures we&#8217;re future-proofing our WordPress website.</li>
</ol>



<h2 class="wp-block-heading">How to Create a Basic WordPress Block Theme</h2>



<p>Creating a WordPress Block Theme requires some foundational knowledge of how blocks work in WordPress. Here&#8217;s a very basic example of how we can create a simple Block Theme.</p>



<h3 class="wp-block-heading">Step 1: Set Up Theme Folder</h3>



<p>To begin creating a Block Theme, create a new folder in our <code>wp-content/themes</code> directory. Let’s call it <code>my-block-theme</code>.</p>



<h3 class="wp-block-heading">Step 2: Create <code>style.css</code></h3>



<p>Inside the <code>my-block-theme</code> folder, create a <code>style.css</code> file to define the theme’s meta information.</p>



<pre class="wp-block-dm-hcb-highlighted-code-block"><code class="hljs language-css">
<span class="hljs-comment">/*
Theme Name: My Block Theme
Theme URI: https://example.com/my-block-theme
Author: Your Name
Author URI: https://example.com/
Description: A simple Block-based WordPress theme.
Version: 1.0
Requires at least: 5.8
Requires PHP: 7.4
License: GPL2
Text Domain: my-block-theme
*/</span>
</code></pre>



<h3 class="wp-block-heading">Step 3: Create <code>theme.json</code></h3>



<p>To enable Full-Site Editing and block-based template structures, we need a <code>theme.json</code> file. This file allows us to define global styles and configurations for blocks.</p>



<pre class="wp-block-dm-hcb-highlighted-code-block"><code class="hljs language-javascript">
{
  <span class="hljs-string">&quot;version&quot;</span>: <span class="hljs-number">2</span>,
  <span class="hljs-string">&quot;settings&quot;</span>: {
    <span class="hljs-string">&quot;custom&quot;</span>: {
      <span class="hljs-string">&quot;spacing&quot;</span>: {
        <span class="hljs-string">&quot;unit&quot;</span>: <span class="hljs-string">&quot;px&quot;</span>
      }
    }
  }
}
</code></pre>



<h3 class="wp-block-heading">Step 4: Define Templates Using Blocks</h3>



<p>Now, we’ll need to define our theme’s templates. For a Block Theme, this is typically done with HTML files.</p>



<p>For example, create a file called <code>index.html</code> inside our theme folder.</p>



<pre class="wp-block-dm-hcb-highlighted-code-block"><code class="hljs language-xml">
<span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>My Block Theme<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
  <span class="hljs-comment">&lt;!-- Header Block --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;wp-block-site-header&quot;</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- Site Header Content Here --&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  
  <span class="hljs-comment">&lt;!-- Main Content Block --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;wp-block-post-content&quot;</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- Main Content Here --&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

  <span class="hljs-comment">&lt;!-- Footer Block --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;wp-block-site-footer&quot;</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- Footer Content Here --&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>



<p>This basic structure defines the three key blocks: header, content, and footer.</p>



<h3 class="wp-block-heading">Step 5: Activate the Theme</h3>



<p>After we’ve set up these files, we can go to our WordPress dashboard and navigate to <strong>Appearance &gt; Themes</strong>. We should see our new Block Theme, “My Block Theme,” listed there. Activate it.</p>



<h2 class="wp-block-heading">Conclusion</h2>



<p>Block Themes represent the future of WordPress. They provide a more intuitive, flexible, and consistent approach to website design, making it easier for us to create and manage websites without needing to rely on complex PHP files or traditional theme structures.</p>



<p>By adopting Block Themes, we&#8217;re not only improving the customization experience for ourselves but also ensuring that we stay ahead of the curve with WordPress’s growing block-based capabilities. As the Block Editor continues to evolve, the power and flexibility of Block Themes will only increase, making it an essential tool for WordPress developers and designers moving forward.</p>



<p></p>
<p>The post <a href="https://lakshyajeet.in/wordpress-block-themes-introduction/">WordPress Block Themes: Introduction</a> appeared first on <a href="https://lakshyajeet.in/">Lakshyajeet&#039;s Blog</a>.</p>
]]></content:encoded>
					
					<wfw:commentRss>https://lakshyajeet.in/wordpress-block-themes-introduction/feed/</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
			</item>
		<item>
		<title>WordPress Block Editor: Widgets</title>
		<link>https://lakshyajeet.in/wordpress-block-editor-widgets/</link>
					<comments>https://lakshyajeet.in/wordpress-block-editor-widgets/#respond</comments>
		
		<dc:creator><![CDATA[lakshyajeet]]></dc:creator>
		<pubDate>Fri, 09 May 2025 14:18:57 +0000</pubDate>
				<category><![CDATA[Uncategorized]]></category>
		<category><![CDATA[blog]]></category>
		<category><![CDATA[blogging]]></category>
		<category><![CDATA[business]]></category>
		<category><![CDATA[digital-marketing]]></category>
		<category><![CDATA[wordpress]]></category>
		<guid isPermaLink="false">https://lakshyajeet999.wordpress.com/?p=884</guid>

					<description><![CDATA[<p>As WordPress continues to evolve, one of the most transformative updates in recent years has been the introduction of the Block Editor—also known as Gutenberg. For us as content creators, developers, and website managers, this shift offers a more visual, flexible, and intuitive way to build pages and manage content. What Are Widgets in the [&#8230;]</p>
<p>The post <a href="https://lakshyajeet.in/wordpress-block-editor-widgets/">WordPress Block Editor: Widgets</a> appeared first on <a href="https://lakshyajeet.in/">Lakshyajeet&#039;s Blog</a>.</p>
]]></description>
										<content:encoded><![CDATA[
<p>As WordPress continues to evolve, one of the most transformative updates in recent years has been the introduction of the <strong>Block Editor</strong>—also known as <strong>Gutenberg</strong>. For us as content creators, developers, and website managers, this shift offers a more visual, flexible, and intuitive way to build pages and manage content.</p>



<h2 class="wp-block-heading">What Are Widgets in the WordPress Block Editor?</h2>



<p>Traditionally, WordPress widgets were managed through the <strong>Appearance → Widgets</strong> menu in the dashboard. These were modular components—like recent posts, calendars, search bars, and more—that we could drag and drop into widget areas such as sidebars and footers.</p>



<p>With the arrival of the <strong>Block Editor (Gutenberg)</strong>, widgets have been reimagined as blocks. This means we can now manage widgets using the same block-based system we use for posts and pages—bringing consistency and visual clarity to the editing experience.</p>



<h2 class="wp-block-heading">Block-Based Widgets: Why It Matters</h2>



<p>So why the block-based widget editor matters:</p>



<ul class="wp-block-list">
<li><strong>Visual Editing:</strong> We can now see what our widgets will look like as we edit them.</li>



<li><strong>Block Flexibility:</strong> Any block—whether native or third-party—can be used as a widget.</li>



<li><strong>Reusable Blocks:</strong> We can reuse widget content across the site.</li>



<li><strong>Improved Customization:</strong> With group, column, and spacing blocks, layout possibilities have exploded.</li>
</ul>



<h2 class="wp-block-heading">Enabling Block Widgets in Classic Themes (Code Example)</h2>



<p>If our theme doesn&#8217;t support block widgets yet, we can enable it using a simple snippet in our theme’s <code>functions.php</code> file:</p>



<pre class="wp-block-dm-hcb-highlighted-code-block"><code class="hljs language-php">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">enable_block_widgets_support</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-title function_ invoke__">add_theme_support</span>(<span class="hljs-string">&apos;widgets-block-editor&apos;</span>);
}
<span class="hljs-title function_ invoke__">add_action</span>(<span class="hljs-string">&apos;after_setup_theme&apos;</span>, <span class="hljs-string">&apos;enable_block_widgets_support&apos;</span>);
</code></pre>



<h2 class="wp-block-heading">Creating a Custom Widget Block (Advanced)</h2>



<p>Want to build our own custom block to use as a widget? Here’s a basic boilerplate using JavaScript and the <code>@wordpress</code> packages:</p>



<pre class="wp-block-dm-hcb-highlighted-code-block"><code class="hljs language-javascript">
<span class="hljs-comment">// custom-widget-block.js</span>
<span class="hljs-keyword">const</span> { registerBlockType } = wp.<span class="hljs-property">blocks</span>;
<span class="hljs-keyword">const</span> { <span class="hljs-title class_">TextControl</span> } = wp.<span class="hljs-property">components</span>;

<span class="hljs-title function_">registerBlockType</span>(<span class="hljs-string">&apos;mytheme/custom-widget&apos;</span>, {
    <span class="hljs-attr">title</span>: <span class="hljs-string">&apos;Custom Widget&apos;</span>,
    <span class="hljs-attr">icon</span>: <span class="hljs-string">&apos;admin-generic&apos;</span>,
    <span class="hljs-attr">category</span>: <span class="hljs-string">&apos;widgets&apos;</span>,
    <span class="hljs-attr">attributes</span>: {
        <span class="hljs-attr">content</span>: {
            <span class="hljs-attr">type</span>: <span class="hljs-string">&apos;string&apos;</span>,
            <span class="hljs-attr">default</span>: <span class="hljs-string">&apos;&apos;</span>,
        },
    },
    <span class="hljs-attr">edit</span>: <span class="hljs-function">(<span class="hljs-params">props</span>) =&gt;</span> {
        <span class="hljs-keyword">const</span> { <span class="hljs-attr">attributes</span>: { content }, setAttributes } = props;
        <span class="hljs-keyword">return</span> (
            <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">TextControl</span>
                <span class="hljs-attr">label</span>=<span class="hljs-string">&quot;Widget Content&quot;</span>
                <span class="hljs-attr">value</span>=<span class="hljs-string">{content}</span>
                <span class="hljs-attr">onChange</span>=<span class="hljs-string">{(value)</span> =&gt;</span> setAttributes({ content: value })}
            /&gt;</span>
        );
    },
    <span class="hljs-attr">save</span>: <span class="hljs-function">(<span class="hljs-params">props</span>) =&gt;</span> {
        <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{props.attributes.content}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
    },
});
</code></pre>



<p>To register this block, we&#8217;d include it in our plugin or theme with proper setup via <code>block.json</code> and <code>webpack</code>/<code>wp-scripts</code>.</p>



<h2 class="wp-block-heading">Conclusion</h2>



<p>The Block Editor has turned widgets into something far more powerful and intuitive than the old drag-and-drop days. Whether we&#8217;re customizing a sidebar, footer, or creating custom blocks, the new widget system lets us manage our content visually, flexibly, and efficiently.</p>



<p></p>
<p>The post <a href="https://lakshyajeet.in/wordpress-block-editor-widgets/">WordPress Block Editor: Widgets</a> appeared first on <a href="https://lakshyajeet.in/">Lakshyajeet&#039;s Blog</a>.</p>
]]></content:encoded>
					
					<wfw:commentRss>https://lakshyajeet.in/wordpress-block-editor-widgets/feed/</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
			</item>
		<item>
		<title>WordPress Block Editor: Formatting Toolbar API</title>
		<link>https://lakshyajeet.in/wordpress-block-editor-formatting-toolbar-api/</link>
					<comments>https://lakshyajeet.in/wordpress-block-editor-formatting-toolbar-api/#respond</comments>
		
		<dc:creator><![CDATA[lakshyajeet]]></dc:creator>
		<pubDate>Thu, 08 May 2025 14:34:35 +0000</pubDate>
				<category><![CDATA[Uncategorized]]></category>
		<category><![CDATA[blog]]></category>
		<category><![CDATA[blogging]]></category>
		<category><![CDATA[technology]]></category>
		<category><![CDATA[wordpress]]></category>
		<category><![CDATA[writing]]></category>
		<guid isPermaLink="false">https://lakshyajeet999.wordpress.com/?p=879</guid>

					<description><![CDATA[<p>As developers working with WordPress, we’ve seen the shift from the classic editor to the modern Block Editor. One powerful features we get to work with is it the Formatting Toolbar API, which allows us to add custom controls to the inline formatting toolbar of rich text fields in our blocks. What Is the Formatting [&#8230;]</p>
<p>The post <a href="https://lakshyajeet.in/wordpress-block-editor-formatting-toolbar-api/">WordPress Block Editor: Formatting Toolbar API</a> appeared first on <a href="https://lakshyajeet.in/">Lakshyajeet&#039;s Blog</a>.</p>
]]></description>
										<content:encoded><![CDATA[
<p>As developers working with WordPress, we’ve seen the shift from the classic editor to the modern Block Editor. One powerful features we get to work with is it the <strong>Formatting Toolbar API</strong>, which allows us to add custom controls to the inline formatting toolbar of rich text fields in our blocks.</p>



<h2 class="wp-block-heading">What Is the Formatting Toolbar API?</h2>



<p>The <strong>Formatting Toolbar API</strong> lets us add custom inline buttons (like bold, italic, links, etc) to the toolbar that appears when we highlight text inside a rich text block. This API is part of the <code>@wordpress/rich-text</code> and <code>@wordpress/format-library</code> packages.</p>



<p>With this, we can introduce custom formats like highlighting text or adding special tooltips to create a more tailored content editing experience for our users.</p>



<h2 class="wp-block-heading">Example: Adding a “Highlight” Button to the Toolbar</h2>



<h3 class="wp-block-heading">1. Register the Format Type</h3>



<p>We&#8217;ll use <code>registerFormatType</code> from <code>@wordpress/rich-text</code>.</p>



<pre class="wp-block-dm-hcb-highlighted-code-block"><code class="hljs language-javascript">
<span class="hljs-comment">// my-custom-highlight.js</span>
<span class="hljs-keyword">import</span> { registerFormatType, toggleFormat } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;@wordpress/rich-text&apos;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">RichTextToolbarButton</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;@wordpress/block-editor&apos;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Fragment</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;@wordpress/element&apos;</span>;
<span class="hljs-keyword">import</span> { __ } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;@wordpress/i18n&apos;</span>;
<span class="hljs-keyword">import</span> { formatBold } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;@wordpress/icons&apos;</span>;

<span class="hljs-title function_">registerFormatType</span>(<span class="hljs-string">&apos;my-plugin/highlight&apos;</span>, {
    <span class="hljs-attr">title</span>: <span class="hljs-title function_">__</span>(<span class="hljs-string">&apos;Highlight&apos;</span>, <span class="hljs-string">&apos;my-plugin&apos;</span>),
    <span class="hljs-attr">tagName</span>: <span class="hljs-string">&apos;mark&apos;</span>,
    <span class="hljs-attr">className</span>: <span class="hljs-string">&apos;highlighted-text&apos;</span>,
    <span class="hljs-title function_">edit</span>(<span class="hljs-params">{ isActive, value, onChange }</span>) {
        <span class="hljs-keyword">return</span> (
            <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Fragment</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">RichTextToolbarButton</span>
                    <span class="hljs-attr">icon</span>=<span class="hljs-string">{formatBold}</span>
                    <span class="hljs-attr">title</span>=<span class="hljs-string">{__(</span>&apos;<span class="hljs-attr">Highlight</span>&apos;, &apos;<span class="hljs-attr">my-plugin</span>&apos;)}
                    <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> {
                        onChange(toggleFormat(value, {
                            type: &apos;my-plugin/highlight&apos;,
                        }));
                    }}
                    isActive={isActive}
                /&gt;
            <span class="hljs-tag">&lt;/<span class="hljs-name">Fragment</span>&gt;</span></span>
        );
    },
});
</code></pre>



<h3 class="wp-block-heading">2. Enqueue the Script</h3>



<p>In our plugin or theme <code>functions.php</code>, enqueue the script using <code>enqueue_block_editor_assets</code>.</p>



<pre class="wp-block-dm-hcb-highlighted-code-block"><code class="hljs language-javascript">
<span class="hljs-keyword">function</span> <span class="hljs-title function_">my_plugin_enqueue_formatting_toolbar</span>(<span class="hljs-params"></span>) {
    <span class="hljs-title function_">wp_enqueue_script</span>(
        <span class="hljs-string">&apos;my-custom-highlight&apos;</span>,
        <span class="hljs-title function_">plugin_dir_url</span>(__FILE__) . <span class="hljs-string">&apos;my-custom-highlight.js&apos;</span>,
        [ <span class="hljs-string">&apos;wp-rich-text&apos;</span>, <span class="hljs-string">&apos;wp-element&apos;</span>, <span class="hljs-string">&apos;wp-block-editor&apos;</span>, <span class="hljs-string">&apos;wp-i18n&apos;</span> ],
        <span class="hljs-literal">false</span>,
        <span class="hljs-literal">true</span>
    );
}
<span class="hljs-title function_">add_action</span>(<span class="hljs-string">&apos;enqueue_block_editor_assets&apos;</span>, <span class="hljs-string">&apos;my_plugin_enqueue_formatting_toolbar&apos;</span>);
</code></pre>



<h3 class="wp-block-heading">3. Add Some Styling</h3>



<p>Add a custom style so the highlighting is visible.</p>



<pre class="wp-block-dm-hcb-highlighted-code-block"><code class="hljs language-css">
<span class="hljs-selector-class">.mark</span><span class="hljs-selector-class">.highlighted-text</span> {
    <span class="hljs-attribute">background-color</span>: yellow;
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span> <span class="hljs-number">2px</span>;
}
</code></pre>



<h2 class="wp-block-heading">Conclusion</h2>



<p>The <strong>Formatting Toolbar API</strong> gives us a flexible way to extend the WordPress editing experience. Whether we&#8217;re adding highlights, tooltips, or custom shortcodes, this API is a powerful tool in our WordPress development toolkit.</p>
<p>The post <a href="https://lakshyajeet.in/wordpress-block-editor-formatting-toolbar-api/">WordPress Block Editor: Formatting Toolbar API</a> appeared first on <a href="https://lakshyajeet.in/">Lakshyajeet&#039;s Blog</a>.</p>
]]></content:encoded>
					
					<wfw:commentRss>https://lakshyajeet.in/wordpress-block-editor-formatting-toolbar-api/feed/</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
			</item>
		<item>
		<title>WordPress Block Editor: Custom Metaboxes and Notices</title>
		<link>https://lakshyajeet.in/wordpress-block-editor-custom-metaboxes-and-notices/</link>
					<comments>https://lakshyajeet.in/wordpress-block-editor-custom-metaboxes-and-notices/#respond</comments>
		
		<dc:creator><![CDATA[lakshyajeet]]></dc:creator>
		<pubDate>Wed, 07 May 2025 14:42:41 +0000</pubDate>
				<category><![CDATA[Uncategorized]]></category>
		<category><![CDATA[blogging]]></category>
		<category><![CDATA[digital-marketing]]></category>
		<category><![CDATA[javascript]]></category>
		<category><![CDATA[technology]]></category>
		<category><![CDATA[wordpress]]></category>
		<guid isPermaLink="false">https://lakshyajeet999.wordpress.com/?p=871</guid>

					<description><![CDATA[<p>As WordPress developers, one of the most powerful capabilities we have is extending the editor experience for content creators. In this post, we’re diving into how we can use the Block Editor to add metaboxes and notices—without relying on legacy PHP code. Why Metaboxes and Notices Matter Metaboxes allow us to collect custom meta information [&#8230;]</p>
<p>The post <a href="https://lakshyajeet.in/wordpress-block-editor-custom-metaboxes-and-notices/">WordPress Block Editor: Custom Metaboxes and Notices</a> appeared first on <a href="https://lakshyajeet.in/">Lakshyajeet&#039;s Blog</a>.</p>
]]></description>
										<content:encoded><![CDATA[
<p>As WordPress developers, one of the most powerful capabilities we have is extending the editor experience for content creators. In this post, we’re diving into how we can use the Block Editor to add metaboxes and notices—without relying on legacy PHP code.</p>



<h2 class="wp-block-heading">Why Metaboxes and Notices Matter</h2>



<p>Metaboxes allow us to collect custom meta information related to a post—think SEO descriptions, additional fields, or custom toggles. Meanwhile, notices give us the ability to alert users to something important—like a successful save, an error, or a prompt for further action.</p>



<p>By integrating these features directly into the Gutenberg (Block) Editor, we maintain a native, modern, and seamless user experience.</p>



<h2 class="wp-block-heading">Metaboxes</h2>



<pre class="wp-block-dm-hcb-highlighted-code-block"><code class="hljs language-javascript">
<span class="hljs-keyword">import</span> { registerBlockType } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;@wordpress/blocks&apos;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">TextControl</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;@wordpress/components&apos;</span>;
<span class="hljs-keyword">import</span> { useSelect } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;@wordpress/data&apos;</span>;
<span class="hljs-keyword">import</span> { useEntityProp } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;@wordpress/core-data&apos;</span>;
<span class="hljs-keyword">import</span> { useBlockProps } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;@wordpress/block-editor&apos;</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title function_">Edit</span> = (<span class="hljs-params"></span>) =&gt; {
	<span class="hljs-keyword">const</span> blockProps = <span class="hljs-title function_">useBlockProps</span>();
	<span class="hljs-keyword">const</span> postType = <span class="hljs-title function_">useSelect</span>(
		<span class="hljs-function">(<span class="hljs-params">select</span>) =&gt;</span> <span class="hljs-title function_">select</span>(<span class="hljs-string">&apos;core/editor&apos;</span>).<span class="hljs-title function_">getCurrentPostType</span>(),
		[]
	);

	<span class="hljs-keyword">const</span> [meta, setMeta] = <span class="hljs-title function_">useEntityProp</span>(<span class="hljs-string">&apos;postType&apos;</span>, postType, <span class="hljs-string">&apos;meta&apos;</span>);
	<span class="hljs-keyword">const</span> metaFieldValue = meta.<span class="hljs-property">myguten_meta_block_field</span>;

	<span class="hljs-keyword">const</span> <span class="hljs-title function_">updateMetaValue</span> = (<span class="hljs-params">newValue</span>) =&gt; {
		<span class="hljs-title function_">setMeta</span>({ ...meta, <span class="hljs-attr">myguten_meta_block_field</span>: newValue });
	};

	<span class="hljs-keyword">return</span> (
		<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> {<span class="hljs-attr">...blockProps</span>}&gt;</span>
			<span class="hljs-tag">&lt;<span class="hljs-name">TextControl</span>
				<span class="hljs-attr">label</span>=<span class="hljs-string">&quot;Meta Block Field&quot;</span>
				<span class="hljs-attr">value</span>=<span class="hljs-string">{metaFieldValue}</span>
				<span class="hljs-attr">onChange</span>=<span class="hljs-string">{updateMetaValue}</span>
			/&gt;</span>
		<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
	);
};

<span class="hljs-title function_">registerBlockType</span>(<span class="hljs-string">&apos;myguten/meta-block&apos;</span>, {
	<span class="hljs-attr">edit</span>: <span class="hljs-title class_">Edit</span>,
	<span class="hljs-attr">save</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-literal">null</span>, <span class="hljs-comment">// We save this data as post meta, not block content.</span>
});
</code></pre>



<ul class="wp-block-list">
<li>We use <code>useEntityProp</code> to access and modify the post meta.</li>



<li><code>TextControl</code> lets us render a simple input field.</li>



<li>The block doesn&#8217;t save any content itself; instead, we save custom metadata using the <code>setMeta</code> function.</li>
</ul>



<h3 class="wp-block-heading">Registering Metakeys</h3>



<p>Before this works, we need to make sure to <strong>register the meta key</strong> in PHP and set <code>'show_in_rest' =&gt; true</code> so it&#8217;s accessible from the block editor.</p>



<pre class="wp-block-dm-hcb-highlighted-code-block"><code class="hljs language-php">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">myguten_register_post_meta</span>(<span class="hljs-params"></span>) </span>{
	<span class="hljs-title function_ invoke__">register_post_meta</span>( <span class="hljs-string">&apos;post&apos;</span>, <span class="hljs-string">&apos;myguten_meta_block_field&apos;</span>, <span class="hljs-keyword">array</span>(
		<span class="hljs-string">&apos;show_in_rest&apos;</span> =&gt; <span class="hljs-literal">true</span>,
		<span class="hljs-string">&apos;type&apos;</span>         =&gt; <span class="hljs-string">&apos;string&apos;</span>,
		<span class="hljs-string">&apos;single&apos;</span>       =&gt; <span class="hljs-literal">true</span>,
		<span class="hljs-string">&apos;auth_callback&apos;</span> =&gt; function() {
			<span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">current_user_can</span>( <span class="hljs-string">&apos;edit_posts&apos;</span> );
		}
	) );
}
<span class="hljs-title function_ invoke__">add_action</span>( <span class="hljs-string">&apos;init&apos;</span>, <span class="hljs-string">&apos;myguten_register_post_meta&apos;</span> );
</code></pre>



<h2 class="wp-block-heading">Admin Notices</h2>



<p>There are times when we want to alert the user—maybe something failed, or we want to show a confirmation. The Gutenberg editor provides a great way to <strong>hook into the notices system</strong>.</p>



<pre class="wp-block-dm-hcb-highlighted-code-block"><code class="hljs language-javascript">
<span class="hljs-keyword">import</span> { useSelect } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;@wordpress/data&apos;</span>;
<span class="hljs-keyword">import</span> { store <span class="hljs-keyword">as</span> noticesStore } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;@wordpress/notices&apos;</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title function_">ExampleComponent</span> = (<span class="hljs-params"></span>) =&gt; {
	<span class="hljs-keyword">const</span> notices = <span class="hljs-title function_">useSelect</span>(<span class="hljs-function">(<span class="hljs-params">select</span>) =&gt;</span>
		<span class="hljs-title function_">select</span>(noticesStore).<span class="hljs-title function_">getNotices</span>()
	);
	<span class="hljs-keyword">return</span> (
		<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
			{notices.map((notice) =&gt; (
				<span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{notice.id}</span>&gt;</span>{notice.content}<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
			))}
		<span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span>
	);
};
</code></pre>



<p>By using <code>useSelect</code> and <code>noticesStore</code>, we can tap into WordPress’s internal notices system. This keeps our UI consistent with the rest of the editor and gives us a standardized way to deliver feedback to the user.</p>



<pre class="wp-block-dm-hcb-highlighted-code-block"><code class="hljs language-javascript">
<span class="hljs-keyword">import</span> { useDispatch } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;@wordpress/data&apos;</span>;
<span class="hljs-keyword">import</span> { store <span class="hljs-keyword">as</span> noticesStore } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;@wordpress/notices&apos;</span>;

<span class="hljs-keyword">const</span> { createSuccessNotice, createErrorNotice } = <span class="hljs-title function_">useDispatch</span>(noticesStore);

<span class="hljs-title function_">createSuccessNotice</span>(<span class="hljs-string">&apos;Your meta field was updated successfully!&apos;</span>);
</code></pre>



<h2 class="wp-block-heading">Conclusion</h2>



<p>Integrating metaboxes and notices into the Block Editor lets us deliver a far better editorial experience. It’s cleaner, more responsive, and 100% native to Gutenberg. As we continue building modern WordPress solutions, embracing the Block Editor&#8217;s capabilities ensures our tools are future-proof and aligned with WordPress core.</p>
<p>The post <a href="https://lakshyajeet.in/wordpress-block-editor-custom-metaboxes-and-notices/">WordPress Block Editor: Custom Metaboxes and Notices</a> appeared first on <a href="https://lakshyajeet.in/">Lakshyajeet&#039;s Blog</a>.</p>
]]></content:encoded>
					
					<wfw:commentRss>https://lakshyajeet.in/wordpress-block-editor-custom-metaboxes-and-notices/feed/</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
			</item>
		<item>
		<title>WordPress Block Editor: Dynamic and Static Blocks</title>
		<link>https://lakshyajeet.in/wordpress-block-editor-dynamic-and-static-blocks/</link>
					<comments>https://lakshyajeet.in/wordpress-block-editor-dynamic-and-static-blocks/#respond</comments>
		
		<dc:creator><![CDATA[lakshyajeet]]></dc:creator>
		<pubDate>Tue, 06 May 2025 14:23:58 +0000</pubDate>
				<category><![CDATA[Uncategorized]]></category>
		<category><![CDATA[digital-marketing]]></category>
		<category><![CDATA[javascript]]></category>
		<category><![CDATA[technology]]></category>
		<category><![CDATA[web-development]]></category>
		<category><![CDATA[wordpress]]></category>
		<guid isPermaLink="false">https://lakshyajeet999.wordpress.com/?p=864</guid>

					<description><![CDATA[<p>When we build websites with WordPress, we encounter the Block Editor. It&#8217;s a powerful visual editor that has changed how we create content and design layouts. But when we start developing custom blocks for this editor, we come across two important concepts: static blocks and dynamic blocks. Understanding the difference between these two types is [&#8230;]</p>
<p>The post <a href="https://lakshyajeet.in/wordpress-block-editor-dynamic-and-static-blocks/">WordPress Block Editor: Dynamic and Static Blocks</a> appeared first on <a href="https://lakshyajeet.in/">Lakshyajeet&#039;s Blog</a>.</p>
]]></description>
										<content:encoded><![CDATA[
<p>When we build websites with WordPress, we encounter the Block Editor. It&#8217;s a powerful visual editor that has changed how we create content and design layouts. But when we start developing custom blocks for this editor, we come across two important concepts: <strong>static blocks</strong> and <strong>dynamic blocks</strong>.</p>



<p>Understanding the difference between these two types is essential for us as WordPress developers to make informed decisions about performance, customization, and content rendering. In this post, we&#8217;ll explore what static and dynamic blocks are, when to use each, and how to create them.</p>



<h2 class="wp-block-heading">What Are Static and Dynamic Blocks?</h2>



<h3 class="wp-block-heading">Static Blocks</h3>



<p>A <strong>static block</strong> is rendered entirely in JavaScript using React. When we add content to a static block, that content is saved directly into the post content as HTML. This means the content is stored &#8220;as is&#8221; in the database.</p>



<p><strong>Use static blocks when:</strong></p>



<ul class="wp-block-list">
<li>The content doesn&#8217;t need to change dynamically.</li>



<li>The block only requires what the user sees in the editor.</li>



<li>We want to optimize performance by avoiding PHP processing during page loads.</li>
</ul>



<p><strong>Example Use Cases:</strong> Headings, paragraphs, buttons, image galleries.</p>



<h3 class="wp-block-heading">Dynamic Blocks</h3>



<p>A <strong>dynamic block</strong> is rendered on the front end using PHP. The block’s output is generated every time the page loads, making it ideal for content that changes frequently or depends on server-side logic.</p>



<p><strong>Use dynamic blocks when:</strong></p>



<ul class="wp-block-list">
<li>The output needs to update frequently (e.g., latest posts, logged-in user data).</li>



<li>We want to keep the post content clean and rely on server-side templates.</li>



<li>We need advanced customization using PHP logic.</li>
</ul>



<p><strong>Example Use Cases:</strong> Latest posts, post metadata, contact forms, custom listings.</p>



<h2 class="wp-block-heading">Creating a Static Block</h2>



<h3 class="wp-block-heading">File Structure:</h3>



<pre class="wp-block-preformatted"><code>my-plugin/<br>├── alert-box/<br>│   ├── block.json<br>│   ├── edit.js<br>│   └── index.js</code></pre>



<h3 class="wp-block-heading">block.json</h3>



<pre class="wp-block-dm-hcb-highlighted-code-block"><code class="hljs language-javascript">
{
  <span class="hljs-string">&quot;apiVersion&quot;</span>: <span class="hljs-number">3</span>,
  <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;myplugin/alert-box&quot;</span>,
  <span class="hljs-string">&quot;title&quot;</span>: <span class="hljs-string">&quot;Alert Box&quot;</span>,
  <span class="hljs-string">&quot;category&quot;</span>: <span class="hljs-string">&quot;widgets&quot;</span>,
  <span class="hljs-string">&quot;icon&quot;</span>: <span class="hljs-string">&quot;warning&quot;</span>,
  <span class="hljs-string">&quot;editorScript&quot;</span>: <span class="hljs-string">&quot;file:./index.js&quot;</span>
}
</code></pre>



<h3 class="wp-block-heading">index.js</h3>



<pre class="wp-block-dm-hcb-highlighted-code-block"><code class="hljs language-javascript">
<span class="hljs-keyword">import</span> { registerBlockType } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;@wordpress/blocks&apos;</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Edit</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;./edit&apos;</span>;

<span class="hljs-title function_">registerBlockType</span>(<span class="hljs-string">&apos;myplugin/alert-box&apos;</span>, {
    <span class="hljs-attr">attributes</span>: {
        <span class="hljs-attr">content</span>: {
            <span class="hljs-attr">type</span>: <span class="hljs-string">&apos;string&apos;</span>,
            <span class="hljs-attr">source</span>: <span class="hljs-string">&apos;html&apos;</span>,
            <span class="hljs-attr">selector</span>: <span class="hljs-string">&apos;p&apos;</span>
        }
    },
    <span class="hljs-attr">edit</span>: <span class="hljs-title class_">Edit</span>,
    <span class="hljs-title function_">save</span>(<span class="hljs-params">{ attributes }</span>) {
        <span class="hljs-keyword">return</span> (
            <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;alert-box&quot;</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{attributes.content}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
        );
    }
});
</code></pre>



<h3 class="wp-block-heading">edit.js</h3>



<pre class="wp-block-dm-hcb-highlighted-code-block"><code class="hljs language-javascript">
<span class="hljs-keyword">import</span> { __ } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;@wordpress/i18n&apos;</span>;
<span class="hljs-keyword">import</span> { useBlockProps, <span class="hljs-title class_">RichText</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;@wordpress/block-editor&apos;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Edit</span>(<span class="hljs-params">{ attributes, setAttributes }</span>) {
    <span class="hljs-keyword">const</span> blockProps = <span class="hljs-title function_">useBlockProps</span>();

    <span class="hljs-keyword">return</span> (
        <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> {<span class="hljs-attr">...blockProps</span>} <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;alert-box&quot;</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">RichText</span>
                <span class="hljs-attr">tagName</span>=<span class="hljs-string">&quot;p&quot;</span>
                <span class="hljs-attr">value</span>=<span class="hljs-string">{attributes.content}</span>
                <span class="hljs-attr">onChange</span>=<span class="hljs-string">{(content)</span> =&gt;</span> setAttributes({ content })}
                placeholder={__(&apos;Add your alert text here...&apos;, &apos;myplugin&apos;)}
            /&gt;
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
    );
}
</code></pre>



<p>This block is fully static. The <code>save</code> function defines exactly what gets stored and rendered.</p>



<h2 class="wp-block-heading">Creating a Dynamic Block</h2>



<p>Dynamic blocks require a PHP render callback. Here&#8217;s how we can make a dynamic block that shows the <strong>latest post title</strong>.</p>



<h3 class="wp-block-heading">File Structure:</h3>



<pre class="wp-block-preformatted">my-plugin/<br>├── latest-post/<br>│ ├── block.json<br>│ ├── index.js<br>│ └── render.php</pre>



<h3 class="wp-block-heading">block.json</h3>



<pre class="wp-block-dm-hcb-highlighted-code-block"><code class="hljs language-javascript">
{
  <span class="hljs-string">&quot;apiVersion&quot;</span>: <span class="hljs-number">3</span>,
  <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;myplugin/latest-post&quot;</span>,
  <span class="hljs-string">&quot;title&quot;</span>: <span class="hljs-string">&quot;Latest Post&quot;</span>,
  <span class="hljs-string">&quot;category&quot;</span>: <span class="hljs-string">&quot;widgets&quot;</span>,
  <span class="hljs-string">&quot;icon&quot;</span>: <span class="hljs-string">&quot;megaphone&quot;</span>,
  <span class="hljs-string">&quot;editorScript&quot;</span>: <span class="hljs-string">&quot;file:./index.js&quot;</span>,
  <span class="hljs-string">&quot;render&quot;</span>: <span class="hljs-string">&quot;file:./render.php&quot;</span>
}
</code></pre>



<h3 class="wp-block-heading">index.js</h3>



<pre class="wp-block-dm-hcb-highlighted-code-block"><code class="hljs language-javascript">
<span class="hljs-keyword">import</span> { registerBlockType } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;@wordpress/blocks&apos;</span>;

<span class="hljs-title function_">registerBlockType</span>(<span class="hljs-string">&apos;myplugin/latest-post&apos;</span>, {
    <span class="hljs-title function_">edit</span>(<span class="hljs-params"></span>) {
        <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Latest post will be shown here on the frontend.<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span>;
    },
    <span class="hljs-title function_">save</span>(<span class="hljs-params"></span>) {
        <span class="hljs-comment">// Returning null to indicate dynamic rendering</span>
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }
});
</code></pre>



<h3 class="wp-block-heading">render.php</h3>



<pre class="wp-block-dm-hcb-highlighted-code-block"><code class="hljs language-javascript">
&lt;?php
<span class="hljs-keyword">function</span> <span class="hljs-title function_">myplugin_render_latest_post</span>(<span class="hljs-params"></span>) {
    $recent_posts = <span class="hljs-title function_">wp_get_recent_posts</span>([
        <span class="hljs-string">&apos;numberposts&apos;</span> =&gt; <span class="hljs-number">1</span>,
        <span class="hljs-string">&apos;post_status&apos;</span> =&gt; <span class="hljs-string">&apos;publish&apos;</span>,
    ]);

    <span class="hljs-keyword">if</span> (<span class="hljs-title function_">empty</span>($recent_posts)) {
        <span class="hljs-keyword">return</span> <span class="hljs-string">&apos;&lt;p&gt;No posts found.&lt;/p&gt;&apos;</span>;
    }

    $post = $recent_posts[<span class="hljs-number">0</span>];
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">sprintf</span>(<span class="hljs-string">&apos;&lt;h3&gt;&lt;a href=&quot;%s&quot;&gt;%s&lt;/a&gt;&lt;/h3&gt;&apos;</span>, <span class="hljs-title function_">esc_url</span>(<span class="hljs-title function_">get_permalink</span>($post[<span class="hljs-string">&apos;ID&apos;</span>])), <span class="hljs-title function_">esc_html</span>($post[<span class="hljs-string">&apos;post_title&apos;</span>]));
}
</code></pre>



<h2 class="wp-block-heading">Choosing Between Static and Dynamic</h2>



<p>When deciding whether to use a static or dynamic block, we should ask:</p>



<ul class="wp-block-list">
<li><strong>Does this block require real-time data or updates from the server?</strong> → Go dynamic.</li>



<li><strong>Is the block mostly decorative or fixed content?</strong> → Use static.</li>



<li><strong>Do we need to keep our post content clean from HTML bloat?</strong> → Dynamic blocks can help.</li>
</ul>



<h2 class="wp-block-heading">Final Thoughts</h2>



<p>The WordPress Block Editor gives us powerful tools to create modern, reusable content structures. By understanding static and dynamic blocks, we can build flexible and performant custom blocks that suit a variety of use cases. Whether we’re building a rich content page or a dynamic listing, there’s a block type that fits the bill.</p>
<p>The post <a href="https://lakshyajeet.in/wordpress-block-editor-dynamic-and-static-blocks/">WordPress Block Editor: Dynamic and Static Blocks</a> appeared first on <a href="https://lakshyajeet.in/">Lakshyajeet&#039;s Blog</a>.</p>
]]></content:encoded>
					
					<wfw:commentRss>https://lakshyajeet.in/wordpress-block-editor-dynamic-and-static-blocks/feed/</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
			</item>
		<item>
		<title>WordPress Block Editor: Nested Blocks</title>
		<link>https://lakshyajeet.in/wordpress-block-editor-nested-blocks/</link>
					<comments>https://lakshyajeet.in/wordpress-block-editor-nested-blocks/#respond</comments>
		
		<dc:creator><![CDATA[lakshyajeet]]></dc:creator>
		<pubDate>Mon, 05 May 2025 14:33:43 +0000</pubDate>
				<category><![CDATA[Uncategorized]]></category>
		<category><![CDATA[ai]]></category>
		<category><![CDATA[gutenberg]]></category>
		<category><![CDATA[javascript]]></category>
		<category><![CDATA[technology]]></category>
		<category><![CDATA[wordpress]]></category>
		<guid isPermaLink="false">https://lakshyajeet999.wordpress.com/?p=856</guid>

					<description><![CDATA[<p>As WordPress developers, we&#8217;ve all felt the power and flexibility that the Block Editor (Gutenberg) brings to the table. One of the more advanced (and incredibly useful) features is Nested Blocks. They give us the ability to structure content hierarchically, organize components modularly, and ultimately deliver richer editing experiences to our clients and users. What [&#8230;]</p>
<p>The post <a href="https://lakshyajeet.in/wordpress-block-editor-nested-blocks/">WordPress Block Editor: Nested Blocks</a> appeared first on <a href="https://lakshyajeet.in/">Lakshyajeet&#039;s Blog</a>.</p>
]]></description>
										<content:encoded><![CDATA[
<p>As WordPress developers, we&#8217;ve all felt the power and flexibility that the Block Editor (Gutenberg) brings to the table. One of the more advanced (and incredibly useful) features is <strong>Nested Blocks</strong>. They give us the ability to structure content hierarchically, organize components modularly, and ultimately deliver richer editing experiences to our clients and users.</p>



<h3 class="wp-block-heading">What Are Nested Blocks?</h3>



<p>Nested blocks allow us to insert blocks <em>inside</em> other blocks. Think of them as sub-components. For instance, a custom “Team” block might contain multiple “Team Member” blocks. Or a “Testimonial Slider” block could hold several “Testimonial” blocks.</p>



<p>In technical terms, we achieve this nesting by using WordPress&#8217;s <code>InnerBlocks</code> component inside a custom block.</p>



<h3 class="wp-block-heading">Why Use Nested Blocks?</h3>



<p>We use nested blocks when:</p>



<ul class="wp-block-list">
<li>We want reusable layout structures (e.g. columns, cards)</li>



<li>We need to give users more flexibility while keeping them within a defined layout</li>



<li>We want to group multiple blocks for styling or behavior</li>



<li>We&#8217;re building container-like blocks (e.g. accordions, tabs, sliders)</li>
</ul>



<p>Nested blocks help balance flexibility with structure.</p>



<h2 class="wp-block-heading">Creating a Block with Nested Blocks</h2>



<h3 class="wp-block-heading">1. Register the Block</h3>



<p>We can register our block in <code>block.json</code>.</p>



<pre class="wp-block-dm-hcb-highlighted-code-block"><code class="hljs language-javascript">
{
  <span class="hljs-string">&quot;apiVersion&quot;</span>: <span class="hljs-number">3</span>,
  <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;my-plugin/section&quot;</span>,
  <span class="hljs-string">&quot;title&quot;</span>: <span class="hljs-string">&quot;Section&quot;</span>,
  <span class="hljs-string">&quot;category&quot;</span>: <span class="hljs-string">&quot;layout&quot;</span>,
  <span class="hljs-string">&quot;icon&quot;</span>: <span class="hljs-string">&quot;editor-insertmore&quot;</span>,
  <span class="hljs-string">&quot;description&quot;</span>: <span class="hljs-string">&quot;A custom section block that allows nested blocks inside.&quot;</span>,
  <span class="hljs-string">&quot;supports&quot;</span>: {
    <span class="hljs-string">&quot;html&quot;</span>: <span class="hljs-literal">false</span>
  },
  <span class="hljs-string">&quot;editorScript&quot;</span>: <span class="hljs-string">&quot;file:./index.js&quot;</span>
}
</code></pre>



<h3 class="wp-block-heading">2. Block Edit Function with <code>InnerBlocks</code></h3>



<p>In our <code>index.js</code> file, we’ll use the <code>InnerBlocks</code> component to allow nesting</p>



<pre class="wp-block-dm-hcb-highlighted-code-block"><code class="hljs language-javascript">
<span class="hljs-keyword">import</span> { registerBlockType } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;@wordpress/blocks&apos;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">InnerBlocks</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;@wordpress/block-editor&apos;</span>;

<span class="hljs-title function_">registerBlockType</span>(<span class="hljs-string">&apos;myplugin/section&apos;</span>, {
    <span class="hljs-attr">edit</span>: <span class="hljs-function">() =&gt;</span> {
        <span class="hljs-keyword">return</span> (
            <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;my-section-block&quot;</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">InnerBlocks</span> /&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
        );
    },
    <span class="hljs-attr">save</span>: <span class="hljs-function">() =&gt;</span> {
        <span class="hljs-keyword">return</span> (
            <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;my-section-block&quot;</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">InnerBlocks.Content</span> /&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
        );
    },
});
</code></pre>



<h3 class="wp-block-heading">Restricting Allowed Blocks (Optional)</h3>



<p>Sometimes we want to restrict which blocks can be inserted inside our container. Here&#8217;s how we do that using the <code>allowedBlocks</code> prop.</p>



<pre class="wp-block-dm-hcb-highlighted-code-block"><code class="hljs language-javascript">
&lt;<span class="hljs-title class_">InnerBlocks</span>
    allowedBlocks={[<span class="hljs-string">&apos;core/paragraph&apos;</span>, <span class="hljs-string">&apos;core/image&apos;</span>, <span class="hljs-string">&apos;core/heading&apos;</span>]}
/&gt;
</code></pre>



<p>We can also add placeholders in the templates for better UX.</p>



<pre class="wp-block-dm-hcb-highlighted-code-block"><code class="hljs language-javascript">
&lt;<span class="hljs-title class_">InnerBlocks</span>
    template={[
        [<span class="hljs-string">&apos;core/heading&apos;</span>, { <span class="hljs-attr">placeholder</span>: <span class="hljs-string">&apos;Section Heading&apos;</span> }],
        [<span class="hljs-string">&apos;core/paragraph&apos;</span>, { <span class="hljs-attr">placeholder</span>: <span class="hljs-string">&apos;Add your text here...&apos;</span> }]
    ]}
/&gt;
</code></pre>



<h3 class="wp-block-heading">Gotchas and Best Practices</h3>



<ul class="wp-block-list">
<li><strong>Avoid infinite nesting</strong> &#8211; prevent blocks from nesting themselves inside themselves.</li>



<li><strong>Use <code>templateLock</code></strong> if we want to lock the layout (<code>'all'</code>, <code>'insert'</code>, <code>'false'</code>).</li>



<li><strong>Use proper CSS scoping</strong> to avoid styling conflicts across blocks.</li>
</ul>



<h3 class="wp-block-heading">Conclusion</h3>



<p>Nested blocks are one of the most powerful tools in our WordPress development toolkit. They allow us to create structured, flexible, and user-friendly experiences for content editors. Whether we’re building reusable components or complex layout systems, mastering <code>InnerBlocks</code> will elevate our block development game.</p>



<p></p>
<p>The post <a href="https://lakshyajeet.in/wordpress-block-editor-nested-blocks/">WordPress Block Editor: Nested Blocks</a> appeared first on <a href="https://lakshyajeet.in/">Lakshyajeet&#039;s Blog</a>.</p>
]]></content:encoded>
					
					<wfw:commentRss>https://lakshyajeet.in/wordpress-block-editor-nested-blocks/feed/</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
			</item>
		<item>
		<title>WordPress Block Editor: Block Attributes and Controls</title>
		<link>https://lakshyajeet.in/wordpress-block-editor-block-attributes-and-controls/</link>
					<comments>https://lakshyajeet.in/wordpress-block-editor-block-attributes-and-controls/#respond</comments>
		
		<dc:creator><![CDATA[lakshyajeet]]></dc:creator>
		<pubDate>Fri, 02 May 2025 16:25:16 +0000</pubDate>
				<category><![CDATA[Uncategorized]]></category>
		<category><![CDATA[digital-marketing]]></category>
		<category><![CDATA[javascript]]></category>
		<category><![CDATA[technology]]></category>
		<category><![CDATA[web-development]]></category>
		<category><![CDATA[wordpress]]></category>
		<guid isPermaLink="false">https://lakshyajeet999.wordpress.com/?p=850</guid>

					<description><![CDATA[<p>As WordPress developers, these two concepts are core to how we build rich, interactive, and dynamic content editing experiences in the Block Editor. In this blog post, we&#8217;ll explore what block attributes and controls are, how they work, and how we can use them effectively in our custom blocks. What Are Block Attributes? In simple [&#8230;]</p>
<p>The post <a href="https://lakshyajeet.in/wordpress-block-editor-block-attributes-and-controls/">WordPress Block Editor: Block Attributes and Controls</a> appeared first on <a href="https://lakshyajeet.in/">Lakshyajeet&#039;s Blog</a>.</p>
]]></description>
										<content:encoded><![CDATA[
<p>As WordPress developers, these two concepts are core to how we build rich, interactive, and dynamic content editing experiences in the Block Editor.</p>



<p>In this blog post, we&#8217;ll explore what block attributes and controls are, how they work, and how we can use them effectively in our custom blocks. </p>



<h2 class="wp-block-heading">What Are Block Attributes?</h2>



<p>In simple terms, <strong>block attributes</strong> are the data fields that define the content or behavior of a block. Think of them as the settings or properties that make our block unique and functional.</p>



<p>For example, a “Heading” block might have the following attributes:</p>



<ul class="wp-block-list">
<li><code>content</code>: The text of the heading.</li>



<li><code>level</code>: The heading level (e.g., h2, h3).</li>



<li><code>align</code>: Text alignment.</li>
</ul>



<h3 class="wp-block-heading">Defining Attributes in a Block</h3>



<p>When we register a block using <code>registerBlockType</code>, we define the attributes in the configuration:</p>



<pre class="wp-block-dm-hcb-highlighted-code-block"><code class="hljs language-javascript">
<span class="hljs-title function_">registerBlockType</span>(<span class="hljs-string">&apos;myplugin/alert-box&apos;</span>, {
  <span class="hljs-attr">title</span>: <span class="hljs-string">&apos;Alert Box&apos;</span>,
  <span class="hljs-attr">icon</span>: <span class="hljs-string">&apos;warning&apos;</span>,
  <span class="hljs-attr">category</span>: <span class="hljs-string">&apos;widgets&apos;</span>,

  <span class="hljs-attr">attributes</span>: {
    <span class="hljs-attr">message</span>: {
      <span class="hljs-attr">type</span>: <span class="hljs-string">&apos;string&apos;</span>,
      <span class="hljs-attr">default</span>: <span class="hljs-string">&apos;This is an alert box!&apos;</span>,
    },
    <span class="hljs-attr">backgroundColor</span>: {
      <span class="hljs-attr">type</span>: <span class="hljs-string">&apos;string&apos;</span>,
      <span class="hljs-attr">default</span>: <span class="hljs-string">&apos;#ffcc00&apos;</span>,
    },
  },

  <span class="hljs-title function_">edit</span>(<span class="hljs-params">{ attributes, setAttributes }</span>) {
    <span class="hljs-keyword">const</span> { message, backgroundColor } = attributes;

    <span class="hljs-keyword">return</span> (
      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">backgroundColor</span> }}&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">RichText</span>
          <span class="hljs-attr">tagName</span>=<span class="hljs-string">&quot;p&quot;</span>
          <span class="hljs-attr">value</span>=<span class="hljs-string">{message}</span>
          <span class="hljs-attr">onChange</span>=<span class="hljs-string">{(value)</span> =&gt;</span> setAttributes({ message: value })}
        /&gt;
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
    );
  },

  <span class="hljs-title function_">save</span>(<span class="hljs-params">{ attributes }</span>) {
    <span class="hljs-keyword">return</span> (
      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">backgroundColor:</span> <span class="hljs-attr">attributes.backgroundColor</span> }}&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">RichText.Content</span> <span class="hljs-attr">tagName</span>=<span class="hljs-string">&quot;p&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{attributes.message}</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
    );
  },
});
</code></pre>



<h2 class="wp-block-heading">What Are Controls in the Block Editor?</h2>



<p><strong>Controls</strong> are the UI elements we use to let users change a block’s attributes. These can include:</p>



<ul class="wp-block-list">
<li>Text inputs</li>



<li>Color pickers</li>



<li>Toggle switches</li>



<li>Dropdowns</li>
</ul>



<figure class="wp-block-image size-large"><img decoding="async" src="http://192.168.1.19:8080/wp-content/uploads/2025/05/image.png?w=271" alt="" class="wp-image-854"/></figure>



<h3 class="wp-block-heading">Adding Inspector Controls</h3>



<p>To let users modify attributes, we add UI controls using components from <code>@wordpress/components</code> inside the block&#8217;s <code>edit</code> function.</p>



<pre class="wp-block-dm-hcb-highlighted-code-block"><code class="hljs language-javascript">
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">PanelBody</span>, <span class="hljs-title class_">ColorPalette</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;@wordpress/components&apos;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">InspectorControls</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;@wordpress/block-editor&apos;</span>;

<span class="hljs-title function_">edit</span>(<span class="hljs-params">{ attributes, setAttributes }</span>) {
  <span class="hljs-keyword">const</span> { backgroundColor } = attributes;

  <span class="hljs-keyword">const</span> colors = [
    { <span class="hljs-attr">name</span>: <span class="hljs-string">&apos;Yellow&apos;</span>, <span class="hljs-attr">color</span>: <span class="hljs-string">&apos;#ffcc00&apos;</span> },
    { <span class="hljs-attr">name</span>: <span class="hljs-string">&apos;Red&apos;</span>, <span class="hljs-attr">color</span>: <span class="hljs-string">&apos;#ff4444&apos;</span> },
    { <span class="hljs-attr">name</span>: <span class="hljs-string">&apos;Green&apos;</span>, <span class="hljs-attr">color</span>: <span class="hljs-string">&apos;#44ff44&apos;</span> },
  ];

  <span class="hljs-keyword">return</span> (
    <span class="language-xml"><span class="hljs-tag">&lt;&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">InspectorControls</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">PanelBody</span> <span class="hljs-attr">title</span>=<span class="hljs-string">&quot;Background Color&quot;</span> <span class="hljs-attr">initialOpen</span>=<span class="hljs-string">{true}</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">ColorPalette</span>
            <span class="hljs-attr">colors</span>=<span class="hljs-string">{colors}</span>
            <span class="hljs-attr">value</span>=<span class="hljs-string">{backgroundColor}</span>
            <span class="hljs-attr">onChange</span>=<span class="hljs-string">{(color)</span> =&gt;</span> setAttributes({ backgroundColor: color })}
          /&gt;
        <span class="hljs-tag">&lt;/<span class="hljs-name">PanelBody</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">InspectorControls</span>&gt;</span>

      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">backgroundColor</span> }}&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">RichText</span>
          <span class="hljs-attr">tagName</span>=<span class="hljs-string">&quot;p&quot;</span>
          <span class="hljs-attr">value</span>=<span class="hljs-string">{attributes.message}</span>
          <span class="hljs-attr">onChange</span>=<span class="hljs-string">{(value)</span> =&gt;</span> setAttributes({ message: value })}
        /&gt;
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/&gt;</span></span>
  );
}
</code></pre>



<h2 class="wp-block-heading">How Attributes and Controls Work Together</h2>



<p>The relationship is simple but powerful:</p>



<ul class="wp-block-list">
<li><strong>Attributes</strong> hold the data.</li>



<li><strong>Controls</strong> let users change that data.</li>



<li><strong>The block</strong> reflects those changes live in the editor and in the saved content.</li>
</ul>



<p>This structure allows us to build dynamic blocks that are reusable and fully customizable from the editor.</p>



<h2 class="wp-block-heading">Summary</h2>



<p>In Gutenberg block development, <strong>attributes</strong> are the data model, and <strong>controls</strong> are the interface. When we define them thoughtfully and use them properly, we can create flexible and intuitive content editing experiences that our users love.</p>



<p>By understanding how these parts work together, we&#8217;re able to build blocks that are both user-friendly and developer-friendly.</p>
<p>The post <a href="https://lakshyajeet.in/wordpress-block-editor-block-attributes-and-controls/">WordPress Block Editor: Block Attributes and Controls</a> appeared first on <a href="https://lakshyajeet.in/">Lakshyajeet&#039;s Blog</a>.</p>
]]></content:encoded>
					
					<wfw:commentRss>https://lakshyajeet.in/wordpress-block-editor-block-attributes-and-controls/feed/</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
			</item>
		<item>
		<title>WordPress Block Editor: Block Supports Explained</title>
		<link>https://lakshyajeet.in/wordpress-block-editor-block-supports-explained/</link>
					<comments>https://lakshyajeet.in/wordpress-block-editor-block-supports-explained/#respond</comments>
		
		<dc:creator><![CDATA[lakshyajeet]]></dc:creator>
		<pubDate>Wed, 30 Apr 2025 14:31:37 +0000</pubDate>
				<category><![CDATA[Uncategorized]]></category>
		<category><![CDATA[blogging]]></category>
		<category><![CDATA[blogging-tips]]></category>
		<category><![CDATA[non-classe]]></category>
		<category><![CDATA[technology]]></category>
		<category><![CDATA[wordpress]]></category>
		<guid isPermaLink="false">https://lakshyajeet999.wordpress.com/?p=845</guid>

					<description><![CDATA[<p>As WordPress developers and site creators, we love the flexibility the Block Editor (Gutenberg) offers us. Whether we’re building custom blocks or fine-tuning user experiences, understanding how Block Supports work is essential. In this blog, we&#8217;ll explore what Block Supports are, how to use them, and how can someone implement it in our own custom [&#8230;]</p>
<p>The post <a href="https://lakshyajeet.in/wordpress-block-editor-block-supports-explained/">WordPress Block Editor: Block Supports Explained</a> appeared first on <a href="https://lakshyajeet.in/">Lakshyajeet&#039;s Blog</a>.</p>
]]></description>
										<content:encoded><![CDATA[
<p>As WordPress developers and site creators, we love the flexibility the Block Editor (Gutenberg) offers us. Whether we’re building custom blocks or fine-tuning user experiences, understanding how <strong>Block Supports</strong> work is essential.</p>



<p>In this blog, we&#8217;ll explore what <strong>Block Supports</strong> are, how to use them, and how can someone implement it in our own custom blocks.</p>



<h3 class="wp-block-heading">What Are Block Supports?</h3>



<p>Block Supports are built-in features provided by the WordPress Block Editor that we can <strong>opt into</strong> when developing our custom blocks. These supports allow us to <strong>enable additional UI controls</strong> — like typography, color, spacing, borders, and more — directly in the editor sidebar for our blocks.</p>



<p>This means we don’t have to manually code UI panels or handle CSS ourselves for many of these features — WordPress does that for us when we enable supports.</p>



<h3 class="wp-block-heading">Why Use Block Supports?</h3>



<ul class="wp-block-list">
<li>We save development time.</li>



<li>We make our blocks consistent with core WordPress blocks.</li>



<li>We give users a better editing experience with built-in controls.</li>
</ul>



<h3 class="wp-block-heading">How to Use Block Supports in a Custom Block</h3>



<p>Let’s walk through how to add block supports to a custom block. This involves registering our block using <code>registerBlockType</code> and adding the <code>supports</code> key.</p>



<pre class="wp-block-dm-hcb-highlighted-code-block"><code class="hljs language-javascript">
<span class="hljs-comment">// my-custom-block.js</span>
<span class="hljs-keyword">import</span> { registerBlockType } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;@wordpress/blocks&apos;</span>;
<span class="hljs-keyword">import</span> { __ } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;@wordpress/i18n&apos;</span>;
<span class="hljs-keyword">import</span> { useBlockProps } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;@wordpress/block-editor&apos;</span>;

<span class="hljs-title function_">registerBlockType</span>(<span class="hljs-string">&apos;myplugin/my-custom-block&apos;</span>, {
    <span class="hljs-attr">title</span>: <span class="hljs-title function_">__</span>(<span class="hljs-string">&apos;My Custom Block&apos;</span>, <span class="hljs-string">&apos;myplugin&apos;</span>),
    <span class="hljs-attr">icon</span>: <span class="hljs-string">&apos;smiley&apos;</span>,
    <span class="hljs-attr">category</span>: <span class="hljs-string">&apos;design&apos;</span>,
    <span class="hljs-attr">supports</span>: {
        <span class="hljs-attr">color</span>: {
            <span class="hljs-attr">text</span>: <span class="hljs-literal">true</span>,
            <span class="hljs-attr">background</span>: <span class="hljs-literal">true</span>,
        },
        <span class="hljs-attr">spacing</span>: {
            <span class="hljs-attr">margin</span>: <span class="hljs-literal">true</span>,
            <span class="hljs-attr">padding</span>: <span class="hljs-literal">true</span>,
        },
        <span class="hljs-attr">typography</span>: {
            <span class="hljs-attr">fontSize</span>: <span class="hljs-literal">true</span>,
            <span class="hljs-attr">lineHeight</span>: <span class="hljs-literal">true</span>,
        },
        <span class="hljs-attr">border</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">align</span>: [<span class="hljs-string">&apos;wide&apos;</span>, <span class="hljs-string">&apos;full&apos;</span>],
    },
    <span class="hljs-title function_">edit</span>(<span class="hljs-params">{ attributes }</span>) {
        <span class="hljs-keyword">const</span> blockProps = <span class="hljs-title function_">useBlockProps</span>();

        <span class="hljs-keyword">return</span> (
            <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> {<span class="hljs-attr">...blockProps</span>}&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>This is our custom block with block supports.<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
        );
    },
    <span class="hljs-title function_">save</span>(<span class="hljs-params">{ attributes }</span>) {
        <span class="hljs-keyword">const</span> blockProps = useBlockProps.<span class="hljs-title function_">save</span>();
        <span class="hljs-keyword">return</span> (
            <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> {<span class="hljs-attr">...blockProps</span>}&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>This is our custom block with block supports.<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
        );
    }
});
</code></pre>



<h3 class="wp-block-heading">Common Block Supports We Can Use</h3>



<p>Here’s a quick overview of common supports:</p>



<figure class="wp-block-table"><table class="has-fixed-layout"><thead><tr><th>Support</th><th>Description</th></tr></thead><tbody><tr><td><code>color</code></td><td>Enables text/background color controls</td></tr><tr><td><code>typography</code></td><td>Adds font size and line-height controls</td></tr><tr><td><code>spacing</code></td><td>Adds padding and margin settings</td></tr><tr><td><code>border</code></td><td>Allows setting border radius, width, etc</td></tr><tr><td><code>align</code></td><td>Enables block alignment (wide/full)</td></tr><tr><td><code>html</code></td><td>Allows editing the block’s HTML</td></tr></tbody></table></figure>



<p><strong>CSS Variables</strong>: When using block supports, the editor outputs inline styles or CSS variables. Always check the frontend for consistent rendering.</p>



<p><strong>Opt-Out</strong>: If we want to disable certain supports for a core block (e.g., removing color options from the Paragraph block), we can use block filters like <code>blocks.registerBlockType</code>.</p>



<pre class="wp-block-dm-hcb-highlighted-code-block"><code class="hljs language-javascript">
<span class="hljs-comment">// Disable color support for Paragraph block</span>
wp.<span class="hljs-property">hooks</span>.<span class="hljs-title function_">addFilter</span>(
    <span class="hljs-string">&apos;blocks.registerBlockType&apos;</span>,
    <span class="hljs-string">&apos;myplugin/remove-paragraph-supports&apos;</span>,
    <span class="hljs-function">(<span class="hljs-params">settings, name</span>) =&gt;</span> {
        <span class="hljs-keyword">if</span> (name === <span class="hljs-string">&apos;core/paragraph&apos;</span>) {
            settings.<span class="hljs-property">supports</span> = {
                ...settings.<span class="hljs-property">supports</span>,
                <span class="hljs-attr">color</span>: <span class="hljs-literal">false</span>,
            };
        }
        <span class="hljs-keyword">return</span> settings;
    }
);
</code></pre>



<h2 class="wp-block-heading">Conclusion</h2>



<p>Block supports are a powerful and underused part of the WordPress block development toolkit. By enabling them, we create more flexible, future-proof, and user-friendly blocks — without reinventing the wheel.</p>



<p></p>
<p>The post <a href="https://lakshyajeet.in/wordpress-block-editor-block-supports-explained/">WordPress Block Editor: Block Supports Explained</a> appeared first on <a href="https://lakshyajeet.in/">Lakshyajeet&#039;s Blog</a>.</p>
]]></content:encoded>
					
					<wfw:commentRss>https://lakshyajeet.in/wordpress-block-editor-block-supports-explained/feed/</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
			</item>
	</channel>
</rss>
