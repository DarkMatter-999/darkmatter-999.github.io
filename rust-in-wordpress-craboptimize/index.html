<!DOCTYPE html>
<html lang="en-US">
<head><meta charset="UTF-8">
	
	<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1">

	<!-- This site is optimized with the Yoast SEO plugin v27.0 - https://yoast.com/product/yoast-seo-wordpress/ -->
	<meta name="description" content="What happens when you combine Rust, WebAssembly, and WordPress? Explore the engineering behind CrabOptimize.">
	<link rel="canonical" href="https://lakshyajeet.in/rust-in-wordpress-craboptimize/">
	<meta property="og:locale" content="en_US">
	<meta property="og:type" content="article">
	<meta property="og:title" content="Rust in WordPress: The Architectural overview of CrabOptimize - Lakshyajeet's Blog">
	<meta property="og:description" content="What happens when you combine Rust, WebAssembly, and WordPress? Explore the engineering behind CrabOptimize.">
	<meta property="og:url" content="https://lakshyajeet.in/rust-in-wordpress-craboptimize/">
	<meta property="og:site_name" content="Lakshyajeet's Blog">
	<meta property="article:published_time" content="2026-02-26T05:57:36+00:00">
	<meta property="og:image" content="https://lakshyajeet.in/wp-content/uploads/2026/02/craboptimize.webp">
	<meta property="og:image:width" content="1965">
	<meta property="og:image:height" content="1098">
	<meta property="og:image:type" content="image/webp">
	<meta name="author" content="lakshyajeet">
	<meta name="twitter:card" content="summary_large_image">
	<meta name="twitter:label1" content="Written by">
	<meta name="twitter:data1" content="lakshyajeet">
	<meta name="twitter:label2" content="Est. reading time">
	<meta name="twitter:data2" content="14 minutes">
	<script type="application/ld+json" class="yoast-schema-graph">{"@context":"https://schema.org","@graph":[{"@type":"Article","@id":"https://lakshyajeet.in/rust-in-wordpress-craboptimize/#article","isPartOf":{"@id":"https://lakshyajeet.in/rust-in-wordpress-craboptimize/"},"author":{"name":"lakshyajeet","@id":"https://lakshyajeet.in/#/schema/person/a2544f21ad29d03768185cdf9ab84efc"},"headline":"Rust in WordPress: The Architectural overview of CrabOptimize","datePublished":"2026-02-26T05:57:36+00:00","mainEntityOfPage":{"@id":"https://lakshyajeet.in/rust-in-wordpress-craboptimize/"},"wordCount":3217,"publisher":{"@id":"https://lakshyajeet.in/#/schema/person/a2544f21ad29d03768185cdf9ab84efc"},"image":{"@id":"https://lakshyajeet.in/rust-in-wordpress-craboptimize/#primaryimage"},"thumbnailUrl":"https://lakshyajeet.in/wp-content/uploads/2026/02/craboptimize.webp","inLanguage":"en-US"},{"@type":"WebPage","@id":"https://lakshyajeet.in/rust-in-wordpress-craboptimize/","url":"https://lakshyajeet.in/rust-in-wordpress-craboptimize/","name":"Rust in WordPress: The Architectural overview of CrabOptimize - Lakshyajeet's Blog","isPartOf":{"@id":"https://lakshyajeet.in/#website"},"primaryImageOfPage":{"@id":"https://lakshyajeet.in/rust-in-wordpress-craboptimize/#primaryimage"},"image":{"@id":"https://lakshyajeet.in/rust-in-wordpress-craboptimize/#primaryimage"},"thumbnailUrl":"https://lakshyajeet.in/wp-content/uploads/2026/02/craboptimize.webp","datePublished":"2026-02-26T05:57:36+00:00","description":"What happens when you combine Rust, WebAssembly, and WordPress? Explore the engineering behind CrabOptimize.","breadcrumb":{"@id":"https://lakshyajeet.in/rust-in-wordpress-craboptimize/#breadcrumb"},"inLanguage":"en-US","potentialAction":[{"@type":"ReadAction","target":["https://lakshyajeet.in/rust-in-wordpress-craboptimize/"]}]},{"@type":"ImageObject","inLanguage":"en-US","@id":"https://lakshyajeet.in/rust-in-wordpress-craboptimize/#primaryimage","url":"https://lakshyajeet.in/wp-content/uploads/2026/02/craboptimize.webp","contentUrl":"https://lakshyajeet.in/wp-content/uploads/2026/02/craboptimize.webp","width":1965,"height":1098},{"@type":"BreadcrumbList","@id":"https://lakshyajeet.in/rust-in-wordpress-craboptimize/#breadcrumb","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"https://lakshyajeet.in/"},{"@type":"ListItem","position":2,"name":"Blog","item":"https://lakshyajeet.in/blog/"},{"@type":"ListItem","position":3,"name":"Rust in WordPress: The Architectural overview of CrabOptimize"}]},{"@type":"WebSite","@id":"https://lakshyajeet.in/#website","url":"https://lakshyajeet.in/","name":"Lakshyajeet's Blog","description":"","publisher":{"@id":"https://lakshyajeet.in/#/schema/person/a2544f21ad29d03768185cdf9ab84efc"},"potentialAction":[{"@type":"SearchAction","target":{"@type":"EntryPoint","urlTemplate":"https://lakshyajeet.in/?s={search_term_string}"},"query-input":{"@type":"PropertyValueSpecification","valueRequired":true,"valueName":"search_term_string"}}],"inLanguage":"en-US"},{"@type":["Person","Organization"],"@id":"https://lakshyajeet.in/#/schema/person/a2544f21ad29d03768185cdf9ab84efc","name":"lakshyajeet","image":{"@type":"ImageObject","inLanguage":"en-US","@id":"https://lakshyajeet.in/#/schema/person/image/","url":"https://lakshyajeet.in/wp-content/uploads/2025/01/cropped-nyan-1.gif","contentUrl":"https://lakshyajeet.in/wp-content/uploads/2025/01/cropped-nyan-1.gif","width":512,"height":512,"caption":"lakshyajeet"},"logo":{"@id":"https://lakshyajeet.in/#/schema/person/image/"},"url":"https://lakshyajeet.in/author/lakshyajeet/"}]}</script>
	<!-- / Yoast SEO plugin. -->


<title>Rust in WordPress: The Architectural overview of CrabOptimize - Lakshyajeet's Blog</title>
<link rel="alternate" type="application/rss+xml" title="Lakshyajeet's Blog » Feed" href="https://lakshyajeet.in/feed/">
<link rel="alternate" type="application/rss+xml" title="Lakshyajeet's Blog » Comments Feed" href="https://lakshyajeet.in/comments/feed/">
<link rel="alternate" title="oEmbed (JSON)" type="application/json+oembed" href="https://lakshyajeet.in/wp-json/oembed/1.0/embed?url=https%3A%2F%2Flakshyajeet.in%2Frust-in-wordpress-craboptimize%2F">
<link rel="alternate" title="oEmbed (XML)" type="text/xml+oembed" href="https://lakshyajeet.in/wp-json/oembed/1.0/embed?url=https%3A%2F%2Flakshyajeet.in%2Frust-in-wordpress-craboptimize%2F&amp;format=xml">
<style id="wp-img-auto-sizes-contain-inline-css">
img:is([sizes=auto i],[sizes^="auto," i]){contain-intrinsic-size:3000px 1500px}
/*# sourceURL=wp-img-auto-sizes-contain-inline-css */
</style>
<style id="wp-block-heading-inline-css">
h1:where(.wp-block-heading).has-background,h2:where(.wp-block-heading).has-background,h3:where(.wp-block-heading).has-background,h4:where(.wp-block-heading).has-background,h5:where(.wp-block-heading).has-background,h6:where(.wp-block-heading).has-background{padding:1.25em 2.375em}h1.has-text-align-left[style*=writing-mode]:where([style*=vertical-lr]),h1.has-text-align-right[style*=writing-mode]:where([style*=vertical-rl]),h2.has-text-align-left[style*=writing-mode]:where([style*=vertical-lr]),h2.has-text-align-right[style*=writing-mode]:where([style*=vertical-rl]),h3.has-text-align-left[style*=writing-mode]:where([style*=vertical-lr]),h3.has-text-align-right[style*=writing-mode]:where([style*=vertical-rl]),h4.has-text-align-left[style*=writing-mode]:where([style*=vertical-lr]),h4.has-text-align-right[style*=writing-mode]:where([style*=vertical-rl]),h5.has-text-align-left[style*=writing-mode]:where([style*=vertical-lr]),h5.has-text-align-right[style*=writing-mode]:where([style*=vertical-rl]),h6.has-text-align-left[style*=writing-mode]:where([style*=vertical-lr]),h6.has-text-align-right[style*=writing-mode]:where([style*=vertical-rl]){rotate:180deg}
/*# sourceURL=https://lakshyajeet.in/wp-includes/blocks/heading/style.min.css */
</style>
<style id="wp-block-navigation-link-inline-css">
.wp-block-navigation .wp-block-navigation-item__label{overflow-wrap:break-word}.wp-block-navigation .wp-block-navigation-item__description{display:none}.link-ui-tools{outline:1px solid #f0f0f0;padding:8px}.link-ui-block-inserter{padding-top:8px}.link-ui-block-inserter__back{margin-left:8px;text-transform:uppercase}
/*# sourceURL=https://lakshyajeet.in/wp-includes/blocks/navigation-link/style.min.css */
</style>
<style id="wp-block-navigation-inline-css">
.wp-block-navigation{position:relative}.wp-block-navigation ul{margin-bottom:0;margin-left:0;margin-top:0;padding-left:0}.wp-block-navigation ul,.wp-block-navigation ul li{list-style:none;padding:0}.wp-block-navigation .wp-block-navigation-item{align-items:center;background-color:inherit;display:flex;position:relative}.wp-block-navigation .wp-block-navigation-item .wp-block-navigation__submenu-container:empty{display:none}.wp-block-navigation .wp-block-navigation-item__content{display:block;z-index:1}.wp-block-navigation .wp-block-navigation-item__content.wp-block-navigation-item__content{color:inherit}.wp-block-navigation.has-text-decoration-underline .wp-block-navigation-item__content,.wp-block-navigation.has-text-decoration-underline .wp-block-navigation-item__content:active,.wp-block-navigation.has-text-decoration-underline .wp-block-navigation-item__content:focus{text-decoration:underline}.wp-block-navigation.has-text-decoration-line-through .wp-block-navigation-item__content,.wp-block-navigation.has-text-decoration-line-through .wp-block-navigation-item__content:active,.wp-block-navigation.has-text-decoration-line-through .wp-block-navigation-item__content:focus{text-decoration:line-through}.wp-block-navigation :where(a),.wp-block-navigation :where(a:active),.wp-block-navigation :where(a:focus){text-decoration:none}.wp-block-navigation .wp-block-navigation__submenu-icon{align-self:center;background-color:inherit;border:none;color:currentColor;display:inline-block;font-size:inherit;height:.6em;line-height:0;margin-left:.25em;padding:0;width:.6em}.wp-block-navigation .wp-block-navigation__submenu-icon svg{display:inline-block;stroke:currentColor;height:inherit;margin-top:.075em;width:inherit}.wp-block-navigation{--navigation-layout-justification-setting:flex-start;--navigation-layout-direction:row;--navigation-layout-wrap:wrap;--navigation-layout-justify:flex-start;--navigation-layout-align:center}.wp-block-navigation.is-vertical{--navigation-layout-direction:column;--navigation-layout-justify:initial;--navigation-layout-align:flex-start}.wp-block-navigation.no-wrap{--navigation-layout-wrap:nowrap}.wp-block-navigation.items-justified-center{--navigation-layout-justification-setting:center;--navigation-layout-justify:center}.wp-block-navigation.items-justified-center.is-vertical{--navigation-layout-align:center}.wp-block-navigation.items-justified-right{--navigation-layout-justification-setting:flex-end;--navigation-layout-justify:flex-end}.wp-block-navigation.items-justified-right.is-vertical{--navigation-layout-align:flex-end}.wp-block-navigation.items-justified-space-between{--navigation-layout-justification-setting:space-between;--navigation-layout-justify:space-between}.wp-block-navigation .has-child .wp-block-navigation__submenu-container{align-items:normal;background-color:inherit;color:inherit;display:flex;flex-direction:column;opacity:0;position:absolute;z-index:2}@media not (prefers-reduced-motion){.wp-block-navigation .has-child .wp-block-navigation__submenu-container{transition:opacity .1s linear}}.wp-block-navigation .has-child .wp-block-navigation__submenu-container{height:0;overflow:hidden;visibility:hidden;width:0}.wp-block-navigation .has-child .wp-block-navigation__submenu-container>.wp-block-navigation-item>.wp-block-navigation-item__content{display:flex;flex-grow:1;padding:.5em 1em}.wp-block-navigation .has-child .wp-block-navigation__submenu-container>.wp-block-navigation-item>.wp-block-navigation-item__content .wp-block-navigation__submenu-icon{margin-left:auto;margin-right:0}.wp-block-navigation .has-child .wp-block-navigation__submenu-container .wp-block-navigation-item__content{margin:0}.wp-block-navigation .has-child .wp-block-navigation__submenu-container{left:-1px;top:100%}@media (min-width:782px){.wp-block-navigation .has-child .wp-block-navigation__submenu-container .wp-block-navigation__submenu-container{left:100%;top:-1px}.wp-block-navigation .has-child .wp-block-navigation__submenu-container .wp-block-navigation__submenu-container:before{background:#0000;content:"";display:block;height:100%;position:absolute;right:100%;width:.5em}.wp-block-navigation .has-child .wp-block-navigation__submenu-container .wp-block-navigation__submenu-icon{margin-right:.25em}.wp-block-navigation .has-child .wp-block-navigation__submenu-container .wp-block-navigation__submenu-icon svg{transform:rotate(-90deg)}}.wp-block-navigation .has-child .wp-block-navigation-submenu__toggle[aria-expanded=true]~.wp-block-navigation__submenu-container,.wp-block-navigation .has-child:not(.open-on-click):hover>.wp-block-navigation__submenu-container,.wp-block-navigation .has-child:not(.open-on-click):not(.open-on-hover-click):focus-within>.wp-block-navigation__submenu-container{height:auto;min-width:200px;opacity:1;overflow:visible;visibility:visible;width:auto}.wp-block-navigation.has-background .has-child .wp-block-navigation__submenu-container{left:0;top:100%}@media (min-width:782px){.wp-block-navigation.has-background .has-child .wp-block-navigation__submenu-container .wp-block-navigation__submenu-container{left:100%;top:0}}.wp-block-navigation-submenu{display:flex;position:relative}.wp-block-navigation-submenu .wp-block-navigation__submenu-icon svg{stroke:currentColor}button.wp-block-navigation-item__content{background-color:initial;border:none;color:currentColor;font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;text-align:left;text-transform:inherit}.wp-block-navigation-submenu__toggle{cursor:pointer}.wp-block-navigation-submenu__toggle[aria-expanded=true]+.wp-block-navigation__submenu-icon>svg,.wp-block-navigation-submenu__toggle[aria-expanded=true]>svg{transform:rotate(180deg)}.wp-block-navigation-item.open-on-click .wp-block-navigation-submenu__toggle{padding-left:0;padding-right:.85em}.wp-block-navigation-item.open-on-click .wp-block-navigation-submenu__toggle+.wp-block-navigation__submenu-icon{margin-left:-.6em;pointer-events:none}.wp-block-navigation-item.open-on-click button.wp-block-navigation-item__content:not(.wp-block-navigation-submenu__toggle){padding:0}.wp-block-navigation .wp-block-page-list,.wp-block-navigation__container,.wp-block-navigation__responsive-close,.wp-block-navigation__responsive-container,.wp-block-navigation__responsive-container-content,.wp-block-navigation__responsive-dialog{gap:inherit}:where(.wp-block-navigation.has-background .wp-block-navigation-item a:not(.wp-element-button)),:where(.wp-block-navigation.has-background .wp-block-navigation-submenu a:not(.wp-element-button)){padding:.5em 1em}:where(.wp-block-navigation .wp-block-navigation__submenu-container .wp-block-navigation-item a:not(.wp-element-button)),:where(.wp-block-navigation .wp-block-navigation__submenu-container .wp-block-navigation-submenu a:not(.wp-element-button)),:where(.wp-block-navigation .wp-block-navigation__submenu-container .wp-block-navigation-submenu button.wp-block-navigation-item__content),:where(.wp-block-navigation .wp-block-navigation__submenu-container .wp-block-pages-list__item button.wp-block-navigation-item__content){padding:.5em 1em}.wp-block-navigation.items-justified-right .wp-block-navigation__container .has-child .wp-block-navigation__submenu-container,.wp-block-navigation.items-justified-right .wp-block-page-list>.has-child .wp-block-navigation__submenu-container,.wp-block-navigation.items-justified-space-between .wp-block-page-list>.has-child:last-child .wp-block-navigation__submenu-container,.wp-block-navigation.items-justified-space-between>.wp-block-navigation__container>.has-child:last-child .wp-block-navigation__submenu-container{left:auto;right:0}.wp-block-navigation.items-justified-right .wp-block-navigation__container .has-child .wp-block-navigation__submenu-container .wp-block-navigation__submenu-container,.wp-block-navigation.items-justified-right .wp-block-page-list>.has-child .wp-block-navigation__submenu-container .wp-block-navigation__submenu-container,.wp-block-navigation.items-justified-space-between .wp-block-page-list>.has-child:last-child .wp-block-navigation__submenu-container .wp-block-navigation__submenu-container,.wp-block-navigation.items-justified-space-between>.wp-block-navigation__container>.has-child:last-child .wp-block-navigation__submenu-container .wp-block-navigation__submenu-container{left:-1px;right:-1px}@media (min-width:782px){.wp-block-navigation.items-justified-right .wp-block-navigation__container .has-child .wp-block-navigation__submenu-container .wp-block-navigation__submenu-container,.wp-block-navigation.items-justified-right .wp-block-page-list>.has-child .wp-block-navigation__submenu-container .wp-block-navigation__submenu-container,.wp-block-navigation.items-justified-space-between .wp-block-page-list>.has-child:last-child .wp-block-navigation__submenu-container .wp-block-navigation__submenu-container,.wp-block-navigation.items-justified-space-between>.wp-block-navigation__container>.has-child:last-child .wp-block-navigation__submenu-container .wp-block-navigation__submenu-container{left:auto;right:100%}}.wp-block-navigation:not(.has-background) .wp-block-navigation__submenu-container{background-color:#fff;border:1px solid #00000026}.wp-block-navigation.has-background .wp-block-navigation__submenu-container{background-color:inherit}.wp-block-navigation:not(.has-text-color) .wp-block-navigation__submenu-container{color:#000}.wp-block-navigation__container{align-items:var(--navigation-layout-align,initial);display:flex;flex-direction:var(--navigation-layout-direction,initial);flex-wrap:var(--navigation-layout-wrap,wrap);justify-content:var(--navigation-layout-justify,initial);list-style:none;margin:0;padding-left:0}.wp-block-navigation__container .is-responsive{display:none}.wp-block-navigation__container:only-child,.wp-block-page-list:only-child{flex-grow:1}@keyframes overlay-menu__fade-in-animation{0%{opacity:0;transform:translateY(.5em)}to{opacity:1;transform:translateY(0)}}.wp-block-navigation__responsive-container{bottom:0;display:none;left:0;position:fixed;right:0;top:0}.wp-block-navigation__responsive-container :where(.wp-block-navigation-item a){color:inherit}.wp-block-navigation__responsive-container .wp-block-navigation__responsive-container-content{align-items:var(--navigation-layout-align,initial);display:flex;flex-direction:var(--navigation-layout-direction,initial);flex-wrap:var(--navigation-layout-wrap,wrap);justify-content:var(--navigation-layout-justify,initial)}.wp-block-navigation__responsive-container:not(.is-menu-open.is-menu-open){background-color:inherit!important;color:inherit!important}.wp-block-navigation__responsive-container.is-menu-open{background-color:inherit;display:flex;flex-direction:column}@media not (prefers-reduced-motion){.wp-block-navigation__responsive-container.is-menu-open{animation:overlay-menu__fade-in-animation .1s ease-out;animation-fill-mode:forwards}}.wp-block-navigation__responsive-container.is-menu-open{overflow:auto;padding:clamp(1rem,var(--wp--style--root--padding-top),20rem) clamp(1rem,var(--wp--style--root--padding-right),20rem) clamp(1rem,var(--wp--style--root--padding-bottom),20rem) clamp(1rem,var(--wp--style--root--padding-left),20rem);z-index:100000}.wp-block-navigation__responsive-container.is-menu-open .wp-block-navigation__responsive-container-content{align-items:var(--navigation-layout-justification-setting,inherit);display:flex;flex-direction:column;flex-wrap:nowrap;overflow:visible;padding-top:calc(2rem + 24px)}.wp-block-navigation__responsive-container.is-menu-open .wp-block-navigation__responsive-container-content,.wp-block-navigation__responsive-container.is-menu-open .wp-block-navigation__responsive-container-content .wp-block-navigation__container,.wp-block-navigation__responsive-container.is-menu-open .wp-block-navigation__responsive-container-content .wp-block-page-list{justify-content:flex-start}.wp-block-navigation__responsive-container.is-menu-open .wp-block-navigation__responsive-container-content .wp-block-navigation__submenu-icon{display:none}.wp-block-navigation__responsive-container.is-menu-open .wp-block-navigation__responsive-container-content .has-child .wp-block-navigation__submenu-container{border:none;height:auto;min-width:200px;opacity:1;overflow:initial;padding-left:2rem;padding-right:2rem;position:static;visibility:visible;width:auto}.wp-block-navigation__responsive-container.is-menu-open .wp-block-navigation__responsive-container-content .wp-block-navigation__container,.wp-block-navigation__responsive-container.is-menu-open .wp-block-navigation__responsive-container-content .wp-block-navigation__submenu-container{gap:inherit}.wp-block-navigation__responsive-container.is-menu-open .wp-block-navigation__responsive-container-content .wp-block-navigation__submenu-container{padding-top:var(--wp--style--block-gap,2em)}.wp-block-navigation__responsive-container.is-menu-open .wp-block-navigation__responsive-container-content .wp-block-navigation-item__content{padding:0}.wp-block-navigation__responsive-container.is-menu-open .wp-block-navigation__responsive-container-content .wp-block-navigation-item,.wp-block-navigation__responsive-container.is-menu-open .wp-block-navigation__responsive-container-content .wp-block-navigation__container,.wp-block-navigation__responsive-container.is-menu-open .wp-block-navigation__responsive-container-content .wp-block-page-list{align-items:var(--navigation-layout-justification-setting,initial);display:flex;flex-direction:column}.wp-block-navigation__responsive-container.is-menu-open .wp-block-navigation-item,.wp-block-navigation__responsive-container.is-menu-open .wp-block-navigation-item .wp-block-navigation__submenu-container,.wp-block-navigation__responsive-container.is-menu-open .wp-block-navigation__container,.wp-block-navigation__responsive-container.is-menu-open .wp-block-page-list{background:#0000!important;color:inherit!important}.wp-block-navigation__responsive-container.is-menu-open .wp-block-navigation__submenu-container.wp-block-navigation__submenu-container.wp-block-navigation__submenu-container.wp-block-navigation__submenu-container{left:auto;right:auto}@media (min-width:600px){.wp-block-navigation__responsive-container:not(.hidden-by-default):not(.is-menu-open){background-color:inherit;display:block;position:relative;width:100%;z-index:auto}.wp-block-navigation__responsive-container:not(.hidden-by-default):not(.is-menu-open) .wp-block-navigation__responsive-container-close{display:none}.wp-block-navigation__responsive-container.is-menu-open .wp-block-navigation__submenu-container.wp-block-navigation__submenu-container.wp-block-navigation__submenu-container.wp-block-navigation__submenu-container{left:0}}.wp-block-navigation:not(.has-background) .wp-block-navigation__responsive-container.is-menu-open{background-color:#fff}.wp-block-navigation:not(.has-text-color) .wp-block-navigation__responsive-container.is-menu-open{color:#000}.wp-block-navigation__toggle_button_label{font-size:1rem;font-weight:700}.wp-block-navigation__responsive-container-close,.wp-block-navigation__responsive-container-open{background:#0000;border:none;color:currentColor;cursor:pointer;margin:0;padding:0;text-transform:inherit;vertical-align:middle}.wp-block-navigation__responsive-container-close svg,.wp-block-navigation__responsive-container-open svg{fill:currentColor;display:block;height:24px;pointer-events:none;width:24px}.wp-block-navigation__responsive-container-open{display:flex}.wp-block-navigation__responsive-container-open.wp-block-navigation__responsive-container-open.wp-block-navigation__responsive-container-open{font-family:inherit;font-size:inherit;font-weight:inherit}@media (min-width:600px){.wp-block-navigation__responsive-container-open:not(.always-shown){display:none}}.wp-block-navigation__responsive-container-close{position:absolute;right:0;top:0;z-index:2}.wp-block-navigation__responsive-container-close.wp-block-navigation__responsive-container-close.wp-block-navigation__responsive-container-close{font-family:inherit;font-size:inherit;font-weight:inherit}.wp-block-navigation__responsive-close{width:100%}.has-modal-open .wp-block-navigation__responsive-close{margin-left:auto;margin-right:auto;max-width:var(--wp--style--global--wide-size,100%)}.wp-block-navigation__responsive-close:focus{outline:none}.is-menu-open .wp-block-navigation__responsive-close,.is-menu-open .wp-block-navigation__responsive-container-content,.is-menu-open .wp-block-navigation__responsive-dialog{box-sizing:border-box}.wp-block-navigation__responsive-dialog{position:relative}.has-modal-open .admin-bar .is-menu-open .wp-block-navigation__responsive-dialog{margin-top:46px}@media (min-width:782px){.has-modal-open .admin-bar .is-menu-open .wp-block-navigation__responsive-dialog{margin-top:32px}}html.has-modal-open{overflow:hidden}
/*# sourceURL=https://lakshyajeet.in/wp-includes/blocks/navigation/style.min.css */
</style>
<style id="wp-block-group-inline-css">
.wp-block-group{box-sizing:border-box}:where(.wp-block-group.wp-block-group-is-layout-constrained){position:relative}
/*# sourceURL=https://lakshyajeet.in/wp-includes/blocks/group/style.min.css */
</style>
<style id="wp-block-post-title-inline-css">
.wp-block-post-title{box-sizing:border-box;word-break:break-word}.wp-block-post-title :where(a){display:inline-block;font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;text-decoration:inherit}
/*# sourceURL=https://lakshyajeet.in/wp-includes/blocks/post-title/style.min.css */
</style>
<style id="wp-block-post-author-inline-css">
.wp-block-post-author{box-sizing:border-box;display:flex;flex-wrap:wrap}.wp-block-post-author__byline{font-size:.5em;margin-bottom:0;margin-top:0;width:100%}.wp-block-post-author__avatar{margin-right:1em}.wp-block-post-author__bio{font-size:.7em;margin-bottom:.7em}.wp-block-post-author__content{flex-basis:0;flex-grow:1}.wp-block-post-author__name{margin:0}
/*# sourceURL=https://lakshyajeet.in/wp-includes/blocks/post-author/style.min.css */
</style>
<link rel="stylesheet" id="wp-block-cover-css" href="https://lakshyajeet.in/wp-includes/blocks/cover/style.min.css?ver=6.9.1" media="all">
<style id="wp-block-paragraph-inline-css">
.is-small-text{font-size:.875em}.is-regular-text{font-size:1em}.is-large-text{font-size:2.25em}.is-larger-text{font-size:3em}.has-drop-cap:not(:focus):first-letter{float:left;font-size:8.4em;font-style:normal;font-weight:100;line-height:.68;margin:.05em .1em 0 0;text-transform:uppercase}body.rtl .has-drop-cap:not(:focus):first-letter{float:none;margin-left:.1em}p.has-drop-cap.has-background{overflow:hidden}:root :where(p.has-background){padding:1.25em 2.375em}:where(p.has-text-color:not(.has-link-color)) a{color:inherit}p.has-text-align-left[style*="writing-mode:vertical-lr"],p.has-text-align-right[style*="writing-mode:vertical-rl"]{rotate:180deg}
/*# sourceURL=https://lakshyajeet.in/wp-includes/blocks/paragraph/style.min.css */
</style>
<style id="wp-block-video-inline-css">
.wp-block-video{box-sizing:border-box}.wp-block-video video{height:auto;vertical-align:middle;width:100%}@supports (position:sticky){.wp-block-video [poster]{object-fit:cover}}.wp-block-video.aligncenter{text-align:center}.wp-block-video :where(figcaption){margin-bottom:1em;margin-top:.5em}
/*# sourceURL=https://lakshyajeet.in/wp-includes/blocks/video/style.min.css */
</style>
<style id="wp-block-list-inline-css">
ol,ul{box-sizing:border-box}:root :where(.wp-block-list.has-background){padding:1.25em 2.375em}
/*# sourceURL=https://lakshyajeet.in/wp-includes/blocks/list/style.min.css */
</style>
<style id="wp-block-image-inline-css">
.wp-block-image>a,.wp-block-image>figure>a{display:inline-block}.wp-block-image img{box-sizing:border-box;height:auto;max-width:100%;vertical-align:bottom}@media not (prefers-reduced-motion){.wp-block-image img.hide{visibility:hidden}.wp-block-image img.show{animation:show-content-image .4s}}.wp-block-image[style*=border-radius] img,.wp-block-image[style*=border-radius]>a{border-radius:inherit}.wp-block-image.has-custom-border img{box-sizing:border-box}.wp-block-image.aligncenter{text-align:center}.wp-block-image.alignfull>a,.wp-block-image.alignwide>a{width:100%}.wp-block-image.alignfull img,.wp-block-image.alignwide img{height:auto;width:100%}.wp-block-image .aligncenter,.wp-block-image .alignleft,.wp-block-image .alignright,.wp-block-image.aligncenter,.wp-block-image.alignleft,.wp-block-image.alignright{display:table}.wp-block-image .aligncenter>figcaption,.wp-block-image .alignleft>figcaption,.wp-block-image .alignright>figcaption,.wp-block-image.aligncenter>figcaption,.wp-block-image.alignleft>figcaption,.wp-block-image.alignright>figcaption{caption-side:bottom;display:table-caption}.wp-block-image .alignleft{float:left;margin:.5em 1em .5em 0}.wp-block-image .alignright{float:right;margin:.5em 0 .5em 1em}.wp-block-image .aligncenter{margin-left:auto;margin-right:auto}.wp-block-image :where(figcaption){margin-bottom:1em;margin-top:.5em}.wp-block-image.is-style-circle-mask img{border-radius:9999px}@supports ((-webkit-mask-image:none) or (mask-image:none)) or (-webkit-mask-image:none){.wp-block-image.is-style-circle-mask img{border-radius:0;-webkit-mask-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><circle cx="50" cy="50" r="50"/>');mask-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><circle cx="50" cy="50" r="50"/>');mask-mode:alpha;-webkit-mask-position:center;mask-position:center;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;-webkit-mask-size:contain;mask-size:contain}}:root :where(.wp-block-image.is-style-rounded img,.wp-block-image .is-style-rounded img){border-radius:9999px}.wp-block-image figure{margin:0}.wp-lightbox-container{display:flex;flex-direction:column;position:relative}.wp-lightbox-container img{cursor:zoom-in}.wp-lightbox-container img:hover+button{opacity:1}.wp-lightbox-container button{align-items:center;backdrop-filter:blur(16px) saturate(180%);background-color:#5a5a5a40;border:none;border-radius:4px;cursor:zoom-in;display:flex;height:20px;justify-content:center;opacity:0;padding:0;position:absolute;right:16px;text-align:center;top:16px;width:20px;z-index:100}@media not (prefers-reduced-motion){.wp-lightbox-container button{transition:opacity .2s ease}}.wp-lightbox-container button:focus-visible{outline:3px auto #5a5a5a40;outline:3px auto -webkit-focus-ring-color;outline-offset:3px}.wp-lightbox-container button:hover{cursor:pointer;opacity:1}.wp-lightbox-container button:focus{opacity:1}.wp-lightbox-container button:focus,.wp-lightbox-container button:hover,.wp-lightbox-container button:not(:hover):not(:active):not(.has-background){background-color:#5a5a5a40;border:none}.wp-lightbox-overlay{box-sizing:border-box;cursor:zoom-out;height:100vh;left:0;overflow:hidden;position:fixed;top:0;visibility:hidden;width:100%;z-index:100000}.wp-lightbox-overlay .close-button{align-items:center;cursor:pointer;display:flex;justify-content:center;min-height:40px;min-width:40px;padding:0;position:absolute;right:calc(env(safe-area-inset-right) + 16px);top:calc(env(safe-area-inset-top) + 16px);z-index:5000000}.wp-lightbox-overlay .close-button:focus,.wp-lightbox-overlay .close-button:hover,.wp-lightbox-overlay .close-button:not(:hover):not(:active):not(.has-background){background:none;border:none}.wp-lightbox-overlay .lightbox-image-container{height:var(--wp--lightbox-container-height);left:50%;overflow:hidden;position:absolute;top:50%;transform:translate(-50%,-50%);transform-origin:top left;width:var(--wp--lightbox-container-width);z-index:9999999999}.wp-lightbox-overlay .wp-block-image{align-items:center;box-sizing:border-box;display:flex;height:100%;justify-content:center;margin:0;position:relative;transform-origin:0 0;width:100%;z-index:3000000}.wp-lightbox-overlay .wp-block-image img{height:var(--wp--lightbox-image-height);min-height:var(--wp--lightbox-image-height);min-width:var(--wp--lightbox-image-width);width:var(--wp--lightbox-image-width)}.wp-lightbox-overlay .wp-block-image figcaption{display:none}.wp-lightbox-overlay button{background:none;border:none}.wp-lightbox-overlay .scrim{background-color:#fff;height:100%;opacity:.9;position:absolute;width:100%;z-index:2000000}.wp-lightbox-overlay.active{visibility:visible}@media not (prefers-reduced-motion){.wp-lightbox-overlay.active{animation:turn-on-visibility .25s both}.wp-lightbox-overlay.active img{animation:turn-on-visibility .35s both}.wp-lightbox-overlay.show-closing-animation:not(.active){animation:turn-off-visibility .35s both}.wp-lightbox-overlay.show-closing-animation:not(.active) img{animation:turn-off-visibility .25s both}.wp-lightbox-overlay.zoom.active{animation:none;opacity:1;visibility:visible}.wp-lightbox-overlay.zoom.active .lightbox-image-container{animation:lightbox-zoom-in .4s}.wp-lightbox-overlay.zoom.active .lightbox-image-container img{animation:none}.wp-lightbox-overlay.zoom.active .scrim{animation:turn-on-visibility .4s forwards}.wp-lightbox-overlay.zoom.show-closing-animation:not(.active){animation:none}.wp-lightbox-overlay.zoom.show-closing-animation:not(.active) .lightbox-image-container{animation:lightbox-zoom-out .4s}.wp-lightbox-overlay.zoom.show-closing-animation:not(.active) .lightbox-image-container img{animation:none}.wp-lightbox-overlay.zoom.show-closing-animation:not(.active) .scrim{animation:turn-off-visibility .4s forwards}}@keyframes show-content-image{0%{visibility:hidden}99%{visibility:hidden}to{visibility:visible}}@keyframes turn-on-visibility{0%{opacity:0}to{opacity:1}}@keyframes turn-off-visibility{0%{opacity:1;visibility:visible}99%{opacity:0;visibility:visible}to{opacity:0;visibility:hidden}}@keyframes lightbox-zoom-in{0%{transform:translate(calc((-100vw + var(--wp--lightbox-scrollbar-width))/2 + var(--wp--lightbox-initial-left-position)),calc(-50vh + var(--wp--lightbox-initial-top-position))) scale(var(--wp--lightbox-scale))}to{transform:translate(-50%,-50%) scale(1)}}@keyframes lightbox-zoom-out{0%{transform:translate(-50%,-50%) scale(1);visibility:visible}99%{visibility:visible}to{transform:translate(calc((-100vw + var(--wp--lightbox-scrollbar-width))/2 + var(--wp--lightbox-initial-left-position)),calc(-50vh + var(--wp--lightbox-initial-top-position))) scale(var(--wp--lightbox-scale));visibility:hidden}}
/*# sourceURL=https://lakshyajeet.in/wp-includes/blocks/image/style.min.css */
</style>
<style id="wp-block-columns-inline-css">
.wp-block-columns{box-sizing:border-box;display:flex;flex-wrap:wrap!important}@media (min-width:782px){.wp-block-columns{flex-wrap:nowrap!important}}.wp-block-columns{align-items:normal!important}.wp-block-columns.are-vertically-aligned-top{align-items:flex-start}.wp-block-columns.are-vertically-aligned-center{align-items:center}.wp-block-columns.are-vertically-aligned-bottom{align-items:flex-end}@media (max-width:781px){.wp-block-columns:not(.is-not-stacked-on-mobile)>.wp-block-column{flex-basis:100%!important}}@media (min-width:782px){.wp-block-columns:not(.is-not-stacked-on-mobile)>.wp-block-column{flex-basis:0;flex-grow:1}.wp-block-columns:not(.is-not-stacked-on-mobile)>.wp-block-column[style*=flex-basis]{flex-grow:0}}.wp-block-columns.is-not-stacked-on-mobile{flex-wrap:nowrap!important}.wp-block-columns.is-not-stacked-on-mobile>.wp-block-column{flex-basis:0;flex-grow:1}.wp-block-columns.is-not-stacked-on-mobile>.wp-block-column[style*=flex-basis]{flex-grow:0}:where(.wp-block-columns){margin-bottom:1.75em}:where(.wp-block-columns.has-background){padding:1.25em 2.375em}.wp-block-column{flex-grow:1;min-width:0;overflow-wrap:break-word;word-break:break-word}.wp-block-column.is-vertically-aligned-top{align-self:flex-start}.wp-block-column.is-vertically-aligned-center{align-self:center}.wp-block-column.is-vertically-aligned-bottom{align-self:flex-end}.wp-block-column.is-vertically-aligned-stretch{align-self:stretch}.wp-block-column.is-vertically-aligned-bottom,.wp-block-column.is-vertically-aligned-center,.wp-block-column.is-vertically-aligned-top{width:100%}
/*# sourceURL=https://lakshyajeet.in/wp-includes/blocks/columns/style.min.css */
</style>
<style id="dm-hcb-highlighted-code-block-style-inline-css">
.dm-hcb-code-preview pre{display:block;margin:0;overflow-x:auto;padding:0;width:100%}.dm-hcb-code-input textarea{max-width:calc(100% - 2em);padding:1em;width:calc(100% - 2em)}.dm-hcb-code-preview>pre,.wp-block-dm-hcb-highlighted-code-block{position:relative}.dm-hcb-code-preview>pre>button,.wp-block-dm-hcb-highlighted-code-block>button{border:.5px solid;border-radius:3px;cursor:pointer;font-size:.85em;margin:0;padding:.2em .5em;position:absolute;right:.5em;top:.5em;z-index:10}.dm-hcb-code-preview>pre>button>svg,.wp-block-dm-hcb-highlighted-code-block>button>svg{fill:currentcolor;vertical-align:middle;width:1em}.wp-block-dm-hcb-highlighted-code-block button span{margin-left:.5em}

/*# sourceURL=https://lakshyajeet.in/wp-content/plugins/Syntax-Highlighted-Code-blocks/assets/build/blocks/highlighted-code-block/index.css */
</style>
<style id="wp-block-post-content-inline-css">
.wp-block-post-content{display:flow-root}
/*# sourceURL=https://lakshyajeet.in/wp-includes/blocks/post-content/style.min.css */
</style>
<style id="wp-block-post-navigation-link-inline-css">
.wp-block-post-navigation-link .wp-block-post-navigation-link__arrow-previous{display:inline-block;margin-right:1ch}.wp-block-post-navigation-link .wp-block-post-navigation-link__arrow-previous:not(.is-arrow-chevron){transform:scaleX(1)}.wp-block-post-navigation-link .wp-block-post-navigation-link__arrow-next{display:inline-block;margin-left:1ch}.wp-block-post-navigation-link .wp-block-post-navigation-link__arrow-next:not(.is-arrow-chevron){transform:scaleX(1)}.wp-block-post-navigation-link.has-text-align-left[style*="writing-mode: vertical-lr"],.wp-block-post-navigation-link.has-text-align-right[style*="writing-mode: vertical-rl"]{rotate:180deg}
/*# sourceURL=https://lakshyajeet.in/wp-includes/blocks/post-navigation-link/style.min.css */
</style>
<style id="wp-block-site-title-inline-css">
.wp-block-site-title{box-sizing:border-box}.wp-block-site-title :where(a){color:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;text-decoration:inherit}
/*# sourceURL=https://lakshyajeet.in/wp-includes/blocks/site-title/style.min.css */
</style>
<style id="wp-emoji-styles-inline-css">

	img.wp-smiley, img.emoji {
		display: inline !important;
		border: none !important;
		box-shadow: none !important;
		height: 1em !important;
		width: 1em !important;
		margin: 0 0.07em !important;
		vertical-align: -0.1em !important;
		background: none !important;
		padding: 0 !important;
	}
/*# sourceURL=wp-emoji-styles-inline-css */
</style>
<style id="wp-block-library-inline-css">
:root{--wp-block-synced-color:#7a00df;--wp-block-synced-color--rgb:122,0,223;--wp-bound-block-color:var(--wp-block-synced-color);--wp-editor-canvas-background:#ddd;--wp-admin-theme-color:#007cba;--wp-admin-theme-color--rgb:0,124,186;--wp-admin-theme-color-darker-10:#006ba1;--wp-admin-theme-color-darker-10--rgb:0,107,160.5;--wp-admin-theme-color-darker-20:#005a87;--wp-admin-theme-color-darker-20--rgb:0,90,135;--wp-admin-border-width-focus:2px}@media (min-resolution:192dpi){:root{--wp-admin-border-width-focus:1.5px}}.wp-element-button{cursor:pointer}:root .has-very-light-gray-background-color{background-color:#eee}:root .has-very-dark-gray-background-color{background-color:#313131}:root .has-very-light-gray-color{color:#eee}:root .has-very-dark-gray-color{color:#313131}:root .has-vivid-green-cyan-to-vivid-cyan-blue-gradient-background{background:linear-gradient(135deg,#00d084,#0693e3)}:root .has-purple-crush-gradient-background{background:linear-gradient(135deg,#34e2e4,#4721fb 50%,#ab1dfe)}:root .has-hazy-dawn-gradient-background{background:linear-gradient(135deg,#faaca8,#dad0ec)}:root .has-subdued-olive-gradient-background{background:linear-gradient(135deg,#fafae1,#67a671)}:root .has-atomic-cream-gradient-background{background:linear-gradient(135deg,#fdd79a,#004a59)}:root .has-nightshade-gradient-background{background:linear-gradient(135deg,#330968,#31cdcf)}:root .has-midnight-gradient-background{background:linear-gradient(135deg,#020381,#2874fc)}:root{--wp--preset--font-size--normal:16px;--wp--preset--font-size--huge:42px}.has-regular-font-size{font-size:1em}.has-larger-font-size{font-size:2.625em}.has-normal-font-size{font-size:var(--wp--preset--font-size--normal)}.has-huge-font-size{font-size:var(--wp--preset--font-size--huge)}.has-text-align-center{text-align:center}.has-text-align-left{text-align:left}.has-text-align-right{text-align:right}.has-fit-text{white-space:nowrap!important}#end-resizable-editor-section{display:none}.aligncenter{clear:both}.items-justified-left{justify-content:flex-start}.items-justified-center{justify-content:center}.items-justified-right{justify-content:flex-end}.items-justified-space-between{justify-content:space-between}.screen-reader-text{border:0;clip-path:inset(50%);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;word-wrap:normal!important}.screen-reader-text:focus{background-color:#ddd;clip-path:none;color:#444;display:block;font-size:1em;height:auto;left:5px;line-height:normal;padding:15px 23px 14px;text-decoration:none;top:5px;width:auto;z-index:100000}html :where(.has-border-color){border-style:solid}html :where([style*=border-top-color]){border-top-style:solid}html :where([style*=border-right-color]){border-right-style:solid}html :where([style*=border-bottom-color]){border-bottom-style:solid}html :where([style*=border-left-color]){border-left-style:solid}html :where([style*=border-width]){border-style:solid}html :where([style*=border-top-width]){border-top-style:solid}html :where([style*=border-right-width]){border-right-style:solid}html :where([style*=border-bottom-width]){border-bottom-style:solid}html :where([style*=border-left-width]){border-left-style:solid}html :where(img[class*=wp-image-]){height:auto;max-width:100%}:where(figure){margin:0 0 1em}html :where(.is-position-sticky){--wp-admin--admin-bar--position-offset:var(--wp-admin--admin-bar--height,0px)}@media screen and (max-width:600px){html :where(.is-position-sticky){--wp-admin--admin-bar--position-offset:0px}}
/*# sourceURL=/wp-includes/css/dist/block-library/common.min.css */
</style>
<link rel="stylesheet" id="dm-hcb-highlight-theme-block-css" href="https://lakshyajeet.in/wp-content/plugins/Syntax-Highlighted-Code-blocks/assets/build/themes/atom-one-dark.min.css?ver=1765782624" media="all">
<link rel="stylesheet" id="main-css" href="https://lakshyajeet.in/wp-content/themes/darkmatter/assets/build/css/screen.css?ver=8e490d9a54619be17e1c" media="all">
<link rel="stylesheet" id="hand-css" href="https://lakshyajeet.in/wp-content/themes/darkmatter/assets/build/css/hand.css?ver=b5c2dce8010766234f58" media="print" onload="this.media='all'">
<style id="global-styles-inline-css">
:root{--wp--preset--aspect-ratio--square: 1;--wp--preset--aspect-ratio--4-3: 4/3;--wp--preset--aspect-ratio--3-4: 3/4;--wp--preset--aspect-ratio--3-2: 3/2;--wp--preset--aspect-ratio--2-3: 2/3;--wp--preset--aspect-ratio--16-9: 16/9;--wp--preset--aspect-ratio--9-16: 9/16;--wp--preset--color--black: #000000;--wp--preset--color--cyan-bluish-gray: #abb8c3;--wp--preset--color--white: #ffffff;--wp--preset--color--pale-pink: #f78da7;--wp--preset--color--vivid-red: #cf2e2e;--wp--preset--color--luminous-vivid-orange: #ff6900;--wp--preset--color--luminous-vivid-amber: #fcb900;--wp--preset--color--light-green-cyan: #7bdcb5;--wp--preset--color--vivid-green-cyan: #00d084;--wp--preset--color--pale-cyan-blue: #8ed1fc;--wp--preset--color--vivid-cyan-blue: #0693e3;--wp--preset--color--vivid-purple: #9b51e0;--wp--preset--color--base: hsl(259 86% 8%);--wp--preset--color--base-dark: hsl(250 35% 10%);--wp--preset--color--base-light: hsl(257 58% 12%);--wp--preset--color--base-front: hsl(255 100% 5%);--wp--preset--color--contrast: hsl(250 100% 100%);--wp--preset--color--contrast-muted: hsl(251 65% 79%);--wp--preset--color--highlight: hsl(255 36% 49%);--wp--preset--color--border: hsl(257 47% 37%);--wp--preset--color--border-muted: hsl(262 69% 25%);--wp--preset--color--primary: hsl(252 100% 82%);--wp--preset--color--secondary: hsl(63 47% 49%);--wp--preset--color--tertiery: hsl(272 100% 50%);--wp--preset--color--shadow: 0px 2px 2px oklch(0 0 0 / 0.2), 0px 4px 4px oklch(0 0 0 / 0.1);--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple: linear-gradient(135deg,rgb(6,147,227) 0%,rgb(155,81,224) 100%);--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan: linear-gradient(135deg,rgb(122,220,180) 0%,rgb(0,208,130) 100%);--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange: linear-gradient(135deg,rgb(252,185,0) 0%,rgb(255,105,0) 100%);--wp--preset--gradient--luminous-vivid-orange-to-vivid-red: linear-gradient(135deg,rgb(255,105,0) 0%,rgb(207,46,46) 100%);--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray: linear-gradient(135deg,rgb(238,238,238) 0%,rgb(169,184,195) 100%);--wp--preset--gradient--cool-to-warm-spectrum: linear-gradient(135deg,rgb(74,234,220) 0%,rgb(151,120,209) 20%,rgb(207,42,186) 40%,rgb(238,44,130) 60%,rgb(251,105,98) 80%,rgb(254,248,76) 100%);--wp--preset--gradient--blush-light-purple: linear-gradient(135deg,rgb(255,206,236) 0%,rgb(152,150,240) 100%);--wp--preset--gradient--blush-bordeaux: linear-gradient(135deg,rgb(254,205,165) 0%,rgb(254,45,45) 50%,rgb(107,0,62) 100%);--wp--preset--gradient--luminous-dusk: linear-gradient(135deg,rgb(255,203,112) 0%,rgb(199,81,192) 50%,rgb(65,88,208) 100%);--wp--preset--gradient--pale-ocean: linear-gradient(135deg,rgb(255,245,203) 0%,rgb(182,227,212) 50%,rgb(51,167,181) 100%);--wp--preset--gradient--electric-grass: linear-gradient(135deg,rgb(202,248,128) 0%,rgb(113,206,126) 100%);--wp--preset--gradient--midnight: linear-gradient(135deg,rgb(2,3,129) 0%,rgb(40,116,252) 100%);--wp--preset--gradient--primary-gradient: linear-gradient(0deg, var(--wp--preset--color--base) 97%, var(--wp--preset--color--base-light));--wp--preset--gradient--primary-gradient-hover: linear-gradient(0deg, var(--wp--preset--color--base), var(--wp--preset--color--base-light));--wp--preset--gradient--hero-gradient: radial-gradient(at 22% 62%, rgb(126, 104, 222) 0px, transparent 50%), radial-gradient(at 90% 39%, rgb(167, 70, 246) 0px, transparent 50%), radial-gradient(at 74% 83%, rgb(68, 108, 218) 0px, transparent 50%), radial-gradient(at 14% 10%, rgb(255, 92, 220) 0px, transparent 50%), radial-gradient(at 57% 16%, rgb(219, 95, 247) 0px, transparent 50%), radial-gradient(at 2% 83%, rgb(255, 194, 148) 0px, transparent 50%);--wp--preset--font-size--small: 13px;--wp--preset--font-size--medium: clamp(14px, 0.875rem + ((1vw - 3.2px) * 0.536), 20px);--wp--preset--font-size--large: clamp(22.041px, 1.378rem + ((1vw - 3.2px) * 1.246), 36px);--wp--preset--font-size--x-large: clamp(25.014px, 1.563rem + ((1vw - 3.2px) * 1.517), 42px);--wp--preset--font-size--extra-small: 0.75rem;--wp--preset--font-size--normal: clamp(0.875rem, 0.875rem + ((1vw - 0.2rem) * 0.179), 1rem);--wp--preset--font-size--extra-large: clamp(1.25rem, 1.25rem + ((1vw - 0.2rem) * 1.071), 2rem);--wp--preset--font-size--xxl: clamp(1.743rem, 1.743rem + ((1vw - 0.2rem) * 1.796), 3rem);--wp--preset--font-size--huge: clamp(2.2rem, 2.2rem + ((1vw - 0.2rem) * 2.571), 4rem);--wp--preset--font-size--extra-huge: clamp(2.835rem, 2.835rem + ((1vw - 0.2rem) * 3.807), 5.5rem);--wp--preset--font-family--poppins: Poppins, sans-serif;--wp--preset--font-family--galada: Galada, sans-serif;--wp--preset--spacing--20: 0.44rem;--wp--preset--spacing--30: 0.67rem;--wp--preset--spacing--40: 1rem;--wp--preset--spacing--50: 1.5rem;--wp--preset--spacing--60: 2.25rem;--wp--preset--spacing--70: 3.38rem;--wp--preset--spacing--80: 5.06rem;--wp--preset--shadow--natural: 6px 6px 9px rgba(0, 0, 0, 0.2);--wp--preset--shadow--deep: 12px 12px 50px rgba(0, 0, 0, 0.4);--wp--preset--shadow--sharp: 6px 6px 0px rgba(0, 0, 0, 0.2);--wp--preset--shadow--outlined: 6px 6px 0px -3px rgb(255, 255, 255), 6px 6px rgb(0, 0, 0);--wp--preset--shadow--crisp: 6px 6px 0px rgb(0, 0, 0);}:root { --wp--style--global--content-size: 1200px;--wp--style--global--wide-size: 1440px; }:where(body) { margin: 0; }.wp-site-blocks > .alignleft { float: left; margin-right: 2em; }.wp-site-blocks > .alignright { float: right; margin-left: 2em; }.wp-site-blocks > .aligncenter { justify-content: center; margin-left: auto; margin-right: auto; }:where(.wp-site-blocks) > * { margin-block-start: 24px; margin-block-end: 0; }:where(.wp-site-blocks) > :first-child { margin-block-start: 0; }:where(.wp-site-blocks) > :last-child { margin-block-end: 0; }:root { --wp--style--block-gap: 24px; }:root :where(.is-layout-flow) > :first-child{margin-block-start: 0;}:root :where(.is-layout-flow) > :last-child{margin-block-end: 0;}:root :where(.is-layout-flow) > *{margin-block-start: 24px;margin-block-end: 0;}:root :where(.is-layout-constrained) > :first-child{margin-block-start: 0;}:root :where(.is-layout-constrained) > :last-child{margin-block-end: 0;}:root :where(.is-layout-constrained) > *{margin-block-start: 24px;margin-block-end: 0;}:root :where(.is-layout-flex){gap: 24px;}:root :where(.is-layout-grid){gap: 24px;}.is-layout-flow > .alignleft{float: left;margin-inline-start: 0;margin-inline-end: 2em;}.is-layout-flow > .alignright{float: right;margin-inline-start: 2em;margin-inline-end: 0;}.is-layout-flow > .aligncenter{margin-left: auto !important;margin-right: auto !important;}.is-layout-constrained > .alignleft{float: left;margin-inline-start: 0;margin-inline-end: 2em;}.is-layout-constrained > .alignright{float: right;margin-inline-start: 2em;margin-inline-end: 0;}.is-layout-constrained > .aligncenter{margin-left: auto !important;margin-right: auto !important;}.is-layout-constrained > :where(:not(.alignleft):not(.alignright):not(.alignfull)){max-width: var(--wp--style--global--content-size);margin-left: auto !important;margin-right: auto !important;}.is-layout-constrained > .alignwide{max-width: var(--wp--style--global--wide-size);}body .is-layout-flex{display: flex;}.is-layout-flex{flex-wrap: wrap;align-items: center;}.is-layout-flex > :is(*, div){margin: 0;}body .is-layout-grid{display: grid;}.is-layout-grid > :is(*, div){margin: 0;}body{background-color: var(--wp--preset--color--base-dark);color: var(--wp--preset--color--contrast);font-family: var(--wp--preset--font-family--poppins);font-size: clamp(14px, 0.875rem + ((1vw - 3.2px) * 0.357), 18px);line-height: 1.6;padding-top: 0px;padding-right: 0px;padding-bottom: 0px;padding-left: 0px;}a:where(:not(.wp-element-button)){color: var(--wp--preset--color--contrast);text-decoration: underline;}:root :where(.wp-element-button, .wp-block-button__link){background-color: #32373c;border-width: 0;color: #fff;font-family: inherit;font-size: inherit;font-style: inherit;font-weight: inherit;letter-spacing: inherit;line-height: inherit;padding-top: calc(0.667em + 2px);padding-right: calc(1.333em + 2px);padding-bottom: calc(0.667em + 2px);padding-left: calc(1.333em + 2px);text-decoration: none;text-transform: inherit;}.has-black-color{color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-color{color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-color{color: var(--wp--preset--color--white) !important;}.has-pale-pink-color{color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-color{color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-color{color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-color{color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-color{color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-color{color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-color{color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-color{color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-color{color: var(--wp--preset--color--vivid-purple) !important;}.has-base-color{color: var(--wp--preset--color--base) !important;}.has-base-dark-color{color: var(--wp--preset--color--base-dark) !important;}.has-base-light-color{color: var(--wp--preset--color--base-light) !important;}.has-base-front-color{color: var(--wp--preset--color--base-front) !important;}.has-contrast-color{color: var(--wp--preset--color--contrast) !important;}.has-contrast-muted-color{color: var(--wp--preset--color--contrast-muted) !important;}.has-highlight-color{color: var(--wp--preset--color--highlight) !important;}.has-border-color{color: var(--wp--preset--color--border) !important;}.has-border-muted-color{color: var(--wp--preset--color--border-muted) !important;}.has-primary-color{color: var(--wp--preset--color--primary) !important;}.has-secondary-color{color: var(--wp--preset--color--secondary) !important;}.has-tertiery-color{color: var(--wp--preset--color--tertiery) !important;}.has-shadow-color{color: var(--wp--preset--color--shadow) !important;}.has-black-background-color{background-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-background-color{background-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-background-color{background-color: var(--wp--preset--color--white) !important;}.has-pale-pink-background-color{background-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-background-color{background-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-background-color{background-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-background-color{background-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-background-color{background-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-background-color{background-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-background-color{background-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-background-color{background-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-background-color{background-color: var(--wp--preset--color--vivid-purple) !important;}.has-base-background-color{background-color: var(--wp--preset--color--base) !important;}.has-base-dark-background-color{background-color: var(--wp--preset--color--base-dark) !important;}.has-base-light-background-color{background-color: var(--wp--preset--color--base-light) !important;}.has-base-front-background-color{background-color: var(--wp--preset--color--base-front) !important;}.has-contrast-background-color{background-color: var(--wp--preset--color--contrast) !important;}.has-contrast-muted-background-color{background-color: var(--wp--preset--color--contrast-muted) !important;}.has-highlight-background-color{background-color: var(--wp--preset--color--highlight) !important;}.has-border-background-color{background-color: var(--wp--preset--color--border) !important;}.has-border-muted-background-color{background-color: var(--wp--preset--color--border-muted) !important;}.has-primary-background-color{background-color: var(--wp--preset--color--primary) !important;}.has-secondary-background-color{background-color: var(--wp--preset--color--secondary) !important;}.has-tertiery-background-color{background-color: var(--wp--preset--color--tertiery) !important;}.has-shadow-background-color{background-color: var(--wp--preset--color--shadow) !important;}.has-black-border-color{border-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-border-color{border-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-border-color{border-color: var(--wp--preset--color--white) !important;}.has-pale-pink-border-color{border-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-border-color{border-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-border-color{border-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-border-color{border-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-border-color{border-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-border-color{border-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-border-color{border-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-border-color{border-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-border-color{border-color: var(--wp--preset--color--vivid-purple) !important;}.has-base-border-color{border-color: var(--wp--preset--color--base) !important;}.has-base-dark-border-color{border-color: var(--wp--preset--color--base-dark) !important;}.has-base-light-border-color{border-color: var(--wp--preset--color--base-light) !important;}.has-base-front-border-color{border-color: var(--wp--preset--color--base-front) !important;}.has-contrast-border-color{border-color: var(--wp--preset--color--contrast) !important;}.has-contrast-muted-border-color{border-color: var(--wp--preset--color--contrast-muted) !important;}.has-highlight-border-color{border-color: var(--wp--preset--color--highlight) !important;}.has-border-border-color{border-color: var(--wp--preset--color--border) !important;}.has-border-muted-border-color{border-color: var(--wp--preset--color--border-muted) !important;}.has-primary-border-color{border-color: var(--wp--preset--color--primary) !important;}.has-secondary-border-color{border-color: var(--wp--preset--color--secondary) !important;}.has-tertiery-border-color{border-color: var(--wp--preset--color--tertiery) !important;}.has-shadow-border-color{border-color: var(--wp--preset--color--shadow) !important;}.has-vivid-cyan-blue-to-vivid-purple-gradient-background{background: var(--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple) !important;}.has-light-green-cyan-to-vivid-green-cyan-gradient-background{background: var(--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan) !important;}.has-luminous-vivid-amber-to-luminous-vivid-orange-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange) !important;}.has-luminous-vivid-orange-to-vivid-red-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-orange-to-vivid-red) !important;}.has-very-light-gray-to-cyan-bluish-gray-gradient-background{background: var(--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray) !important;}.has-cool-to-warm-spectrum-gradient-background{background: var(--wp--preset--gradient--cool-to-warm-spectrum) !important;}.has-blush-light-purple-gradient-background{background: var(--wp--preset--gradient--blush-light-purple) !important;}.has-blush-bordeaux-gradient-background{background: var(--wp--preset--gradient--blush-bordeaux) !important;}.has-luminous-dusk-gradient-background{background: var(--wp--preset--gradient--luminous-dusk) !important;}.has-pale-ocean-gradient-background{background: var(--wp--preset--gradient--pale-ocean) !important;}.has-electric-grass-gradient-background{background: var(--wp--preset--gradient--electric-grass) !important;}.has-midnight-gradient-background{background: var(--wp--preset--gradient--midnight) !important;}.has-primary-gradient-gradient-background{background: var(--wp--preset--gradient--primary-gradient) !important;}.has-primary-gradient-hover-gradient-background{background: var(--wp--preset--gradient--primary-gradient-hover) !important;}.has-hero-gradient-gradient-background{background: var(--wp--preset--gradient--hero-gradient) !important;}.has-small-font-size{font-size: var(--wp--preset--font-size--small) !important;}.has-medium-font-size{font-size: var(--wp--preset--font-size--medium) !important;}.has-large-font-size{font-size: var(--wp--preset--font-size--large) !important;}.has-x-large-font-size{font-size: var(--wp--preset--font-size--x-large) !important;}.has-extra-small-font-size{font-size: var(--wp--preset--font-size--extra-small) !important;}.has-normal-font-size{font-size: var(--wp--preset--font-size--normal) !important;}.has-extra-large-font-size{font-size: var(--wp--preset--font-size--extra-large) !important;}.has-xxl-font-size{font-size: var(--wp--preset--font-size--xxl) !important;}.has-huge-font-size{font-size: var(--wp--preset--font-size--huge) !important;}.has-extra-huge-font-size{font-size: var(--wp--preset--font-size--extra-huge) !important;}.has-poppins-font-family{font-family: var(--wp--preset--font-family--poppins) !important;}.has-galada-font-family{font-family: var(--wp--preset--font-family--galada) !important;}
:root :where(.wp-block-cover){background-color: var(--wp--preset--color--base-dark);}
/*# sourceURL=global-styles-inline-css */
</style>
<style id="core-block-supports-inline-css">
.wp-container-core-group-is-layout-13d46e68{flex-wrap:nowrap;gap:0;justify-content:space-between;}.wp-container-core-group-is-layout-3018ce38 > :where(:not(.alignleft):not(.alignright):not(.alignfull)){max-width:1200px;margin-left:auto !important;margin-right:auto !important;}.wp-container-core-group-is-layout-3018ce38 > .alignwide{max-width:1440px;}.wp-container-core-group-is-layout-3018ce38 .alignfull{max-width:none;}.wp-container-core-group-is-layout-3018ce38 > .alignfull{margin-right:calc(var(--wp--preset--spacing--60) * -1);margin-left:calc(var(--wp--preset--spacing--60) * -1);}.wp-elements-66e2171ccf4754254e7e9d295c1d8aab a:where(:not(.wp-element-button)){color:var(--wp--preset--color--contrast);}.wp-container-core-group-is-layout-0747478d > .alignfull{margin-right:calc(var(--wp--preset--spacing--50) * -1);margin-left:calc(var(--wp--preset--spacing--50) * -1);}.wp-container-core-columns-is-layout-28f84493{flex-wrap:nowrap;}.wp-container-core-group-is-layout-609ade12{flex-wrap:nowrap;justify-content:space-between;align-items:center;}.wp-container-core-group-is-layout-bea02a06 > :where(:not(.alignleft):not(.alignright):not(.alignfull)){max-width:800px;margin-left:auto !important;margin-right:auto !important;}.wp-container-core-group-is-layout-bea02a06 > .alignwide{max-width:800px;}.wp-container-core-group-is-layout-bea02a06 .alignfull{max-width:none;}.wp-container-core-group-is-layout-b6c1f246{flex-direction:column;align-items:center;justify-content:center;}.wp-container-core-navigation-is-layout-734eb2c2{flex-direction:column;align-items:center;}.wp-container-core-group-is-layout-e278f9a3{flex-wrap:nowrap;gap:var(--wp--preset--spacing--30);justify-content:center;}.wp-container-core-columns-is-layout-643ced6b{flex-wrap:nowrap;gap:var(--wp--preset--spacing--60) var(--wp--preset--spacing--60);}.wp-container-core-group-is-layout-196b58ae > :where(:not(.alignleft):not(.alignright):not(.alignfull)){max-width:800px;margin-left:auto !important;margin-right:auto !important;}.wp-container-core-group-is-layout-196b58ae > .alignwide{max-width:800px;}.wp-container-core-group-is-layout-196b58ae .alignfull{max-width:none;}.wp-container-core-group-is-layout-196b58ae > .alignfull{margin-right:calc(var(--wp--preset--spacing--30) * -1);margin-left:calc(var(--wp--preset--spacing--30) * -1);}
/*# sourceURL=core-block-supports-inline-css */
</style>
<style id="wp-block-template-skip-link-inline-css">

		.skip-link.screen-reader-text {
			border: 0;
			clip-path: inset(50%);
			height: 1px;
			margin: -1px;
			overflow: hidden;
			padding: 0;
			position: absolute !important;
			width: 1px;
			word-wrap: normal !important;
		}

		.skip-link.screen-reader-text:focus {
			background-color: #eee;
			clip-path: none;
			color: #444;
			display: block;
			font-size: 1em;
			height: auto;
			left: 5px;
			line-height: normal;
			padding: 15px 23px 14px;
			text-decoration: none;
			top: 5px;
			width: auto;
			z-index: 100000;
		}
/*# sourceURL=wp-block-template-skip-link-inline-css */
</style>
<link rel="stylesheet" id="dm-hcb-highlight-theme-css" href="https://lakshyajeet.in/wp-content/plugins/Syntax-Highlighted-Code-blocks/assets/build/themes/atom-one-dark.min.css?ver=1765782624" media="all">
<style id="tss-style-base-inline-css">
:root.is-style-base {
--wp--preset--color--base: hsl(259 86% 8%);--wp--preset--color--base-dark: hsl(250 35% 10%);--wp--preset--color--base-light: hsl(257 58% 12%);--wp--preset--color--base-front: hsl(255 100% 5%);--wp--preset--color--contrast: hsl(250 100% 100%);--wp--preset--color--contrast-muted: hsl(251 65% 79%);--wp--preset--color--highlight: hsl(255 36% 49%);--wp--preset--color--border: hsl(257 47% 37%);--wp--preset--color--border-muted: hsl(262 69% 25%);--wp--preset--color--primary: hsl(252 100% 82%);--wp--preset--color--secondary: hsl(63 47% 49%);--wp--preset--color--tertiery: hsl(272 100% 50%);--wp--preset--color--shadow: 0px 2px 2px oklch(0 0 0 / 0.2), 0px 4px 4px oklch(0 0 0 / 0.1);--wp--preset--gradient--primary-gradient: linear-gradient(0deg, var(--wp--preset--color--base) 97%, var(--wp--preset--color--base-light));--wp--preset--gradient--primary-gradient-hover: linear-gradient(0deg, var(--wp--preset--color--base), var(--wp--preset--color--base-light));--wp--preset--gradient--hero-gradient: radial-gradient(at 22% 62%, rgb(126, 104, 222) 0px, transparent 50%), radial-gradient(at 90% 39%, rgb(167, 70, 246) 0px, transparent 50%), radial-gradient(at 74% 83%, rgb(68, 108, 218) 0px, transparent 50%), radial-gradient(at 14% 10%, rgb(255, 92, 220) 0px, transparent 50%), radial-gradient(at 57% 16%, rgb(219, 95, 247) 0px, transparent 50%), radial-gradient(at 2% 83%, rgb(255, 194, 148) 0px, transparent 50%);--wp--preset--font-size--extra-small: 0.75rem;--wp--preset--font-size--small: 0.875rem;--wp--preset--font-size--normal: clamp(0.875rem, 0.875rem + ((1vw - 0.2rem) * 0.179), 1rem);--wp--preset--font-size--medium: clamp(0.875rem, 0.875rem + ((1vw - 0.2rem) * 0.357), 1.125rem);--wp--preset--font-size--large: clamp(0.984rem, 0.984rem + ((1vw - 0.2rem) * 0.737), 1.5rem);--wp--preset--font-size--extra-large: clamp(1.25rem, 1.25rem + ((1vw - 0.2rem) * 1.071), 2rem);--wp--preset--font-size--xxl: clamp(1.743rem, 1.743rem + ((1vw - 0.2rem) * 1.796), 3rem);--wp--preset--font-size--huge: clamp(2.2rem, 2.2rem + ((1vw - 0.2rem) * 2.571), 4rem);--wp--preset--font-size--extra-huge: clamp(2.835rem, 2.835rem + ((1vw - 0.2rem) * 3.807), 5.5rem);--wp--preset--font-family--poppins: Poppins, sans-serif;--wp--preset--font-family--galada: Galada, sans-serif;
}
:root.is-style-base {
--wp--style--global--content-size: 1200px;--wp--style--global--wide-size: 1440px;
}
.is-style-base :where(body) {
margin: 0;
}
.is-style-base .wp-site-blocks > .alignleft {
float: left; margin-right: 2em;
}
.is-style-base .wp-site-blocks > .alignright {
float: right; margin-left: 2em;
}
.is-style-base .wp-site-blocks > .aligncenter {
justify-content: center; margin-left: auto; margin-right: auto;
}
.is-style-base :where(.wp-site-blocks) > * {
margin-block-start: ; margin-block-end: 0;
}
.is-style-base :where(.wp-site-blocks) > :first-child {
margin-block-start: 0;
}
.is-style-base :where(.wp-site-blocks) > :last-child {
margin-block-end: 0;
}
:root.is-style-base {
--wp--style--block-gap: ;
}
.is-style-base .is-layout-flow > .alignleft {
float: left;margin-inline-start: 0;margin-inline-end: 2em;
}
.is-style-base .is-layout-flow > .alignright {
float: right;margin-inline-start: 2em;margin-inline-end: 0;
}
.is-style-base .is-layout-flow > .aligncenter {
margin-left: auto !important;margin-right: auto !important;
}
.is-style-base .is-layout-constrained > .alignleft {
float: left;margin-inline-start: 0;margin-inline-end: 2em;
}
.is-style-base .is-layout-constrained > .alignright {
float: right;margin-inline-start: 2em;margin-inline-end: 0;
}
.is-style-base .is-layout-constrained > .aligncenter {
margin-left: auto !important;margin-right: auto !important;
}
.is-style-base .is-layout-constrained > :where(:not(.alignleft):not(.alignright):not(.alignfull)) {
max-width: var(--wp--style--global--content-size);margin-left: auto !important;margin-right: auto !important;
}
.is-style-base .is-layout-constrained > .alignwide {
max-width: var(--wp--style--global--wide-size);
}
.is-style-base body .is-layout-flex {
display: flex;
}
.is-style-base .is-layout-flex {
flex-wrap: wrap;align-items: center;
}
.is-style-base .is-layout-flex > :is(*, .is-style-base div) {
margin: 0;
}
.is-style-base body .is-layout-grid {
display: grid;
}
.is-style-base .is-layout-grid > :is(*, .is-style-base div) {
margin: 0;
}
.is-style-base body {
background-color: var(--wp--preset--color--base-dark);color: var(--wp--preset--color--contrast);font-family: var(--wp--preset--font-family--poppins);font-size: clamp(14px, 0.875rem + ((1vw - 3.2px) * 0.357), 18px);line-height: 1.6;
}
.is-style-base a:where(:not(.wp-element-button)) {
color: var(--wp--preset--color--contrast);
}
.is-style-base .has-base-color {
color: var(--wp--preset--color--base) !important;
}
.is-style-base .has-base-dark-color {
color: var(--wp--preset--color--base-dark) !important;
}
.is-style-base .has-base-light-color {
color: var(--wp--preset--color--base-light) !important;
}
.is-style-base .has-base-front-color {
color: var(--wp--preset--color--base-front) !important;
}
.is-style-base .has-contrast-color {
color: var(--wp--preset--color--contrast) !important;
}
.is-style-base .has-contrast-muted-color {
color: var(--wp--preset--color--contrast-muted) !important;
}
.is-style-base .has-highlight-color {
color: var(--wp--preset--color--highlight) !important;
}
.is-style-base .has-border-color {
color: var(--wp--preset--color--border) !important;
}
.is-style-base .has-border-muted-color {
color: var(--wp--preset--color--border-muted) !important;
}
.is-style-base .has-primary-color {
color: var(--wp--preset--color--primary) !important;
}
.is-style-base .has-secondary-color {
color: var(--wp--preset--color--secondary) !important;
}
.is-style-base .has-tertiery-color {
color: var(--wp--preset--color--tertiery) !important;
}
.is-style-base .has-shadow-color {
color: var(--wp--preset--color--shadow) !important;
}
.is-style-base .has-base-background-color {
background-color: var(--wp--preset--color--base) !important;
}
.is-style-base .has-base-dark-background-color {
background-color: var(--wp--preset--color--base-dark) !important;
}
.is-style-base .has-base-light-background-color {
background-color: var(--wp--preset--color--base-light) !important;
}
.is-style-base .has-base-front-background-color {
background-color: var(--wp--preset--color--base-front) !important;
}
.is-style-base .has-contrast-background-color {
background-color: var(--wp--preset--color--contrast) !important;
}
.is-style-base .has-contrast-muted-background-color {
background-color: var(--wp--preset--color--contrast-muted) !important;
}
.is-style-base .has-highlight-background-color {
background-color: var(--wp--preset--color--highlight) !important;
}
.is-style-base .has-border-background-color {
background-color: var(--wp--preset--color--border) !important;
}
.is-style-base .has-border-muted-background-color {
background-color: var(--wp--preset--color--border-muted) !important;
}
.is-style-base .has-primary-background-color {
background-color: var(--wp--preset--color--primary) !important;
}
.is-style-base .has-secondary-background-color {
background-color: var(--wp--preset--color--secondary) !important;
}
.is-style-base .has-tertiery-background-color {
background-color: var(--wp--preset--color--tertiery) !important;
}
.is-style-base .has-shadow-background-color {
background-color: var(--wp--preset--color--shadow) !important;
}
.is-style-base .has-base-border-color {
border-color: var(--wp--preset--color--base) !important;
}
.is-style-base .has-base-dark-border-color {
border-color: var(--wp--preset--color--base-dark) !important;
}
.is-style-base .has-base-light-border-color {
border-color: var(--wp--preset--color--base-light) !important;
}
.is-style-base .has-base-front-border-color {
border-color: var(--wp--preset--color--base-front) !important;
}
.is-style-base .has-contrast-border-color {
border-color: var(--wp--preset--color--contrast) !important;
}
.is-style-base .has-contrast-muted-border-color {
border-color: var(--wp--preset--color--contrast-muted) !important;
}
.is-style-base .has-highlight-border-color {
border-color: var(--wp--preset--color--highlight) !important;
}
.is-style-base .has-border-border-color {
border-color: var(--wp--preset--color--border) !important;
}
.is-style-base .has-border-muted-border-color {
border-color: var(--wp--preset--color--border-muted) !important;
}
.is-style-base .has-primary-border-color {
border-color: var(--wp--preset--color--primary) !important;
}
.is-style-base .has-secondary-border-color {
border-color: var(--wp--preset--color--secondary) !important;
}
.is-style-base .has-tertiery-border-color {
border-color: var(--wp--preset--color--tertiery) !important;
}
.is-style-base .has-shadow-border-color {
border-color: var(--wp--preset--color--shadow) !important;
}
.is-style-base .has-primary-gradient-gradient-background {
background: var(--wp--preset--gradient--primary-gradient) !important;
}
.is-style-base .has-primary-gradient-hover-gradient-background {
background: var(--wp--preset--gradient--primary-gradient-hover) !important;
}
.is-style-base .has-hero-gradient-gradient-background {
background: var(--wp--preset--gradient--hero-gradient) !important;
}
.is-style-base .has-extra-small-font-size {
font-size: var(--wp--preset--font-size--extra-small) !important;
}
.is-style-base .has-small-font-size {
font-size: var(--wp--preset--font-size--small) !important;
}
.is-style-base .has-normal-font-size {
font-size: var(--wp--preset--font-size--normal) !important;
}
.is-style-base .has-medium-font-size {
font-size: var(--wp--preset--font-size--medium) !important;
}
.is-style-base .has-large-font-size {
font-size: var(--wp--preset--font-size--large) !important;
}
.is-style-base .has-extra-large-font-size {
font-size: var(--wp--preset--font-size--extra-large) !important;
}
.is-style-base .has-xxl-font-size {
font-size: var(--wp--preset--font-size--xxl) !important;
}
.is-style-base .has-huge-font-size {
font-size: var(--wp--preset--font-size--huge) !important;
}
.is-style-base .has-extra-huge-font-size {
font-size: var(--wp--preset--font-size--extra-huge) !important;
}
.is-style-base .has-poppins-font-family {
font-family: var(--wp--preset--font-family--poppins) !important;
}
.is-style-base .has-galada-font-family {
font-family: var(--wp--preset--font-family--galada) !important;
}

/*# sourceURL=tss-style-base-inline-css */
</style>
<style id="tss-style-01-light-inline-css">
:root.is-style-01-light {
--wp--preset--color--base: hsl(250 100% 99%);
--wp--preset--color--base-dark: hsl(255 40% 93%);
--wp--preset--color--base-light: hsl(252 100% 100%);
--wp--preset--color--base-front: hsl(250 30% 85%);
--wp--preset--color--contrast: hsl(255 35% 10%);
--wp--preset--color--contrast-muted: hsl(255 25% 30%);
--wp--preset--color--highlight: hsl(255 45% 55%);
--wp--preset--color--border: hsl(257 25% 80%);
--wp--preset--color--border-muted: hsl(260 20% 90%);
--wp--preset--color--primary: hsl(252 100% 50%);
--wp--preset--color--secondary: hsl(63 47% 49%);
--wp--preset--color--tertiery: hsl(272 100% 50%);
--wp--preset--color--shadow: 0px 2px 4px oklch(0 0 0 / 0.1), 0px 8px 8px oklch(0 0 0 / 0.05);
--wp--preset--gradient--primary-gradient: linear-gradient(0deg, var(--wp--preset--color--base-light) 97%, var(--wp--preset--color--base));
--wp--preset--gradient--primary-gradient-hover: linear-gradient(0deg, var(--wp--preset--color--base), var(--wp--preset--color--base-light));
--wp--preset--gradient--hero-gradient: radial-gradient(at 22% 62%, rgb(126, 104, 222) 0px, transparent 50%), radial-gradient(at 90% 39%, rgb(167, 70, 246) 0px, transparent 50%), radial-gradient(at 74% 83%, rgb(68, 108, 218) 0px, transparent 50%), radial-gradient(at 14% 10%, rgb(255, 92, 220) 0px, transparent 50%), radial-gradient(at 57% 16%, rgb(219, 95, 247) 0px, transparent 50%), radial-gradient(at 2% 83%, rgb(255, 194, 148) 0px, transparent 50%);
}
.is-style-01-light :where(body) {
margin: 0;
}
.is-style-01-light .wp-site-blocks > .alignleft {
float: left;
margin-right: 2em;
}
.is-style-01-light .wp-site-blocks > .alignright {
float: right;
margin-left: 2em;
}
.is-style-01-light .wp-site-blocks > .aligncenter {
justify-content: center;
margin-left: auto;
margin-right: auto;
}
.is-style-01-light :where(.wp-site-blocks) > * {
margin-block-start:;
margin-block-end: 0;
}
.is-style-01-light :where(.wp-site-blocks) > :first-child {
margin-block-start: 0;
}
.is-style-01-light :where(.wp-site-blocks) > :last-child {
margin-block-end: 0;
}
:root.is-style-01-light {
--wp--style--block-gap:;
}
.is-style-01-light .is-layout-flow > .alignleft {
float: left;
margin-inline-start: 0;
margin-inline-end: 2em;
}
.is-style-01-light .is-layout-flow > .alignright {
float: right;
margin-inline-start: 2em;
margin-inline-end: 0;
}
.is-style-01-light .is-layout-flow > .aligncenter {
margin-left: auto !important;
margin-right: auto !important;
}
.is-style-01-light .is-layout-constrained > .alignleft {
float: left;
margin-inline-start: 0;
margin-inline-end: 2em;
}
.is-style-01-light .is-layout-constrained > .alignright {
float: right;
margin-inline-start: 2em;
margin-inline-end: 0;
}
.is-style-01-light .is-layout-constrained > .aligncenter {
margin-left: auto !important;
margin-right: auto !important;
}
.is-style-01-light .is-layout-constrained > :where(:not(.alignleft):not(.alignright):not(.alignfull)) {
margin-left: auto !important;
margin-right: auto !important;
}
.is-style-01-light body .is-layout-flex {
display: flex;
}
.is-style-01-light .is-layout-flex {
flex-wrap: wrap;
align-items: center;
}
.is-style-01-light .is-layout-flex > :is(*, .is-style-01-light div) {
margin: 0;
}
.is-style-01-light body .is-layout-grid {
display: grid;
}
.is-style-01-light .is-layout-grid > :is(*, .is-style-01-light div) {
margin: 0;
}
.is-style-01-light body {
background-color: var(--wp--preset--color--base-light);
color: var(--wp--preset--color--contrast);
font-family: var(--wp--preset--font-family--poppins);
line-height: 1.6;
}
.is-style-01-light a:where(:not(.wp-element-button)) {
color: var(--wp--preset--color--highlight);
}
.is-style-01-light .has-base-color {
color: var(--wp--preset--color--base) !important;
}
.is-style-01-light .has-base-dark-color {
color: var(--wp--preset--color--base-dark) !important;
}
.is-style-01-light .has-base-light-color {
color: var(--wp--preset--color--base-light) !important;
}
.is-style-01-light .has-base-front-color {
color: var(--wp--preset--color--base-front) !important;
}
.is-style-01-light .has-contrast-color {
color: var(--wp--preset--color--contrast) !important;
}
.is-style-01-light .has-contrast-muted-color {
color: var(--wp--preset--color--contrast-muted) !important;
}
.is-style-01-light .has-highlight-color {
color: var(--wp--preset--color--highlight) !important;
}
.is-style-01-light .has-border-color {
color: var(--wp--preset--color--border) !important;
}
.is-style-01-light .has-border-muted-color {
color: var(--wp--preset--color--border-muted) !important;
}
.is-style-01-light .has-primary-color {
color: var(--wp--preset--color--primary) !important;
}
.is-style-01-light .has-secondary-color {
color: var(--wp--preset--color--secondary) !important;
}
.is-style-01-light .has-tertiery-color {
color: var(--wp--preset--color--tertiery) !important;
}
.is-style-01-light .has-shadow-color {
color: var(--wp--preset--color--shadow) !important;
}
.is-style-01-light .has-base-background-color {
background-color: var(--wp--preset--color--base) !important;
}
.is-style-01-light .has-base-dark-background-color {
background-color: var(--wp--preset--color--base-dark) !important;
}
.is-style-01-light .has-base-light-background-color {
background-color: var(--wp--preset--color--base-light) !important;
}
.is-style-01-light .has-base-front-background-color {
background-color: var(--wp--preset--color--base-front) !important;
}
.is-style-01-light .has-contrast-background-color {
background-color: var(--wp--preset--color--contrast) !important;
}
.is-style-01-light .has-contrast-muted-background-color {
background-color: var(--wp--preset--color--contrast-muted) !important;
}
.is-style-01-light .has-highlight-background-color {
background-color: var(--wp--preset--color--highlight) !important;
}
.is-style-01-light .has-border-background-color {
background-color: var(--wp--preset--color--border) !important;
}
.is-style-01-light .has-border-muted-background-color {
background-color: var(--wp--preset--color--border-muted) !important;
}
.is-style-01-light .has-primary-background-color {
background-color: var(--wp--preset--color--primary) !important;
}
.is-style-01-light .has-secondary-background-color {
background-color: var(--wp--preset--color--secondary) !important;
}
.is-style-01-light .has-tertiery-background-color {
background-color: var(--wp--preset--color--tertiery) !important;
}
.is-style-01-light .has-shadow-background-color {
background-color: var(--wp--preset--color--shadow) !important;
}
.is-style-01-light .has-base-border-color {
border-color: var(--wp--preset--color--base) !important;
}
.is-style-01-light .has-base-dark-border-color {
border-color: var(--wp--preset--color--base-dark) !important;
}
.is-style-01-light .has-base-light-border-color {
border-color: var(--wp--preset--color--base-light) !important;
}
.is-style-01-light .has-base-front-border-color {
border-color: var(--wp--preset--color--base-front) !important;
}
.is-style-01-light .has-contrast-border-color {
border-color: var(--wp--preset--color--contrast) !important;
}
.is-style-01-light .has-contrast-muted-border-color {
border-color: var(--wp--preset--color--contrast-muted) !important;
}
.is-style-01-light .has-highlight-border-color {
border-color: var(--wp--preset--color--highlight) !important;
}
.is-style-01-light .has-border-border-color {
border-color: var(--wp--preset--color--border) !important;
}
.is-style-01-light .has-border-muted-border-color {
border-color: var(--wp--preset--color--border-muted) !important;
}
.is-style-01-light .has-primary-border-color {
border-color: var(--wp--preset--color--primary) !important;
}
.is-style-01-light .has-secondary-border-color {
border-color: var(--wp--preset--color--secondary) !important;
}
.is-style-01-light .has-tertiery-border-color {
border-color: var(--wp--preset--color--tertiery) !important;
}
.is-style-01-light .has-shadow-border-color {
border-color: var(--wp--preset--color--shadow) !important;
}
.is-style-01-light .has-primary-gradient-gradient-background {
background: var(--wp--preset--gradient--primary-gradient) !important;
}
.is-style-01-light .has-primary-gradient-hover-gradient-background {
background: var(--wp--preset--gradient--primary-gradient-hover) !important;
}
.is-style-01-light .has-hero-gradient-gradient-background {
background: var(--wp--preset--gradient--hero-gradient) !important;
}

/*# sourceURL=tss-style-01-light-inline-css */
</style>
<script src="https://lakshyajeet.in/wp-includes/js/dist/hooks.min.js?ver=dd5603f07f9220ed27f1" id="wp-hooks-js"></script>
<script src="https://lakshyajeet.in/wp-includes/js/dist/i18n.min.js?ver=c26c3dc7bed366793375" id="wp-i18n-js"></script>
<script id="wp-i18n-js-after">
wp.i18n.setLocaleData( { 'text direction\u0004ltr': [ 'ltr' ] } );
//# sourceURL=wp-i18n-js-after
</script>
<script src="https://lakshyajeet.in/wp-content/plugins/Syntax-Highlighted-Code-blocks/assets/build/blocks/highlighted-code-block/view.js?ver=a6eb1df7a76fbfecb87d" id="dm-hcb-highlighted-code-block-view-script-js" defer data-wp-strategy="defer"></script>
<script src="https://lakshyajeet.in/wp-content/plugins/WordPress-Theme-Style-Switcher/assets/build/blocks/theme-switcher-block/view.js?ver=a6e2d025c46bd4df6a02" id="dm-tss-theme-style-switcher-view-script-js" defer data-wp-strategy="defer"></script>
<script src="https://lakshyajeet.in/wp-content/themes/darkmatter/assets/build/js/screen.js?ver=5e5cd2388f786cec7f14" id="main-js-js" defer data-wp-strategy="defer"></script>
<link rel="https://api.w.org/" href="https://lakshyajeet.in/wp-json/"><link rel="alternate" title="JSON" type="application/json" href="https://lakshyajeet.in/wp-json/wp/v2/posts/1320"><link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://lakshyajeet.in/xmlrpc.php?rsd">
<meta name="generator" content="WordPress 6.9.1">
<link rel="shortlink" href="https://lakshyajeet.in/?p=1320">
<script type="importmap" id="wp-importmap">
{"imports":{"@wordpress/interactivity":"https://lakshyajeet.in/wp-includes/js/dist/script-modules/interactivity/index.min.js?ver=66c613f68580994bb00a"}}
</script>
<link rel="modulepreload" href="https://lakshyajeet.in/wp-includes/js/dist/script-modules/interactivity/index.min.js?ver=66c613f68580994bb00a" id="@wordpress/interactivity-js-modulepreload" fetchpriority="low">
<style class="wp-fonts-local">
@font-face{font-family:Poppins;font-style:normal;font-weight:100 200 300 400 500 600 700 800 900;font-display:swap;src:url('https://lakshyajeet.in/wp-content/themes/darkmatter/assets/fonts/poppins-regular.woff2') format('woff2');font-stretch:normal;}
@font-face{font-family:Galada;font-style:normal;font-weight:100 200 300 400 500 600 700 800 900;font-display:swap;src:url('https://lakshyajeet.in/wp-content/themes/darkmatter/assets/fonts/galada-regular.woff2') format('woff2');font-stretch:normal;}
</style>
<link rel="icon" href="https://lakshyajeet.in/wp-content/uploads/2025/12/nyan-150x150.png" sizes="32x32">
<link rel="icon" href="https://lakshyajeet.in/wp-content/uploads/2025/12/nyan-300x300.png" sizes="192x192">
<link rel="apple-touch-icon" href="https://lakshyajeet.in/wp-content/uploads/2025/12/nyan-300x300.png">
<meta name="msapplication-TileImage" content="https://lakshyajeet.in/wp-content/uploads/2025/12/nyan-300x300.png">
</head>

<body class="wp-singular post-template-default single single-post postid-1320 single-format-standard wp-embed-responsive wp-theme-darkmatter">

<div class="wp-site-blocks"><header class="site-header wp-block-template-part">
<div class="wp-block-group dm-header has-primary-gradient-gradient-background has-primary-gradient-hover-gradient-background has-background is-layout-constrained wp-container-core-group-is-layout-3018ce38 wp-block-group-is-layout-constrained" style="margin-top:0;margin-bottom:0;padding-top:var(--wp--preset--spacing--40);padding-right:var(--wp--preset--spacing--60);padding-bottom:var(--wp--preset--spacing--40);padding-left:var(--wp--preset--spacing--60)">
<div class="wp-block-group is-content-justification-space-between is-nowrap is-layout-flex wp-container-core-group-is-layout-13d46e68 wp-block-group-is-layout-flex" style="margin-top:var(--wp--preset--spacing--40);margin-bottom:var(--wp--preset--spacing--40)">
<h2 class="wp-block-heading"><a href="https://lakshyajeet.in/" data-type="page" data-id="960">Lakshyajeet.</a></h2>


<nav class="is-responsive wp-block-navigation is-layout-flex wp-block-navigation-is-layout-flex" aria-label="Navigation" data-wp-interactive="core/navigation" data-wp-context='{"overlayOpenedBy":{"click":false,"hover":false,"focus":false},"type":"overlay","roleAttribute":"","ariaLabel":"Menu"}'><button aria-haspopup="dialog" aria-label="Open menu" class="wp-block-navigation__responsive-container-open" data-wp-on--click="actions.openMenuOnClick" data-wp-on--keydown="actions.handleMenuKeydown"><svg width="24" height="24" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" aria-hidden="true" focusable="false"><path d="M4 7.5h16v1.5H4z"></path><path d="M4 15h16v1.5H4z"></path></svg></button>
				<div class="wp-block-navigation__responsive-container" id="modal-1" data-wp-class--has-modal-open="state.isMenuOpen" data-wp-class--is-menu-open="state.isMenuOpen" data-wp-watch="callbacks.initMenu" data-wp-on--keydown="actions.handleMenuKeydown" data-wp-on--focusout="actions.handleMenuFocusout" tabindex="-1">
					<div class="wp-block-navigation__responsive-close" tabindex="-1">
						<div class="wp-block-navigation__responsive-dialog" data-wp-bind--aria-modal="state.ariaModal" data-wp-bind--aria-label="state.ariaLabel" data-wp-bind--role="state.roleAttribute">
							<button aria-label="Close menu" class="wp-block-navigation__responsive-container-close" data-wp-on--click="actions.closeMenuOnClick"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" width="24" height="24" aria-hidden="true" focusable="false"><path d="m13.06 12 6.47-6.47-1.06-1.06L12 10.94 5.53 4.47 4.47 5.53 10.94 12l-6.47 6.47 1.06 1.06L12 13.06l6.47 6.47 1.06-1.06L13.06 12Z"></path></svg></button>
							<div class="wp-block-navigation__responsive-container-content" data-wp-watch="callbacks.focusFirstElement" id="modal-1-content">
								<ul class="wp-block-navigation__container is-responsive wp-block-navigation"><li class=" wp-block-navigation-item wp-block-navigation-link"><a class="wp-block-navigation-item__content" href="https://lakshyajeet.in/blog/"><span class="wp-block-navigation-item__label">Blog</span></a></li><li class=" wp-block-navigation-item wp-block-navigation-link"><a class="wp-block-navigation-item__content" href="https://lakshyajeet.in/dm_project"><span class="wp-block-navigation-item__label">Projects</span></a></li><li class=" wp-block-navigation-item wp-block-navigation-link"><a class="wp-block-navigation-item__content" href="https://lakshyajeet.in/about/"><span class="wp-block-navigation-item__label">About</span></a></li></ul>
							</div>
						</div>
					</div>
				</div></nav></div>
</div>
</header>


<main class="wp-block-group is-layout-constrained wp-container-core-group-is-layout-bea02a06 wp-block-group-is-layout-constrained">
<div class="wp-block-cover is-light has-contrast-color has-text-color has-link-color wp-elements-66e2171ccf4754254e7e9d295c1d8aab"><span aria-hidden="true" class="wp-block-cover__background has-base-dark-background-color has-background-dim"></span><img width="1965" height="1098" src="https://lakshyajeet.in/wp-content/uploads/2026/02/craboptimize.webp" class="wp-block-cover__image-background wp-post-image" alt="" data-object-fit="cover" decoding="async" fetchpriority="high" srcset="https://lakshyajeet.in/wp-content/uploads/2026/02/craboptimize.webp 1965w, https://lakshyajeet.in/wp-content/uploads/2026/02/craboptimize-300x168.webp 300w, https://lakshyajeet.in/wp-content/uploads/2026/02/craboptimize-1024x572.webp 1024w, https://lakshyajeet.in/wp-content/uploads/2026/02/craboptimize-768x429.webp 768w, https://lakshyajeet.in/wp-content/uploads/2026/02/craboptimize-1536x858.webp 1536w" sizes="(max-width: 1965px) 100vw, 1965px"><div class="wp-block-cover__inner-container is-layout-constrained wp-block-cover-is-layout-constrained">
<div class="wp-block-group is-layout-constrained wp-container-core-group-is-layout-0747478d wp-block-group-is-layout-constrained" style="padding-top:var(--wp--preset--spacing--50);padding-right:var(--wp--preset--spacing--50);padding-bottom:var(--wp--preset--spacing--50);padding-left:var(--wp--preset--spacing--50)"><h2 class="has-text-align-left wp-block-post-title has-huge-font-size">Rust in WordPress: The Architectural overview of CrabOptimize</h2>



<div class="wp-block-post-author"><div class="wp-block-post-author__content"><p class="wp-block-post-author__name"><a href="https://lakshyajeet.in/author/lakshyajeet/" target="_blank">lakshyajeet</a></p><p class="wp-block-post-author__bio"></p></div></div></div>
</div></div>


<div class="entry-content wp-block-post-content is-layout-flow wp-block-post-content-is-layout-flow">
<p>WordPress has run on PHP for over two decades. While the jump from PHP 7.4 to the 8.0x series introduced significant performance gains through <strong>Just-In-Time (JIT) compilation</strong>, the language still functions as a high-level manager for <strong>dynamic libraries built on C code</strong> (like GD and ImageMagick) to handle performance-critical tasks. <strong>CrabOptimize</strong> represents an architectural experiment: What if we offload this heavy lifting from the WordPress server to the user’s browser using Rust and WebAssembly (WASM)?</p>



<p>This blog explores the engineering behind CrabOptimize, a plugin that brings high-performance, fully client-side enhancements to the WordPress media library. By compiling Rust, known for its memory safety and speed, into WebAssembly, we bypass the limitations of server-side processing entirely. This not only reduces CPU requirements for the server but also modernizes the WordPress media workflow by introducing concurrent, multi-threaded processing on the client-side. This is a technical deep dive into how we bridge the gap between the traditional PHP backend and a modern Rust/WASM frontend.</p>



<p><strong>Source Repository:</strong> <a href="https://github.com/DarkMatter-999/CrabOptimize/">DarkMatter-999/CrabOptimize</a></p>



<figure class="wp-block-video"><video height="1080" style="aspect-ratio: 1920 / 1080;" width="1920" autoplay controls loop muted src="https://lakshyajeet.in/wp-content/uploads/2026/02/craboptimize.mp4" playsinline></video></figure>



<h2 class="wp-block-heading">The Reality: Do We Really Need Client-Side Processing?</h2>



<p>Let’s face it, the majority of WordPress websites aren’t being overwhelmed by hundreds of simultaneous image uploads. The majority of the time, only a few editors add media to an article. This has been handled flawlessly for years by WordPress’s built-in GD and ImageMagick integrations.</p>



<p>But sticking with server-side image processing comes with headaches:</p>



<ol class="wp-block-list">
<li><strong>The Portability Nightmare:</strong> Portability is a pain. Server environments are all over the place. One host might run an ancient GD library. Another might have ImageMagick, but with missing modules for new formats like AVIF. Cheaper shared hosting can be even worse, with tight PHP memory limits that choke on large images.</li>



<li><strong>Bandwidth and Storage:</strong> New image formats like <strong>AVIF</strong> can offer a <strong>10x to 50x improvement</strong> in file size compared to traditional JPEGs, yet many WordPress environments are stuck with rigid server configs, making it tough to switch to better formats. If you run a site with user-generated content or front-end uploads, this turns into a real problem.</li>
</ol>



<p>But beyond solving practical problems, my motivation for this project was much simpler: <strong>I like Rust, and I like WordPress. Why not put them together?</strong></p>



<h2 class="wp-block-heading">Why Rust + WebAssembly?</h2>



<p>If we want to process images before they touch the server, we have to do it in the browser. But why not simply use JavaScript?<br>JavaScript is undoubtedly quick. However, when you attempt to encode an AVIF image using complex matrix math across millions of pixels, native JS becomes slow. Additionally, it is by default single-threaded. We require a powerful tool that runs directly within the browser.</p>



<p><span><strong style="font-weight: bold;">WebAssembly (WAS</strong>M)</span> provides near-native execution speed. However, it is not a language; rather, it is merely a compilation target. Other than the fact I like Rust, I chose Rust to build the engine as:</p>



<ol class="wp-block-list">
<li><strong>Zero-Cost Abstractions &amp; Speed:</strong> Without a garbage collector, Rust provides C-like performance. As a result, our compiled.wasm file is lightning fast and small (less than 500KB).</li>



<li><strong>Memory Safety:</strong> Processing images involves moving large amounts of raw data (ArrayBuffers) between the WASM module and the JavaScript heap. Rust’s stringent guidelines help us prevent memory leaks.</li>



<li><strong>The Ecosystem:</strong> The Rust ecosystem is fantastic. There are pure-Rust libraries (such as image and ravif) for features like AVIF encoding, and tools like <code>wasm-pack</code> and <code>wasm-bindgen</code> make life easier. There are also no messy dependencies on C code that are difficult to compile for WASM.</li>
</ol>



<h2 class="wp-block-heading">Intercepting the Media Library: Hijacking the Upload Stream!</h2>



<div class="wp-block-columns is-layout-flex wp-container-core-columns-is-layout-28f84493 wp-block-columns-is-layout-flex">
<div class="wp-block-column is-layout-flow wp-block-column-is-layout-flow" style="flex-basis:100%">
<p>It’s not easy to integrate Rust and WASM into WordPress’s media workflow. The primary obstacle? The sandbox for browsers. WASM cannot simply grab a file while it is uploading because it cannot directly interact with the DOM or network.</p>



<p><strong>CrabOptimize</strong> uses a JavaScript “<em>bridge</em>” to address this. Before it ever reaches the server, it replaces the original image with the optimized one after intercepting the typical WordPress upload event and sending the raw file to the Rust/WASM module for processing.</p>



<p>Standard WordPress uploads flow directly from the User Interface (UI) to the PHP Server. <code>UI -&gt; FormData -&gt; POST Request -&gt; PHP ($_FILES)</code></p>



<p>CrabOptimize alters this pipeline by injecting a client-side processing step: <code>UI -&gt; Interceptor -&gt; Rust/WASM (AVIF Conversion) -&gt; Modified FormData -&gt; POST Request -&gt; PHP</code></p>
</div>



<div class="wp-block-column is-layout-flow wp-block-column-is-layout-flow" style="flex-basis:100%">
<figure class="wp-block-image alignleft size-large is-resized"><img decoding="async" width="708" height="1024" src="https://lakshyajeet.in/wp-content/uploads/2026/02/image-3-708x1024.webp" alt="Project workflow overview." class="wp-image-1326" style="width:auto;height:600px" srcset="https://lakshyajeet.in/wp-content/uploads/2026/02/image-3-708x1024.webp 708w, https://lakshyajeet.in/wp-content/uploads/2026/02/image-3-207x300.webp 207w, https://lakshyajeet.in/wp-content/uploads/2026/02/image-3-768x1111.webp 768w, https://lakshyajeet.in/wp-content/uploads/2026/02/image-3-1062x1536.webp 1062w, https://lakshyajeet.in/wp-content/uploads/2026/02/image-3.webp 1100w" sizes="(max-width: 708px) 100vw, 708px"></figure>
</div>
</div>



<p>We target two distinct upload mechanisms in WordPress: the modern <strong>REST API (<code>apiFetch</code>)</strong> used by the Block Editor (Gutenberg), and the legacy <strong>Plupload</strong> library used in the Classic Editor and Media Modal.</p>



<h3 class="wp-block-heading">The Modern Stack: <code>apiFetch</code> Middleware</h3>



<p>The Block Editor communicates with the WordPress backend via the REST API. Specifically, it uses the <code>@wordpress/api-fetch</code> package. This package supports <strong>middleware</strong>, allowing us to inspect and modify requests before they are sent.</p>



<p>In <code><a href="https://github.com/DarkMatter-999/CrabOptimize/blob/master/assets/src/js/editor.ts">assets/src/js/editor.ts</a></code>, we register a middleware that listens specifically for media uploads.</p>



<pre class="wp-block-dm-hcb-highlighted-code-block"><button class="dm-hcb-copy hljs" data-code="// assets/src/js/editor.ts

const mediaUploadMiddleware = async ( options: any, next: any ) =&gt; {
    // 1. Detect if this is a Media Upload POST request
    if (
        'POST' === options.method &amp;&amp;
        options.path?.includes( '/wp/v2/media' ) &amp;&amp;
        options.body instanceof FormData
    ) {
        const file = options.body.get( 'file' );
        
        // 2. Filter: Only process if it's a valid File object and optimization is enabled
        if ( file instanceof File &amp;&amp; ! keepUnoptimizedFile() ) {
            
            // 3. The Bridge to Rust: processFile() wraps the WASM worker interaction
            const processed = await processFile( file ); 
            
            // 4. Client-Side Thumbnail Generation (calling Rust resizing logic)
            const originalDims = await getImageDimensions( file );
            const imageSizes = window?.dmCrabSettingsMain?.imageSizes || {};
            const thumbnails = await generateThumbnails( file, originalDims, imageSizes );

            // 5. Payload Swap: Replace original file with the WASM-generated AVIF
            options.body.set( 'file', processed, processed.name );
            
            // 6. Append Metadata: Send generated thumbnails as a JSON string
            if ( thumbnails.length &gt; 0 ) {
                options.body.append( 'crab_thumbnails', JSON.stringify( thumbnails ) );
            }
            
            // Flag the upload so PHP knows to skip server-side processing
            if ( 'image/avif' === processed.type ) {
                options.body.append( 'is_crab_optimized', 'true' );
            }
        }
    }
    // Continue the request chain
    return next( options );
};

// Register the middleware
wp.apiFetch.use( mediaUploadMiddleware );" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" width="24" height="24" aria-hidden="true"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 4.5h11a.5.5 0 0 1 .5.5v11a.5.5 0 0 1-.5.5H5a.5.5 0 0 1-.5-.5V5a.5.5 0 0 1 .5-.5ZM3 5a2 2 0 0 1 2-2h11a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5Zm17 3v10.75c0 .69-.56 1.25-1.25 1.25H6v1.5h12.75a2.75 2.75 0 0 0 2.75-2.75V8H20Z"></path></svg><span>Copy</span></button><code class="hljs language-javascript"><span class="hljs-comment">// assets/src/js/editor.ts</span>

<span class="hljs-keyword">const</span> <span class="hljs-title function_">mediaUploadMiddleware</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"> options: any, next: any </span>) =&gt; {
    <span class="hljs-comment">// 1. Detect if this is a Media Upload POST request</span>
    <span class="hljs-keyword">if</span> (
        <span class="hljs-string">&apos;POST&apos;</span> === options.<span class="hljs-property">method</span> &amp;&amp;
        options.<span class="hljs-property">path</span>?.<span class="hljs-title function_">includes</span>( <span class="hljs-string">&apos;/wp/v2/media&apos;</span> ) &amp;&amp;
        options.<span class="hljs-property">body</span> <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">FormData</span>
    ) {
        <span class="hljs-keyword">const</span> file = options.<span class="hljs-property">body</span>.<span class="hljs-title function_">get</span>( <span class="hljs-string">&apos;file&apos;</span> );
        
        <span class="hljs-comment">// 2. Filter: Only process if it&apos;s a valid File object and optimization is enabled</span>
        <span class="hljs-keyword">if</span> ( file <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">File</span> &amp;&amp; ! <span class="hljs-title function_">keepUnoptimizedFile</span>() ) {
            
            <span class="hljs-comment">// 3. The Bridge to Rust: processFile() wraps the WASM worker interaction</span>
            <span class="hljs-keyword">const</span> processed = <span class="hljs-keyword">await</span> <span class="hljs-title function_">processFile</span>( file ); 
            
            <span class="hljs-comment">// 4. Client-Side Thumbnail Generation (calling Rust resizing logic)</span>
            <span class="hljs-keyword">const</span> originalDims = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getImageDimensions</span>( file );
            <span class="hljs-keyword">const</span> imageSizes = <span class="hljs-variable language_">window</span>?.<span class="hljs-property">dmCrabSettingsMain</span>?.<span class="hljs-property">imageSizes</span> || {};
            <span class="hljs-keyword">const</span> thumbnails = <span class="hljs-keyword">await</span> <span class="hljs-title function_">generateThumbnails</span>( file, originalDims, imageSizes );

            <span class="hljs-comment">// 5. Payload Swap: Replace original file with the WASM-generated AVIF</span>
            options.<span class="hljs-property">body</span>.<span class="hljs-title function_">set</span>( <span class="hljs-string">&apos;file&apos;</span>, processed, processed.<span class="hljs-property">name</span> );
            
            <span class="hljs-comment">// 6. Append Metadata: Send generated thumbnails as a JSON string</span>
            <span class="hljs-keyword">if</span> ( thumbnails.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span> ) {
                options.<span class="hljs-property">body</span>.<span class="hljs-title function_">append</span>( <span class="hljs-string">&apos;crab_thumbnails&apos;</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>( thumbnails ) );
            }
            
            <span class="hljs-comment">// Flag the upload so PHP knows to skip server-side processing</span>
            <span class="hljs-keyword">if</span> ( <span class="hljs-string">&apos;image/avif&apos;</span> === processed.<span class="hljs-property">type</span> ) {
                options.<span class="hljs-property">body</span>.<span class="hljs-title function_">append</span>( <span class="hljs-string">&apos;is_crab_optimized&apos;</span>, <span class="hljs-string">&apos;true&apos;</span> );
            }
        }
    }
    <span class="hljs-comment">// Continue the request chain</span>
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">next</span>( options );
};

<span class="hljs-comment">// Register the middleware</span>
wp.<span class="hljs-property">apiFetch</span>.<span class="hljs-title function_">use</span>( mediaUploadMiddleware );</code></pre>



<p><strong>Key Takeaway:</strong> The <code>await processFile(file)</code> line is where the JavaScript thread yields control to the Web Worker running our Rust code. The browser UI remains responsive, but the upload request is effectively “paused” until the WASM module returns the processed binary.</p>



<h3 class="wp-block-heading">The Legacy Stack: Hijacking <code>plupload</code></h3>



<p>The classic media uploader relies on <code>plupload</code>. Unlike <code>apiFetch</code>, <code>plupload</code> doesn’t have a modern middleware system. To inject our WASM processing here, we have to be more aggressive: we wrap the global <code>plupload.Uploader</code> constructor.</p>



<p>This ensures that <em>any</em> instance of a uploader created by WordPress (or other plugins) inherits our event listeners.</p>



<pre class="wp-block-dm-hcb-highlighted-code-block"><button class="dm-hcb-copy hljs" data-code="// assets/src/js/editor.ts

const hookLegacyPlupload = () =&gt; {
    if ( ! ( window as any ).plupload ) { return; }
    
    // Store reference to original constructor
    const OriginalUploader = ( window as any ).plupload.Uploader;

    // Overwrite with our wrapper
    ( window as any ).plupload.Uploader = function ( settings: any ) {
        const instance = new OriginalUploader( settings );
        
        // Inject our event handling logic
        setupUploaderEvents( instance ); 
        
        return instance;
    };
    
    // Maintain prototype chain for compatibility
    ( window as any ).plupload.Uploader.prototype = OriginalUploader.prototype;
    Object.assign( ( window as any ).plupload.Uploader, OriginalUploader );
};" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" width="24" height="24" aria-hidden="true"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 4.5h11a.5.5 0 0 1 .5.5v11a.5.5 0 0 1-.5.5H5a.5.5 0 0 1-.5-.5V5a.5.5 0 0 1 .5-.5ZM3 5a2 2 0 0 1 2-2h11a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5Zm17 3v10.75c0 .69-.56 1.25-1.25 1.25H6v1.5h12.75a2.75 2.75 0 0 0 2.75-2.75V8H20Z"></path></svg><span>Copy</span></button><code class="hljs language-javascript"><span class="hljs-comment">// assets/src/js/editor.ts</span>

<span class="hljs-keyword">const</span> <span class="hljs-title function_">hookLegacyPlupload</span> = (<span class="hljs-params"></span>) =&gt; {
    <span class="hljs-keyword">if</span> ( ! ( <span class="hljs-variable language_">window</span> <span class="hljs-keyword">as</span> any ).<span class="hljs-property">plupload</span> ) { <span class="hljs-keyword">return</span>; }
    
    <span class="hljs-comment">// Store reference to original constructor</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title class_">OriginalUploader</span> = ( <span class="hljs-variable language_">window</span> <span class="hljs-keyword">as</span> any ).<span class="hljs-property">plupload</span>.<span class="hljs-property">Uploader</span>;

    <span class="hljs-comment">// Overwrite with our wrapper</span>
    ( <span class="hljs-variable language_">window</span> <span class="hljs-keyword">as</span> any ).<span class="hljs-property">plupload</span>.<span class="hljs-property">Uploader</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"> settings: any </span>) {
        <span class="hljs-keyword">const</span> instance = <span class="hljs-keyword">new</span> <span class="hljs-title class_">OriginalUploader</span>( settings );
        
        <span class="hljs-comment">// Inject our event handling logic</span>
        <span class="hljs-title function_">setupUploaderEvents</span>( instance ); 
        
        <span class="hljs-keyword">return</span> instance;
    };
    
    <span class="hljs-comment">// Maintain prototype chain for compatibility</span>
    ( <span class="hljs-variable language_">window</span> <span class="hljs-keyword">as</span> any ).<span class="hljs-property">plupload</span>.<span class="hljs-property">Uploader</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = <span class="hljs-title class_">OriginalUploader</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>;
    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>( ( <span class="hljs-variable language_">window</span> <span class="hljs-keyword">as</span> any ).<span class="hljs-property">plupload</span>.<span class="hljs-property">Uploader</span>, <span class="hljs-title class_">OriginalUploader</span> );
};</code></pre>



<p>In <code>setupUploaderEvents</code>, we bind to <code>BeforeUpload</code>. This is critical, <code>plupload</code> manages a queue, we must intercept the file object in the queue, pass it to our Rust worker, wait for the conversion, and then <strong>mutate the file object in the queue</strong> before <code>plupload</code> actually opens the network stream.</p>



<h3 class="wp-block-heading">Server-Side Reassembly (PHP)</h3>



<p>Once the Rust/WASM/JavaScript layer has done its job, it sends a <code>POST</code> request containing:</p>



<ol class="wp-block-list">
<li>The <strong>Main Image</strong> (now an optimized AVIF file).</li>



<li>A <strong>JSON String</strong> containing base64-encoded thumbnails (also optimized AVIFs).</li>



<li>A flag: <code>is_crab_optimized</code>.</li>
</ol>



<p>The PHP side, <code><a href="https://github.com/DarkMatter-999/CrabOptimize/blob/master/include/classes/class-media.php">class-media.php</a></code>, acts as a receiver. It doesn’t need to invoke ImageMagick or GD. It simply saves the data it receives.</p>



<pre class="wp-block-dm-hcb-highlighted-code-block"><button class="dm-hcb-copy hljs" data-code="// include/classes/class-media.php

public function handle_thumbnails( $metadata, $attachment_id ) {
    // Check if client sent pre-computed thumbnails
    if ( ! isset( $_REQUEST['crab_thumbnails'] ) ) { return $metadata; }

    // Decode the JSON payload from the WASM client
    $thumbnails = json_decode( sanitize_text_field( wp_unslash( $_REQUEST['crab_thumbnails'] ) ), true );

    $file_path  = get_attached_file( $attachment_id );
    $upload_dir = dirname( $file_path );

    foreach ( $thumbnails as $thumb ) {
        // Decode base64 AVIF data back to binary
        $decoded_data = base64_decode( $thumb['data'] ); 
        
        // Write directly to disk - No server CPU processing required
        // ... (file writing logic) ...

        // Update WordPress metadata
        $metadata['sizes'][ $size_name ] = array(
            'file'      =&gt; $thumb_filename,
            'width'     =&gt; $width,
            'height'    =&gt; $height,
            'mime-type' =&gt; 'image/avif',
        );
    }
    return $metadata;
}" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" width="24" height="24" aria-hidden="true"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 4.5h11a.5.5 0 0 1 .5.5v11a.5.5 0 0 1-.5.5H5a.5.5 0 0 1-.5-.5V5a.5.5 0 0 1 .5-.5ZM3 5a2 2 0 0 1 2-2h11a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5Zm17 3v10.75c0 .69-.56 1.25-1.25 1.25H6v1.5h12.75a2.75 2.75 0 0 0 2.75-2.75V8H20Z"></path></svg><span>Copy</span></button><code class="hljs language-php"><span class="hljs-comment">// include/classes/class-media.php</span>

<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">handle_thumbnails</span>(<span class="hljs-params"> <span class="hljs-variable">$metadata</span>, <span class="hljs-variable">$attachment_id</span> </span>) </span>{
    <span class="hljs-comment">// Check if client sent pre-computed thumbnails</span>
    <span class="hljs-keyword">if</span> ( ! <span class="hljs-keyword">isset</span>( <span class="hljs-variable">$_REQUEST</span>[<span class="hljs-string">&apos;crab_thumbnails&apos;</span>] ) ) { <span class="hljs-keyword">return</span> <span class="hljs-variable">$metadata</span>; }

    <span class="hljs-comment">// Decode the JSON payload from the WASM client</span>
    <span class="hljs-variable">$thumbnails</span> = <span class="hljs-title function_ invoke__">json_decode</span>( <span class="hljs-title function_ invoke__">sanitize_text_field</span>( <span class="hljs-title function_ invoke__">wp_unslash</span>( <span class="hljs-variable">$_REQUEST</span>[<span class="hljs-string">&apos;crab_thumbnails&apos;</span>] ) ), <span class="hljs-literal">true</span> );

    <span class="hljs-variable">$file_path</span>  = <span class="hljs-title function_ invoke__">get_attached_file</span>( <span class="hljs-variable">$attachment_id</span> );
    <span class="hljs-variable">$upload_dir</span> = <span class="hljs-title function_ invoke__">dirname</span>( <span class="hljs-variable">$file_path</span> );

    <span class="hljs-keyword">foreach</span> ( <span class="hljs-variable">$thumbnails</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$thumb</span> ) {
        <span class="hljs-comment">// Decode base64 AVIF data back to binary</span>
        <span class="hljs-variable">$decoded_data</span> = <span class="hljs-title function_ invoke__">base64_decode</span>( <span class="hljs-variable">$thumb</span>[<span class="hljs-string">&apos;data&apos;</span>] ); 
        
        <span class="hljs-comment">// Write directly to disk - No server CPU processing required</span>
        <span class="hljs-comment">// ... (file writing logic) ...</span>

        <span class="hljs-comment">// Update WordPress metadata</span>
        <span class="hljs-variable">$metadata</span>[<span class="hljs-string">&apos;sizes&apos;</span>][ <span class="hljs-variable">$size_name</span> ] = <span class="hljs-keyword">array</span>(
            <span class="hljs-string">&apos;file&apos;</span>      =&gt; <span class="hljs-variable">$thumb_filename</span>,
            <span class="hljs-string">&apos;width&apos;</span>     =&gt; <span class="hljs-variable">$width</span>,
            <span class="hljs-string">&apos;height&apos;</span>    =&gt; <span class="hljs-variable">$height</span>,
            <span class="hljs-string">&apos;mime-type&apos;</span> =&gt; <span class="hljs-string">&apos;image/avif&apos;</span>,
        );
    }
    <span class="hljs-keyword">return</span> <span class="hljs-variable">$metadata</span>;
}</code></pre>



<h2 class="wp-block-heading">The Rust Core: Compiling Image Processing to WASM</h2>



<p>We established how the upload process is intercepted by JavaScript. We currently have a File object in our memory. Converting that raw binary data (JPEG/PNG) into a highly compressed AVIF image within the browser is the difficult part.</p>



<p>Rust to WebAssembly (WASM) compilation provides speed that is nearly equal to native code. Additionally, you have control over memory and type safety, which JavaScript simply does not provide. The finest aspect? The user’s device, not your servers, is where all the hard work takes place.</p>



<h3 class="wp-block-heading">The Rust Toolchain</h3>



<p>CrabOptimize’s engine is a Rust library sitting in <code>wasm/</code>. We use <code>wasm-pack</code> to turn it into a .wasm binary and generate the JS “glue” code that hooks everything up.</p>



<p>In <code><a href="https://github.com/DarkMatter-999/CrabOptimize/blob/master/wasm/Cargo.toml">Cargo.toml</a></code>, the crate-type is <code>cdylib</code>. That’s required for WASM modules that need to talk to JavaScript.</p>



<p>Here’s what makes this work: </p>



<ul class="wp-block-list">
<li><code>wasm-bindgen</code>: This is the bridge. It lets Rust and JS share complex data, strings, arrays, objects, without headaches. </li>



<li><code>image</code>: A Rust library that decodes JPEG and PNG files into raw RGBA pixels. </li>



<li><code>ravif</code>: A pure Rust AVIF encoder. It’s fast, optimized for WASM, and doesn’t need any outside C libraries.</li>
</ul>



<h3 class="wp-block-heading">The Optimization Logic (<code>lib.rs</code>)</h3>



<p>The best part of the Rust toolchain is that we can simply mark any public function with <code>#[wasm_bindgen]</code> macro. This annotation tells the compiler: <em>“Make this function available to JavaScript.”</em></p>



<p>Here is the actual implementation from <code><a href="https://github.com/DarkMatter-999/CrabOptimize/blob/master/wasm/src/lib.rs">wasm/src/lib.rs</a></code>:</p>



<pre class="wp-block-dm-hcb-highlighted-code-block"><button class="dm-hcb-copy hljs" data-code="use image::load_from_memory;
use ravif::*;
use wasm_bindgen::prelude::*;

#[wasm_bindgen]
pub fn convert_to_avif(data: &amp;[u8], quality: f32, speed: u8) -&gt; Result&lt;Vec&lt;u8&gt;, JsValue&gt; {
    // 1. Decode the Input
    // We take a slice of bytes (&amp;[u8]) representing the raw file.
    // The 'image' crate decodes this into a dynamic image object.
    let img = load_from_memory(data)
        .map_err(|e| JsValue::from_str(&amp;e.to_string()))?
        .to_rgba8(); // We need raw RGBA pixels for the encoder

    // 2. Prepare for Encoding
    let width = img.width() as usize;
    let height = img.height() as usize;
    let pixels = img.into_raw();

    // 3. Encode to AVIF
    // 'ravif' takes the raw RGBA buffer and compresses it.
    let res = Encoder::new()
        .with_quality(quality) // 0.0 - 100.0
        .with_speed(speed)     // 0 - 10 (10 is fastest/lowest compression)
        .encode_rgba(Img::new(&amp;pixels, width, height))
        .map_err(|e| JsValue::from_str(&amp;format!(&quot;AVIF Error: {:?}&quot;, e)))?;

    // 4. Return the Result
    // We return a Vec&lt;u8&gt; (byte vector). wasm-bindgen automatically
    // converts this into a JavaScript Uint8Array.
    Ok(res.avif_file)
}" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" width="24" height="24" aria-hidden="true"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 4.5h11a.5.5 0 0 1 .5.5v11a.5.5 0 0 1-.5.5H5a.5.5 0 0 1-.5-.5V5a.5.5 0 0 1 .5-.5ZM3 5a2 2 0 0 1 2-2h11a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5Zm17 3v10.75c0 .69-.56 1.25-1.25 1.25H6v1.5h12.75a2.75 2.75 0 0 0 2.75-2.75V8H20Z"></path></svg><span>Copy</span></button><code class="hljs language-rust"><span class="hljs-keyword">use</span> image::load_from_memory;
<span class="hljs-keyword">use</span> ravif::*;
<span class="hljs-keyword">use</span> wasm_bindgen::prelude::*;

<span class="hljs-meta">#[wasm_bindgen]</span>
<span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">convert_to_avif</span>(data: &amp;[<span class="hljs-type">u8</span>], quality: <span class="hljs-type">f32</span>, speed: <span class="hljs-type">u8</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;<span class="hljs-type">Vec</span>&lt;<span class="hljs-type">u8</span>&gt;, JsValue&gt; {
    <span class="hljs-comment">// 1. Decode the Input</span>
    <span class="hljs-comment">// We take a slice of bytes (&amp;[u8]) representing the raw file.</span>
    <span class="hljs-comment">// The &apos;image&apos; crate decodes this into a dynamic image object.</span>
    <span class="hljs-keyword">let</span> <span class="hljs-variable">img</span> = <span class="hljs-title function_ invoke__">load_from_memory</span>(data)
        .<span class="hljs-title function_ invoke__">map_err</span>(|e| JsValue::<span class="hljs-title function_ invoke__">from_str</span>(&amp;e.<span class="hljs-title function_ invoke__">to_string</span>()))?
        .<span class="hljs-title function_ invoke__">to_rgba8</span>(); <span class="hljs-comment">// We need raw RGBA pixels for the encoder</span>

    <span class="hljs-comment">// 2. Prepare for Encoding</span>
    <span class="hljs-keyword">let</span> <span class="hljs-variable">width</span> = img.<span class="hljs-title function_ invoke__">width</span>() <span class="hljs-keyword">as</span> <span class="hljs-type">usize</span>;
    <span class="hljs-keyword">let</span> <span class="hljs-variable">height</span> = img.<span class="hljs-title function_ invoke__">height</span>() <span class="hljs-keyword">as</span> <span class="hljs-type">usize</span>;
    <span class="hljs-keyword">let</span> <span class="hljs-variable">pixels</span> = img.<span class="hljs-title function_ invoke__">into_raw</span>();

    <span class="hljs-comment">// 3. Encode to AVIF</span>
    <span class="hljs-comment">// &apos;ravif&apos; takes the raw RGBA buffer and compresses it.</span>
    <span class="hljs-keyword">let</span> <span class="hljs-variable">res</span> = Encoder::<span class="hljs-title function_ invoke__">new</span>()
        .<span class="hljs-title function_ invoke__">with_quality</span>(quality) <span class="hljs-comment">// 0.0 - 100.0</span>
        .<span class="hljs-title function_ invoke__">with_speed</span>(speed)     <span class="hljs-comment">// 0 - 10 (10 is fastest/lowest compression)</span>
        .<span class="hljs-title function_ invoke__">encode_rgba</span>(Img::<span class="hljs-title function_ invoke__">new</span>(&amp;pixels, width, height))
        .<span class="hljs-title function_ invoke__">map_err</span>(|e| JsValue::<span class="hljs-title function_ invoke__">from_str</span>(&amp;<span class="hljs-built_in">format!</span>(<span class="hljs-string">&quot;AVIF Error: {:?}&quot;</span>, e)))?;

    <span class="hljs-comment">// 4. Return the Result</span>
    <span class="hljs-comment">// We return a Vec&lt;u8&gt; (byte vector). wasm-bindgen automatically</span>
    <span class="hljs-comment">// converts this into a JavaScript Uint8Array.</span>
    <span class="hljs-title function_ invoke__">Ok</span>(res.avif_file)
}</code></pre>



<p>One of the most expensive operations in WASM is crossing the boundary between JavaScript and Rust, particularly when transferring big data sets like images.</p>



<ul class="wp-block-list">
<li>Input: The file is read by JS into an <code>ArrayBuffer</code>, which <code>wasm-bindgen</code> allows Rust to view as <code>&amp;[u8]</code>.</li>



<li>Processing: The image is decoded into raw RGBA pixels by Rust.</li>



<li>Output: ravif compresses it into a new Vec&lt;u8&gt;, AVIF image. </li>



<li>Return: After Rust returns Vec&lt;u8&gt; back, and <code>wasm-bindgen</code> converts it to a <code>Uint8Array</code> for JavaScript.</li>
</ul>



<p>This copy overhead is negligible compared to the time saved by using WASM for the compression algorithm itself when compared to JavaScript.</p>



<h3 class="wp-block-heading">Dynamic Resizing in Rust</h3>



<p>CrabOptimize doesn’t just convert; it resizes too. That’s handy for thumbnails and previews (more on that later). Here’s the second function:</p>



<pre class="wp-block-dm-hcb-highlighted-code-block"><button class="dm-hcb-copy hljs" data-code="use image::imageops::FilterType;

#[wasm_bindgen]
pub fn convert_to_avif_resize(
    data: &amp;[u8], 
    quality: f32, 
    speed: u8, 
    target_width: u32, 
    target_height: u32, 
    crop: bool
) -&gt; Result&lt;Vec&lt;u8&gt;, JsValue&gt; {
    
    let mut img = load_from_memory(data)
        .map_err(|e| JsValue::from_str(&amp;e.to_string()))?;

    // Perform Resizing / Cropping using Rust's 'image' crate
    if crop {
        img = img.resize_to_fill(target_width, target_height, FilterType::Lanczos3);
    } else {
        img = img.resize(target_width, target_height, FilterType::Lanczos3);
    }

    let rgba = img.to_rgba8();
    
    // ... encoding logic (same as above) ...
}" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" width="24" height="24" aria-hidden="true"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 4.5h11a.5.5 0 0 1 .5.5v11a.5.5 0 0 1-.5.5H5a.5.5 0 0 1-.5-.5V5a.5.5 0 0 1 .5-.5ZM3 5a2 2 0 0 1 2-2h11a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5Zm17 3v10.75c0 .69-.56 1.25-1.25 1.25H6v1.5h12.75a2.75 2.75 0 0 0 2.75-2.75V8H20Z"></path></svg><span>Copy</span></button><code class="hljs language-rust"><span class="hljs-keyword">use</span> image::imageops::FilterType;

<span class="hljs-meta">#[wasm_bindgen]</span>
<span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">convert_to_avif_resize</span>(
    data: &amp;[<span class="hljs-type">u8</span>], 
    quality: <span class="hljs-type">f32</span>, 
    speed: <span class="hljs-type">u8</span>, 
    target_width: <span class="hljs-type">u32</span>, 
    target_height: <span class="hljs-type">u32</span>, 
    crop: <span class="hljs-type">bool</span>
) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;<span class="hljs-type">Vec</span>&lt;<span class="hljs-type">u8</span>&gt;, JsValue&gt; {
    
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">img</span> = <span class="hljs-title function_ invoke__">load_from_memory</span>(data)
        .<span class="hljs-title function_ invoke__">map_err</span>(|e| JsValue::<span class="hljs-title function_ invoke__">from_str</span>(&amp;e.<span class="hljs-title function_ invoke__">to_string</span>()))?;

    <span class="hljs-comment">// Perform Resizing / Cropping using Rust&apos;s &apos;image&apos; crate</span>
    <span class="hljs-keyword">if</span> crop {
        img = img.<span class="hljs-title function_ invoke__">resize_to_fill</span>(target_width, target_height, FilterType::Lanczos3);
    } <span class="hljs-keyword">else</span> {
        img = img.<span class="hljs-title function_ invoke__">resize</span>(target_width, target_height, FilterType::Lanczos3);
    }

    <span class="hljs-keyword">let</span> <span class="hljs-variable">rgba</span> = img.<span class="hljs-title function_ invoke__">to_rgba8</span>();
    
    <span class="hljs-comment">// ... encoding logic (same as above) ...</span>
}</code></pre>



<h2 class="wp-block-heading">The Hybrid Build Pipeline: Cargo meets npm</h2>



<p>CrabOptimize’s development was not like other plugin projects. It is a combination of PHP, React, and Rust. Each feature requires working with code written in three distinct languages:</p>



<ul class="wp-block-list">
<li>PHP for the server-side logic and hooks </li>



<li>TypeScript for the client UI and interception </li>



<li>Rust for the primary image processing system</li>
</ul>



<p>It’ll be very repetitive and tiring if you attempted to manually construct every component-<code>cargo build</code>, <code>tsc</code>, copy files, and lint PHP. I therefore combined everything into a single build pipeline. All three languages are synchronized with a single command.</p>



<h3 class="wp-block-heading">1. <code>npm</code>: The Brains of the Operation</h3>



<p>We treat <code><a href="https://github.com/DarkMatter-999/CrabOptimize/blob/master/package.json">package.json</a></code> as the main control. Although Rust has its own build tools, setup is made simple by using npm scripts to wrap everything. You’re ready if you have Rust and Node.js. The standard suspects, Webpack, Babel, and SCSS, are handled by <code>@wordpress/scripts</code>. However, it is unaware of our WebAssembly requirements. Thus, we include a pre-build phase.</p>



<pre class="wp-block-dm-hcb-highlighted-code-block"><button class="dm-hcb-copy hljs" data-code="// package.json

&quot;scripts&quot;: {
    // 1. The Rust Step: Compile WASM first
    &quot;build:wasm&quot;: &quot;wasm-pack build wasm --target web --out-dir ../assets/wasm&quot;,
    
    // 2. The JS Step: Bundle TS and link the WASM glue code
    &quot;build:js&quot;: &quot;wp-scripts build --webpack-src-dir=assets/src --output-path=assets/build&quot;,
    
    // 3. The Combined Command
    &quot;build&quot;: &quot;npm run build:wasm &amp;&amp; npm run build:js&quot;,
    
    // 4. Dev Mode: Watch for changes
    &quot;start&quot;: &quot;npm run build:wasm &amp;&amp; wp-scripts start --webpack-src-dir=assets/src --output-path=assets/build&quot;
}," type="button"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" width="24" height="24" aria-hidden="true"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 4.5h11a.5.5 0 0 1 .5.5v11a.5.5 0 0 1-.5.5H5a.5.5 0 0 1-.5-.5V5a.5.5 0 0 1 .5-.5ZM3 5a2 2 0 0 1 2-2h11a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5Zm17 3v10.75c0 .69-.56 1.25-1.25 1.25H6v1.5h12.75a2.75 2.75 0 0 0 2.75-2.75V8H20Z"></path></svg><span>Copy</span></button><code class="hljs language-json"><span class="hljs-comment">// package.json</span>

<span class="hljs-attr">&quot;scripts&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-comment">// 1. The Rust Step: Compile WASM first</span>
    <span class="hljs-attr">&quot;build:wasm&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;wasm-pack build wasm --target web --out-dir ../assets/wasm&quot;</span><span class="hljs-punctuation">,</span>
    
    <span class="hljs-comment">// 2. The JS Step: Bundle TS and link the WASM glue code</span>
    <span class="hljs-attr">&quot;build:js&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;wp-scripts build --webpack-src-dir=assets/src --output-path=assets/build&quot;</span><span class="hljs-punctuation">,</span>
    
    <span class="hljs-comment">// 3. The Combined Command</span>
    <span class="hljs-attr">&quot;build&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;npm run build:wasm &amp;&amp; npm run build:js&quot;</span><span class="hljs-punctuation">,</span>
    
    <span class="hljs-comment">// 4. Dev Mode: Watch for changes</span>
    <span class="hljs-attr">&quot;start&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;npm run build:wasm &amp;&amp; wp-scripts start --webpack-src-dir=assets/src --output-path=assets/build&quot;</span>
<span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span></code></pre>



<p><br>The workflow goes like this:</p>



<ul class="wp-block-list">
<li><code>npm run build</code>:wasm kicks off <code>wasm-pack</code>, which compiles our Rust code (<code>wasm/src/lib.rs</code>) into a .wasm file and spits out the matching JS glue code. </li>



<li><code>npm run build:js</code> fires up Webpack to bundle the TypeScript, which imports that WASM glue from the first step. </li>



<li>Webpack bundles everything into <code>editor.js</code>, ready for the browser.</li>
</ul>



<h3 class="wp-block-heading">2. Rust and Webpack: Making WASM Play Nice</h3>



<p>Webpack doesn’t really know what to do with .wasm files, right out of the box or the glue code that <code>wasm-pack</code> produces. Things become jumbled even with Webpack 5’s experimental WASM support. With <code>--target web</code>, we allow <code>wasm-pack</code> to do the heavy lifting and provide us with ES modules that we can import straight away.<br>We load the module in our TypeScript using dynamic imports:</p>



<pre class="wp-block-dm-hcb-highlighted-code-block"><button class="dm-hcb-copy hljs" data-code="// assets/src/js/crab-worker.ts

// We import the init function and specific methods from the pkg folder 
// generated by step 1 of the build process.
import init, { convert_to_avif } from '../../../wasm/pkg/craboptimize_wasm';

// ...
await init(); // Boot the WASM module
// ..." type="button"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" width="24" height="24" aria-hidden="true"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 4.5h11a.5.5 0 0 1 .5.5v11a.5.5 0 0 1-.5.5H5a.5.5 0 0 1-.5-.5V5a.5.5 0 0 1 .5-.5ZM3 5a2 2 0 0 1 2-2h11a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5Zm17 3v10.75c0 .69-.56 1.25-1.25 1.25H6v1.5h12.75a2.75 2.75 0 0 0 2.75-2.75V8H20Z"></path></svg><span>Copy</span></button><code class="hljs language-javascript"><span class="hljs-comment">// assets/src/js/crab-worker.ts</span>

<span class="hljs-comment">// We import the init function and specific methods from the pkg folder </span>
<span class="hljs-comment">// generated by step 1 of the build process.</span>
<span class="hljs-keyword">import</span> init, { convert_to_avif } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;../../../wasm/pkg/craboptimize_wasm&apos;</span>;

<span class="hljs-comment">// ...</span>
<span class="hljs-keyword">await</span> <span class="hljs-title function_">init</span>(); <span class="hljs-comment">// Boot the WASM module</span>
<span class="hljs-comment">// ...</span></code></pre>



<p>This works because <code>npm run build:wasm</code> runs <em>before</em> Webpack starts looking for files.</p>



<h3 class="wp-block-heading">3. Enforcing Quality Across 3 Languages</h3>



<p>If you mess up in Rust, you can crash the worker. Screw up TypeScript, break the UI. Botch PHP, and you might take down the server. So, its good to be strict about code quality everywhere.</p>



<ul class="wp-block-list">
<li><strong>PHP</strong>: We use <code>PHP_CodeSniffer</code> and stick to WordPress Coding Standards. </li>



<li><strong>JavaScript/TypeScript</strong>: ESLint and Prettier (through <code>@wordpress/scripts</code>) keep our React and TS code clean. </li>



<li><strong>Rust</strong>: <code>cargo fmt</code> auto-formats our code, and <code>cargo clippy</code> catches mistakes and performance issues.</li>
</ul>



<h2 class="wp-block-heading">Multithreading in the Browser: Workers &amp; Queues</h2>



<p>We looked at how CrabOptimize generates a whole batch of thumbnails for every upload. When a user uploads a large raw image (20 MB), the browser must first decode it, resize and encode it multiple times.</p>



<p>The WordPress editor would simply lock up if we attempted to accomplish all of that on the Main Thread, which is the one running your user interface. No typing, no scrolling, and most definitely no “Publish”; a “Page Unresponsive” alert may even appear. Not the best. What is the answer, then? Web Workers are used by CrabOptimize to enable multi-threading. We approach the browser as a multilane highway rather than a one-way street. We distribute the workload evenly among CPU cores while maintaining a fluid user interface throughout.</p>



<h3 class="wp-block-heading">The Worker: An Isolated Rust Environment</h3>



<p>A Web Worker has its own memory and operates in a separate thread. It can run WebAssembly but is unable to access the DOM. Our Rust code is hosted by a worker script that we created in <a href="https://github.com/DarkMatter-999/CrabOptimize/blob/master/assets/src/js/crab-worker.ts">assets/src/js/crab-worker.ts</a>.</p>



<ul class="wp-block-list">
<li>When a message arrives, the worker unpacks the data: file buffer, file name, quality, speed, width, height, crop settings. </li>



<li>It loads the WASM binary only once per worker. No need to download it multiple times. </li>



<li>It converts the file buffer into a format Rust can process. </li>



<li>Then it runs the Rust code. This blocks the worker thread, but the Main Thread stays free-so the UI doesn’t stutter. </li>



<li>When it’s finished, it uses Transferable Objects to send the AVIF buffer back to the main thread. No copying, just instant memory transfer. </li>



<li>If something fails, the worker catches the error and sends it back. </li>
</ul>



<pre class="wp-block-dm-hcb-highlighted-code-block"><button class="dm-hcb-copy hljs" data-code="// assets/src/js/crab-worker.ts
import init, { convert_to_avif, convert_to_avif_resize } from '../../../wasm/pkg/craboptimize_wasm';

let wasmReady = false;

self.onmessage = async ( e: MessageEvent ) =&gt; {
    // 1. Unpack Payload
    const { fileBuffer, fileName, quality, speed, width, height, crop } = e.data;

    // 2. Initialize WASM (Lazy Loading)
    // We only load the .wasm binary once per worker to save bandwidth/time
    if ( ! wasmReady ) {
        await init();
        wasmReady = true;
    }

    try {
        // 3. Zero-Copy Transfer
        // We cast the buffer to a view that Rust can understand
        const input = new Uint8Array( fileBuffer );
        
        // 4. Execute Rust Logic
        // This blocks the Worker thread, but NOT the Main thread
        const avif = width &gt; 0 &amp;&amp; height &gt; 0
            ? convert_to_avif_resize( input, quality, speed, width, height, crop )
            : convert_to_avif( input, quality, speed );

        // 5. Return Result
        // We use 'Transferable Objects' ([avif.buffer]) to move memory 
        // back to the main thread instantly without copying.
        self.postMessage(
            { 
                avifBuffer: avif.buffer, 
                fileName: fileName.replace( /\.[^/.]+$/, '' ) + '.avif' 
            },
            [ avif.buffer ] as any 
        );
    } catch ( err ) {
        self.postMessage( { error: err.message } );
    }
};" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" width="24" height="24" aria-hidden="true"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 4.5h11a.5.5 0 0 1 .5.5v11a.5.5 0 0 1-.5.5H5a.5.5 0 0 1-.5-.5V5a.5.5 0 0 1 .5-.5ZM3 5a2 2 0 0 1 2-2h11a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5Zm17 3v10.75c0 .69-.56 1.25-1.25 1.25H6v1.5h12.75a2.75 2.75 0 0 0 2.75-2.75V8H20Z"></path></svg><span>Copy</span></button><code class="hljs language-javascript"><span class="hljs-comment">// assets/src/js/crab-worker.ts</span>
<span class="hljs-keyword">import</span> init, { convert_to_avif, convert_to_avif_resize } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;../../../wasm/pkg/craboptimize_wasm&apos;</span>;

<span class="hljs-keyword">let</span> wasmReady = <span class="hljs-literal">false</span>;

self.<span class="hljs-property">onmessage</span> = <span class="hljs-title function_">async</span> ( <span class="hljs-attr">e</span>: <span class="hljs-title class_">MessageEvent</span> ) =&gt; {
    <span class="hljs-comment">// 1. Unpack Payload</span>
    <span class="hljs-keyword">const</span> { fileBuffer, fileName, quality, speed, width, height, crop } = e.<span class="hljs-property">data</span>;

    <span class="hljs-comment">// 2. Initialize WASM (Lazy Loading)</span>
    <span class="hljs-comment">// We only load the .wasm binary once per worker to save bandwidth/time</span>
    <span class="hljs-keyword">if</span> ( ! wasmReady ) {
        <span class="hljs-keyword">await</span> <span class="hljs-title function_">init</span>();
        wasmReady = <span class="hljs-literal">true</span>;
    }

    <span class="hljs-keyword">try</span> {
        <span class="hljs-comment">// 3. Zero-Copy Transfer</span>
        <span class="hljs-comment">// We cast the buffer to a view that Rust can understand</span>
        <span class="hljs-keyword">const</span> input = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>( fileBuffer );
        
        <span class="hljs-comment">// 4. Execute Rust Logic</span>
        <span class="hljs-comment">// This blocks the Worker thread, but NOT the Main thread</span>
        <span class="hljs-keyword">const</span> avif = width &gt; <span class="hljs-number">0</span> &amp;&amp; height &gt; <span class="hljs-number">0</span>
            ? <span class="hljs-title function_">convert_to_avif_resize</span>( input, quality, speed, width, height, crop )
            : <span class="hljs-title function_">convert_to_avif</span>( input, quality, speed );

        <span class="hljs-comment">// 5. Return Result</span>
        <span class="hljs-comment">// We use &apos;Transferable Objects&apos; ([avif.buffer]) to move memory </span>
        <span class="hljs-comment">// back to the main thread instantly without copying.</span>
        self.<span class="hljs-title function_">postMessage</span>(
            { 
                <span class="hljs-attr">avifBuffer</span>: avif.<span class="hljs-property">buffer</span>, 
                <span class="hljs-attr">fileName</span>: fileName.<span class="hljs-title function_">replace</span>( <span class="hljs-regexp">/\.[^/.]+$/</span>, <span class="hljs-string">&apos;&apos;</span> ) + <span class="hljs-string">&apos;.avif&apos;</span> 
            },
            [ avif.<span class="hljs-property">buffer</span> ] <span class="hljs-keyword">as</span> any 
        );
    } <span class="hljs-keyword">catch</span> ( err ) {
        self.<span class="hljs-title function_">postMessage</span>( { <span class="hljs-attr">error</span>: err.<span class="hljs-property">message</span> } );
    }
};</code></pre>



<p>Performance note: That buffer transfer is crucial. By transferring memory ownership, we avoid the slow and wasteful process of cloning large images between threads.</p>



<h3 class="wp-block-heading">The Queue: Managing Concurrency</h3>



<div class="wp-block-group is-layout-constrained wp-block-group-is-layout-constrained">
<p>We would undoubtedly run out of memory and most likely crash the browser if we started a new Worker for each thumbnail, perhaps 50 at once for a big upload. We use a scheduler (CrabQueue) for this reason.</p>



<p>Depending on the user’s hardware, CrabQueue regulates the number of workers that can operate simultaneously. In order to make efficient use of the CPU without overtaxing it, it restricts the number of concurrent tasks. Every time you add a task, CrabQueue decides whether to queue it or start it right away. It selects and initiates the next task when a slot becomes available. It looks for any pending tasks after a task is finished. Processing proceeds without overtaxing the system in this manner.</p>
</div>



<pre class="wp-block-dm-hcb-highlighted-code-block"><button class="dm-hcb-copy hljs" data-code="// assets/src/js/crab-queue.ts

// Determine logical cores. 
// Cap at 6 to prevent hogging all resources on high-end machines.
// Min at 2 to ensure some parallelism.
const MAX_CONCURRENCY = Math.min( navigator.hardwareConcurrency || 2, 6 );

export class CrabQueue {
    private running = 0;
    private queue: Array&lt;{ task: () =&gt; Promise&lt;any&gt;, resolve: any, reject: any }&gt; = [];

    // Add a task to the pile
    async add&lt;T&gt;( task: () =&gt; Promise&lt;T&gt; ): Promise&lt;T&gt; {
        return new Promise( ( resolve, reject ) =&gt; {
            this.queue.push( { task, resolve, reject } );
            this.process(); // Trigger the loop
        });
    }

    private async process() {
        // Stop if we hit the limit or run out of tasks
        if ( this.running &gt;= MAX_CONCURRENCY || this.queue.length === 0 ) {
            return;
        }

        // Dequeue next job
        this.running++;
        const { task, resolve, reject } = this.queue.shift()!;

        try {
            const result = await task(); // Spawn the worker
            resolve( result );
        } catch ( err ) {
            reject( err );
        } finally {
            this.running--;
            this.process(); // Recursively check for next job
        }
    }
}" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" width="24" height="24" aria-hidden="true"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 4.5h11a.5.5 0 0 1 .5.5v11a.5.5 0 0 1-.5.5H5a.5.5 0 0 1-.5-.5V5a.5.5 0 0 1 .5-.5ZM3 5a2 2 0 0 1 2-2h11a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5Zm17 3v10.75c0 .69-.56 1.25-1.25 1.25H6v1.5h12.75a2.75 2.75 0 0 0 2.75-2.75V8H20Z"></path></svg><span>Copy</span></button><code class="hljs language-javascript"><span class="hljs-comment">// assets/src/js/crab-queue.ts</span>

<span class="hljs-comment">// Determine logical cores. </span>
<span class="hljs-comment">// Cap at 6 to prevent hogging all resources on high-end machines.</span>
<span class="hljs-comment">// Min at 2 to ensure some parallelism.</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">MAX_CONCURRENCY</span> = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>( navigator.<span class="hljs-property">hardwareConcurrency</span> || <span class="hljs-number">2</span>, <span class="hljs-number">6</span> );

<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CrabQueue</span> {
    private running = <span class="hljs-number">0</span>;
    private <span class="hljs-attr">queue</span>: <span class="hljs-title class_">Array</span>&lt;{ <span class="hljs-attr">task</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title class_">Promise</span>&lt;any&gt;, <span class="hljs-attr">resolve</span>: any, <span class="hljs-attr">reject</span>: any }&gt; = [];

    <span class="hljs-comment">// Add a task to the pile</span>
    <span class="hljs-keyword">async</span> add&lt;T&gt;( <span class="hljs-attr">task</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title class_">Promise</span>&lt;T&gt; ): <span class="hljs-title class_">Promise</span>&lt;T&gt; {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>( <span class="hljs-function">(<span class="hljs-params"> resolve, reject </span>) =&gt;</span> {
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">queue</span>.<span class="hljs-title function_">push</span>( { task, resolve, reject } );
            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">process</span>(); <span class="hljs-comment">// Trigger the loop</span>
        });
    }

    private <span class="hljs-keyword">async</span> <span class="hljs-title function_">process</span>(<span class="hljs-params"></span>) {
        <span class="hljs-comment">// Stop if we hit the limit or run out of tasks</span>
        <span class="hljs-keyword">if</span> ( <span class="hljs-variable language_">this</span>.<span class="hljs-property">running</span> &gt;= <span class="hljs-variable constant_">MAX_CONCURRENCY</span> || <span class="hljs-variable language_">this</span>.<span class="hljs-property">queue</span>.<span class="hljs-property">length</span> === <span class="hljs-number">0</span> ) {
            <span class="hljs-keyword">return</span>;
        }

        <span class="hljs-comment">// Dequeue next job</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">running</span>++;
        <span class="hljs-keyword">const</span> { task, resolve, reject } = <span class="hljs-variable language_">this</span>.<span class="hljs-property">queue</span>.<span class="hljs-title function_">shift</span>()!;

        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-title function_">task</span>(); <span class="hljs-comment">// Spawn the worker</span>
            <span class="hljs-title function_">resolve</span>( result );
        } <span class="hljs-keyword">catch</span> ( err ) {
            <span class="hljs-title function_">reject</span>( err );
        } <span class="hljs-keyword">finally</span> {
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">running</span>--;
            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">process</span>(); <span class="hljs-comment">// Recursively check for next job</span>
        }
    }
}</code></pre>



<h3 class="wp-block-heading">The Orchestration</h3>



<p>When the user drops a file, <code>processFile</code> wraps the worker interaction inside a closure and submits it to the <code>CrabQueue</code>.</p>



<pre class="wp-block-dm-hcb-highlighted-code-block"><button class="dm-hcb-copy hljs" data-code="// assets/src/js/editor.ts

// Global queue instance
const crabQueue = new CrabQueue();

const processFile = ( file: File, ...args ): Promise&lt;File&gt; =&gt; {
    
    // We don't run immediately. We ask the queue.
    return crabQueue.add( async () =&gt; {
        return new Promise( ( resolve, reject ) =&gt; {
            
            // Spin up a worker for this specific job
            const worker = new Worker( 
                new URL( './crab-worker.ts', import.meta.url ) 
            );
            
            // ... handle messages ...
            
            // Send data to worker
            worker.postMessage( /* payload */, [ buffer ] );
        });
    });
};" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" width="24" height="24" aria-hidden="true"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 4.5h11a.5.5 0 0 1 .5.5v11a.5.5 0 0 1-.5.5H5a.5.5 0 0 1-.5-.5V5a.5.5 0 0 1 .5-.5ZM3 5a2 2 0 0 1 2-2h11a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5Zm17 3v10.75c0 .69-.56 1.25-1.25 1.25H6v1.5h12.75a2.75 2.75 0 0 0 2.75-2.75V8H20Z"></path></svg><span>Copy</span></button><code class="hljs language-javascript"><span class="hljs-comment">// assets/src/js/editor.ts</span>

<span class="hljs-comment">// Global queue instance</span>
<span class="hljs-keyword">const</span> crabQueue = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CrabQueue</span>();

<span class="hljs-keyword">const</span> processFile = ( <span class="hljs-attr">file</span>: <span class="hljs-title class_">File</span>, ...args ): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">File</span>&gt; =&gt; {
    
    <span class="hljs-comment">// We don&apos;t run immediately. We ask the queue.</span>
    <span class="hljs-keyword">return</span> crabQueue.<span class="hljs-title function_">add</span>( <span class="hljs-title function_">async</span> () =&gt; {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>( <span class="hljs-function">(<span class="hljs-params"> resolve, reject </span>) =&gt;</span> {
            
            <span class="hljs-comment">// Spin up a worker for this specific job</span>
            <span class="hljs-keyword">const</span> worker = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Worker</span>( 
                <span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>( <span class="hljs-string">&apos;./crab-worker.ts&apos;</span>, <span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">url</span> ) 
            );
            
            <span class="hljs-comment">// ... handle messages ...</span>
            
            <span class="hljs-comment">// Send data to worker</span>
            worker.<span class="hljs-title function_">postMessage</span>( <span class="hljs-comment">/* payload */</span>, [ buffer ] );
        });
    });
};</code></pre>



<h3 class="wp-block-heading">The Result: Scalable Performance<a href="http://localhost:6419/04.md#the-result-scalable-performance"></a></h3>



<p>By combining <strong>Web Workers</strong> with a <strong>Concurrency Queue</strong>, CrabOptimize achieves a balance between speed and stability:</p>



<ol class="wp-block-list">
<li><strong>Responsiveness:</strong> The UI thread never handles image processing. The editor remains fluid.</li>



<li><strong>Scalability:</strong> A user on a powerful desktop (16 cores) will process images significantly faster than a user on a budget laptop (2 cores), as the queue automatically adjusts <code>MAX_CONCURRENCY</code>.</li>



<li><strong>Stability:</strong> The queue prevents “Out of Memory” crashes during bulk uploads.</li>
</ol>



<h2 class="wp-block-heading">State Management: Passing Data from PHP to WASM</h2>



<p>We’ve got this lightning-fast image engine, but let’s face it: users don’t want a black box. They wish to change thumbnails, reduce file sizes, adjust quality, or maintain backups. All of a sudden, you’re dealing with a state management problem that affects the entire stack rather than just building an engine.</p>



<p>This creates a distributed state problem.</p>



<ol class="wp-block-list">
<li><strong>The Source of Truth:</strong> The configuration lives in the WordPress Database (MySQL), managed by <strong>PHP</strong>.</li>



<li><strong>The Orchestrator:</strong> The upload logic lives in the Browser’s Main Thread, managed by <strong>JavaScript</strong>.</li>



<li><strong>The Executioner:</strong> The image processing lives in a background Worker Thread, managed by <strong>Rust/WASM</strong>.</li>
</ol>



<p>Data must flow seamlessly through this chain: <code>DB -&gt; PHP -&gt; HTML -&gt; JS -&gt; Worker -&gt; WASM</code>. </p>



<h3 class="wp-block-heading">1. The Source: WordPress Settings API (PHP)</h3>



<p>Everything begins with the WordPress Settings API. Inside <code><a href="https://github.com/DarkMatter-999/CrabOptimize/blob/master/include/classes/class-settings.php">include/classes/class-settings.php</a></code>, we register all the toggles and sliders users want:</p>



<pre class="wp-block-dm-hcb-highlighted-code-block"><button class="dm-hcb-copy hljs" data-code="// include/classes/class-settings.php

public function register_settings() {
    register_setting( 'dm_crab_optimize_settings_group', 'dm_crab_optimize_quality', array(
        'type' =&gt; 'number',
        'sanitize_callback' =&gt; array( $this, 'sanitize_quality' ), // Ensure 0-100
        'default' =&gt; 70
    ) );
    
    register_setting( 'dm_crab_optimize_settings_group', 'dm_crab_optimize_speed', array(
        'type' =&gt; 'integer', 
        'sanitize_callback' =&gt; array( $this, 'sanitize_speed' ), // Ensure 0-10
        'default' =&gt; 6 
    ) );
    
    // ... toggles for keeping originals, generating thumbs, etc.
}" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" width="24" height="24" aria-hidden="true"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 4.5h11a.5.5 0 0 1 .5.5v11a.5.5 0 0 1-.5.5H5a.5.5 0 0 1-.5-.5V5a.5.5 0 0 1 .5-.5ZM3 5a2 2 0 0 1 2-2h11a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5Zm17 3v10.75c0 .69-.56 1.25-1.25 1.25H6v1.5h12.75a2.75 2.75 0 0 0 2.75-2.75V8H20Z"></path></svg><span>Copy</span></button><code class="hljs language-php"><span class="hljs-comment">// include/classes/class-settings.php</span>

<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">register_settings</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-title function_ invoke__">register_setting</span>( <span class="hljs-string">&apos;dm_crab_optimize_settings_group&apos;</span>, <span class="hljs-string">&apos;dm_crab_optimize_quality&apos;</span>, <span class="hljs-keyword">array</span>(
        <span class="hljs-string">&apos;type&apos;</span> =&gt; <span class="hljs-string">&apos;number&apos;</span>,
        <span class="hljs-string">&apos;sanitize_callback&apos;</span> =&gt; <span class="hljs-keyword">array</span>( <span class="hljs-variable">$this</span>, <span class="hljs-string">&apos;sanitize_quality&apos;</span> ), <span class="hljs-comment">// Ensure 0-100</span>
        <span class="hljs-string">&apos;default&apos;</span> =&gt; <span class="hljs-number">70</span>
    ) );
    
    <span class="hljs-title function_ invoke__">register_setting</span>( <span class="hljs-string">&apos;dm_crab_optimize_settings_group&apos;</span>, <span class="hljs-string">&apos;dm_crab_optimize_speed&apos;</span>, <span class="hljs-keyword">array</span>(
        <span class="hljs-string">&apos;type&apos;</span> =&gt; <span class="hljs-string">&apos;integer&apos;</span>, 
        <span class="hljs-string">&apos;sanitize_callback&apos;</span> =&gt; <span class="hljs-keyword">array</span>( <span class="hljs-variable">$this</span>, <span class="hljs-string">&apos;sanitize_speed&apos;</span> ), <span class="hljs-comment">// Ensure 0-10</span>
        <span class="hljs-string">&apos;default&apos;</span> =&gt; <span class="hljs-number">6</span> 
    ) );
    
    <span class="hljs-comment">// ... toggles for keeping originals, generating thumbs, etc.</span>
}</code></pre>



<h3 class="wp-block-heading">2. The Bridge: Embedding State in the DOM</h3>



<p>Browsers can’t directly reach into MySQL. So, we use send the settings by en-queuing the values inside scripts to pull PHP values and inject them as a JSON object on the window.</p>



<p>During the <code>admin_enqueue_scripts</code> hook, we fetch the values from the database and serialize them into a JSON object attached to the global <code>window</code> object.</p>



<pre class="wp-block-dm-hcb-highlighted-code-block"><button class="dm-hcb-copy hljs" data-code="// include/classes/class-assets.php

public function enqueue_settings_script() {
    // 1. Fetch from DB
    $quality = (float) get_option( 'dm_crab_optimize_quality', 70 );
    $speed   = (int) get_option( 'dm_crab_optimize_speed', 6 );
    $sizes   = wp_get_registered_image_subsizes();

    // 2. Serialize to JSON
    $data = array(
        'quality'            =&gt; $quality,
        'speed'              =&gt; $speed,
        'imageSizes'         =&gt; $sizes,
        'saveUnoptimized'    =&gt; (bool) get_option( 'dm_crab_optimize_keep_optimized', 0 ),
        'generateThumbnails' =&gt; (bool) get_option( 'dm_crab_optimize_generate_thumbnails', 0 ),
    );

    // 3. Inject into HTML head
    wp_add_inline_script(
        'dm-crab-settings-main',
        'window.dmCrabSettingsMain = ' . wp_json_encode( $data ) . ';',
        'before'
    );
}" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" width="24" height="24" aria-hidden="true"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 4.5h11a.5.5 0 0 1 .5.5v11a.5.5 0 0 1-.5.5H5a.5.5 0 0 1-.5-.5V5a.5.5 0 0 1 .5-.5ZM3 5a2 2 0 0 1 2-2h11a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5Zm17 3v10.75c0 .69-.56 1.25-1.25 1.25H6v1.5h12.75a2.75 2.75 0 0 0 2.75-2.75V8H20Z"></path></svg><span>Copy</span></button><code class="hljs language-php"><span class="hljs-comment">// include/classes/class-assets.php</span>

<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">enqueue_settings_script</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-comment">// 1. Fetch from DB</span>
    <span class="hljs-variable">$quality</span> = (<span class="hljs-keyword">float</span>) <span class="hljs-title function_ invoke__">get_option</span>( <span class="hljs-string">&apos;dm_crab_optimize_quality&apos;</span>, <span class="hljs-number">70</span> );
    <span class="hljs-variable">$speed</span>   = (<span class="hljs-keyword">int</span>) <span class="hljs-title function_ invoke__">get_option</span>( <span class="hljs-string">&apos;dm_crab_optimize_speed&apos;</span>, <span class="hljs-number">6</span> );
    <span class="hljs-variable">$sizes</span>   = <span class="hljs-title function_ invoke__">wp_get_registered_image_subsizes</span>();

    <span class="hljs-comment">// 2. Serialize to JSON</span>
    <span class="hljs-variable">$data</span> = <span class="hljs-keyword">array</span>(
        <span class="hljs-string">&apos;quality&apos;</span>            =&gt; <span class="hljs-variable">$quality</span>,
        <span class="hljs-string">&apos;speed&apos;</span>              =&gt; <span class="hljs-variable">$speed</span>,
        <span class="hljs-string">&apos;imageSizes&apos;</span>         =&gt; <span class="hljs-variable">$sizes</span>,
        <span class="hljs-string">&apos;saveUnoptimized&apos;</span>    =&gt; (<span class="hljs-keyword">bool</span>) <span class="hljs-title function_ invoke__">get_option</span>( <span class="hljs-string">&apos;dm_crab_optimize_keep_optimized&apos;</span>, <span class="hljs-number">0</span> ),
        <span class="hljs-string">&apos;generateThumbnails&apos;</span> =&gt; (<span class="hljs-keyword">bool</span>) <span class="hljs-title function_ invoke__">get_option</span>( <span class="hljs-string">&apos;dm_crab_optimize_generate_thumbnails&apos;</span>, <span class="hljs-number">0</span> ),
    );

    <span class="hljs-comment">// 3. Inject into HTML head</span>
    <span class="hljs-title function_ invoke__">wp_add_inline_script</span>(
        <span class="hljs-string">&apos;dm-crab-settings-main&apos;</span>,
        <span class="hljs-string">&apos;window.dmCrabSettingsMain = &apos;</span> . <span class="hljs-title function_ invoke__">wp_json_encode</span>( <span class="hljs-variable">$data</span> ) . <span class="hljs-string">&apos;;&apos;</span>,
        <span class="hljs-string">&apos;before&apos;</span>
    );
}</code></pre>



<h3 class="wp-block-heading">The Orchestrator: Type-Safe Access (TypeScript)</h3>



<p>In our TypeScript source, we define an interface for this global object to ensure type safety. We avoid accessing <code>window.dmCrabSettingsMain</code> directly throughout the codebase; instead, we use helper accessors.</p>



<pre class="wp-block-dm-hcb-highlighted-code-block"><button class="dm-hcb-copy hljs" data-code="// assets/src/js/settings.ts

interface CrabSettings {
    quality: number;
    speed: number;
    saveUnoptimized: boolean;
    // ...
}

declare global {
    interface Window {
        dmCrabSettingsMain: CrabSettings;
    }
}

export const getQualitySetting = (): number =&gt; {
    // Robust fallback if the localized script fails
    const q = window?.dmCrabSettingsMain?.quality;
    return ( typeof q === 'number' ) ? Math.max( 0, Math.min( 100, q ) ) : 70;
};

export const getSpeedSetting = (): number =&gt; {
    const s = window?.dmCrabSettingsMain?.speed;
    return ( typeof s === 'number' ) ? Math.max( 0, Math.min( 10, s ) ) : 6;
};" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" width="24" height="24" aria-hidden="true"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 4.5h11a.5.5 0 0 1 .5.5v11a.5.5 0 0 1-.5.5H5a.5.5 0 0 1-.5-.5V5a.5.5 0 0 1 .5-.5ZM3 5a2 2 0 0 1 2-2h11a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5Zm17 3v10.75c0 .69-.56 1.25-1.25 1.25H6v1.5h12.75a2.75 2.75 0 0 0 2.75-2.75V8H20Z"></path></svg><span>Copy</span></button><code class="hljs language-typescript"><span class="hljs-comment">// assets/src/js/settings.ts</span>

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">CrabSettings</span> {
    <span class="hljs-attr">quality</span>: <span class="hljs-built_in">number</span>;
    <span class="hljs-attr">speed</span>: <span class="hljs-built_in">number</span>;
    <span class="hljs-attr">saveUnoptimized</span>: <span class="hljs-built_in">boolean</span>;
    <span class="hljs-comment">// ...</span>
}

<span class="hljs-keyword">declare</span> <span class="hljs-variable language_">global</span> {
    <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Window</span> {
        <span class="hljs-attr">dmCrabSettingsMain</span>: <span class="hljs-title class_">CrabSettings</span>;
    }
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> getQualitySetting = (): <span class="hljs-function"><span class="hljs-params">number</span> =&gt;</span> {
    <span class="hljs-comment">// Robust fallback if the localized script fails</span>
    <span class="hljs-keyword">const</span> q = <span class="hljs-variable language_">window</span>?.<span class="hljs-property">dmCrabSettingsMain</span>?.<span class="hljs-property">quality</span>;
    <span class="hljs-keyword">return</span> ( <span class="hljs-keyword">typeof</span> q === <span class="hljs-string">&apos;number&apos;</span> ) ? <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>( <span class="hljs-number">0</span>, <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>( <span class="hljs-number">100</span>, q ) ) : <span class="hljs-number">70</span>;
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> getSpeedSetting = (): <span class="hljs-function"><span class="hljs-params">number</span> =&gt;</span> {
    <span class="hljs-keyword">const</span> s = <span class="hljs-variable language_">window</span>?.<span class="hljs-property">dmCrabSettingsMain</span>?.<span class="hljs-property">speed</span>;
    <span class="hljs-keyword">return</span> ( <span class="hljs-keyword">typeof</span> s === <span class="hljs-string">&apos;number&apos;</span> ) ? <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>( <span class="hljs-number">0</span>, <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>( <span class="hljs-number">10</span>, s ) ) : <span class="hljs-number">6</span>;
};</code></pre>



<h3 class="wp-block-heading">4. The Crossing: Main Thread to Worker</h3>



<p>This is the critical bottleneck. <strong>Web Workers do not share the <code>window</code> object.</strong> The worker thread has no access to <code>window.dmCrabSettingsMain</code>.</p>



<p>If we tried to read <code>getQualitySetting()</code> inside <code>crab-worker.ts</code>, it would crash.</p>



<p>Therefore, the <strong>Main Thread</strong> must read the configuration and pass it as a <em>message payload</em> to the worker for every single job.</p>



<pre class="wp-block-dm-hcb-highlighted-code-block"><button class="dm-hcb-copy hljs" data-code="// assets/src/js/editor.ts (Main Thread)

const processFile = ( file: File ): Promise&lt;File&gt; =&gt; {
    return crabQueue.add( async () =&gt; {
        // ... worker setup ...
        
        worker.postMessage( {
            fileBuffer: buffer,

            quality: getQualitySetting(), // Reads from window
            speed: getSpeedSetting(),     // Reads from window
            // ...
        }, [ buffer ] );
    });
};" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" width="24" height="24" aria-hidden="true"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 4.5h11a.5.5 0 0 1 .5.5v11a.5.5 0 0 1-.5.5H5a.5.5 0 0 1-.5-.5V5a.5.5 0 0 1 .5-.5ZM3 5a2 2 0 0 1 2-2h11a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5Zm17 3v10.75c0 .69-.56 1.25-1.25 1.25H6v1.5h12.75a2.75 2.75 0 0 0 2.75-2.75V8H20Z"></path></svg><span>Copy</span></button><code class="hljs language-typescript"><span class="hljs-comment">// assets/src/js/editor.ts (Main Thread)</span>

<span class="hljs-keyword">const</span> processFile = ( <span class="hljs-attr">file</span>: <span class="hljs-title class_">File</span> ): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">File</span>&gt; =&gt; {
    <span class="hljs-keyword">return</span> crabQueue.<span class="hljs-title function_">add</span>( <span class="hljs-title function_">async</span> () =&gt; {
        <span class="hljs-comment">// ... worker setup ...</span>
        
        worker.<span class="hljs-title function_">postMessage</span>( {
            <span class="hljs-attr">fileBuffer</span>: buffer,

            <span class="hljs-attr">quality</span>: <span class="hljs-title function_">getQualitySetting</span>(), <span class="hljs-comment">// Reads from window</span>
            <span class="hljs-attr">speed</span>: <span class="hljs-title function_">getSpeedSetting</span>(),     <span class="hljs-comment">// Reads from window</span>
            <span class="hljs-comment">// ...</span>
        }, [ buffer ] );
    });
};</code></pre>



<h3 class="wp-block-heading">5. The Execution: Rust Consumption</h3>



<p>Finally, the <code>crab-worker.ts</code> receives the message and invokes the Rust function. The Rust function signature in <code>lib.rs</code> was designed specifically to accept these dynamic parameters.<br></p>



<pre class="wp-block-dm-hcb-highlighted-code-block"><button class="dm-hcb-copy hljs" data-code="// wasm/src/lib.rs

#[wasm_bindgen]
pub fn convert_to_avif(
    data: &amp;[u8], 
    quality: f32, // Received from JS -&gt; Worker -&gt; Rust
    speed: u8     // Received from JS -&gt; Worker -&gt; Rust
) -&gt; Result&lt;Vec&lt;u8&gt;, JsValue&gt; {
    
    let res = Encoder::new()
        .with_quality(quality)
        .with_speed(speed)
        .encode_rgba(...)
    
    // ...
}" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" width="24" height="24" aria-hidden="true"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 4.5h11a.5.5 0 0 1 .5.5v11a.5.5 0 0 1-.5.5H5a.5.5 0 0 1-.5-.5V5a.5.5 0 0 1 .5-.5ZM3 5a2 2 0 0 1 2-2h11a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5Zm17 3v10.75c0 .69-.56 1.25-1.25 1.25H6v1.5h12.75a2.75 2.75 0 0 0 2.75-2.75V8H20Z"></path></svg><span>Copy</span></button><code class="hljs language-rust"><span class="hljs-comment">// wasm/src/lib.rs</span>

<span class="hljs-meta">#[wasm_bindgen]</span>
<span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">convert_to_avif</span>(
    data: &amp;[<span class="hljs-type">u8</span>], 
    quality: <span class="hljs-type">f32</span>, <span class="hljs-comment">// Received from JS -&gt; Worker -&gt; Rust</span>
    speed: <span class="hljs-type">u8</span>     <span class="hljs-comment">// Received from JS -&gt; Worker -&gt; Rust</span>
) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;<span class="hljs-type">Vec</span>&lt;<span class="hljs-type">u8</span>&gt;, JsValue&gt; {
    
    <span class="hljs-keyword">let</span> <span class="hljs-variable">res</span> = Encoder::<span class="hljs-title function_ invoke__">new</span>()
        .<span class="hljs-title function_ invoke__">with_quality</span>(quality)
        .<span class="hljs-title function_ invoke__">with_speed</span>(speed)
        .<span class="hljs-title function_ invoke__">encode_rgba</span>(...)
    
    <span class="hljs-comment">// ...</span>
}</code></pre>



<h2 class="wp-block-heading">Limitations and Future Enhancements</h2>



<p>CrabOptimize started as an experiment to bridge Rust, WebAssembly, and WordPress, but it has rapidly evolved into a comprehensive optimization suite. With recent updates, the plugin now supports <strong>bulk migration of existing media</strong>, allows choosing between <strong>AVIF and WebP</strong>, and respects <strong>filetype exclusions</strong> to skip optimization for specific formats.</p>



<p>However, shifting the heavy lifting from the server to the client-side is not a silver bullet. This architecture introduces its own unique set of challenges. Let’s look at the current limitations of this approach and where the project is headed next.</p>



<h3 class="wp-block-heading">The Limitations of Client-Side Processing</h3>



<p><strong>1. The “Browser-Tab” Bottleneck for Bulk Migrations</strong><br>While the newly added bulk migration tool is fantastic for retroactively optimizing your media library, it is entirely bound to the browser’s lifecycle. Because the processing happens via WASM and Web Workers on the client device, the user <em>must</em> keep the WordPress admin tab open. If the browser is closed or the device goes to sleep, the migration halts.</p>



<p><strong>2. Invisible Uploads (WP-CLI and Server-Side Integrations)</strong><br>CrabOptimize works its magic by hijacking browser events (<code>apiFetch</code> and <code>plupload</code>). But what happens if an image never touches the browser? If a plugin automatically pulls images from an external API, or if a developer imports media via WP-CLI, the browser is completely bypassed. These uploads will fallback to WordPress’s default server-side processing, missing out on our Rust/WASM optimizations.</p>



<p><strong>3. Hardware Disparities and Mobile Browsers</strong><br>While the CrabQueue dynamically limits concurrency based on the device’s CPU cores, compiling large images into AVIF or WebP is still a mathematically intense task. A user uploading a batch of 20MB raw images from an older mobile phone or a low-end laptop will experience significantly slower processing times compared to someone on an flagship machine. It costs the server nothing, but it taxes the user’s battery and CPU.</p>



<h3 class="wp-block-heading">Future Enhancements: Where Do We Go From Here?</h3>



<p><strong>1. A Hybrid Fallback Engine (Server-Side Rust)<br></strong>To catch uploads generated by WP-CLI, REST API integrations, or weak mobile devices, we could introduce a hybrid architecture. If CrabOptimize detects that the client-side environment is unsuitable, or bypassed entirely, it could fallback to a pre-compiled server-side Rust binary or a graceful PHP degradation to process the image natively on the server.</p>



<p><strong>2. Dynamic WASM Module Loading</strong><br>Now that the plugin supports both AVIF and WebP, our .wasm binary has grown because it must bundle the logic for multiple codecs. As we add support for future formats like JPEG XL (JXL), we risk bloating the initial plugin download. A future enhancement will involve Code Splitting for WebAssembly: dynamically fetching only the specific <code>.wasm</code> codec the user has selected in their settings, keeping the initial payload incredibly lightweight.</p>



<p><strong>3. Advanced Client-Side Manipulation</strong><br>Since we already have raw RGBA pixels loaded into memory inside a secure Rust environment, the possibilities for client-side image manipulation are endless. Future updates could include:</p>



<ul class="wp-block-list">
<li><strong>Privacy First:</strong> Stripping sensitive EXIF data (like GPS coordinates) before the image ever hits the network.</li>



<li><strong>On-the-fly Watermarking:</strong> Applying text or image watermarks natively in the browser via Rust’s image crate.</li>



<li><strong>Smart Cropping:</strong> Using lightweight algorithms to detect the focal point of an image and cropping thumbnails intelligently, all without touching the server’s CPU.</li>
</ul>



<p>CrabOptimize proves that the browser is no longer just a client for WordPress, it’s a powerful edge-computing node. By combining the safety of Rust with the ubiquity of WebAssembly, we are just scratching the surface of what modern WordPress development can look like.</p>



<p></p>
</div>


<div class="wp-block-group is-content-justification-space-between is-nowrap is-layout-flex wp-container-core-group-is-layout-609ade12 wp-block-group-is-layout-flex" style="margin-top:var(--wp--preset--spacing--50);margin-bottom:var(--wp--preset--spacing--50);padding-top:var(--wp--preset--spacing--40);padding-right:0;padding-bottom:var(--wp--preset--spacing--40);padding-left:0;font-size:clamp(0.984rem, 0.984rem + ((1vw - 0.2rem) * 0.737), 1.5rem);"><div class="post-navigation-link-previous wp-block-post-navigation-link"><span class="wp-block-post-navigation-link__arrow-previous is-arrow-chevron" aria-hidden="true">«</span><a href="https://lakshyajeet.in/building-a-kademlia-dht-over-webrtc/" rel="prev"><span class="post-navigation-link__label">Previous:</span> <span class="post-navigation-link__title">Building a Kademlia DHT over WebRTC</span></a></div>

<div class="post-navigation-link-next has-text-align-left wp-block-post-navigation-link"></div></div>
</main>


<footer class="site-footer wp-block-template-part">
<div class="wp-block-group dm-footer has-base-light-background-color has-background is-layout-constrained wp-container-core-group-is-layout-196b58ae wp-block-group-is-layout-constrained" style="margin-top:var(--wp--preset--spacing--50);padding-top:var(--wp--preset--spacing--80);padding-right:var(--wp--preset--spacing--30);padding-bottom:var(--wp--preset--spacing--80);padding-left:var(--wp--preset--spacing--30)">
<div class="wp-block-columns are-vertically-aligned-center is-layout-flex wp-container-core-columns-is-layout-643ced6b wp-block-columns-is-layout-flex">
<div class="wp-block-column is-vertically-aligned-center is-layout-flow wp-block-column-is-layout-flow" style="flex-basis:50%">
<div class="wp-block-group is-vertical is-content-justification-center is-layout-flex wp-container-core-group-is-layout-b6c1f246 wp-block-group-is-layout-flex">

<h1 class="wp-block-site-title has-extra-large-font-size"><a href="https://lakshyajeet.in/" target="_self" rel="home">Lakshyajeet's Blog</a></h1>


<div class="theme-style-switcher-block wp-block-buttons" data-tss-block="true" data-display="dropdown"></div>
</div>
</div>



<div class="wp-block-column is-vertically-aligned-center is-layout-flow wp-block-column-is-layout-flow" style="flex-basis:50%">
<h4 class="wp-block-heading has-text-align-center" style="margin-top:var(--wp--preset--spacing--40);margin-bottom:var(--wp--preset--spacing--40)">
        Navigation
      </h4>



<div class="wp-block-group alignwide is-content-justification-center is-nowrap is-layout-flex wp-container-core-group-is-layout-e278f9a3 wp-block-group-is-layout-flex" style="margin-top:var(--wp--preset--spacing--20);margin-bottom:var(--wp--preset--spacing--20);padding-top:0;padding-right:var(--wp--preset--spacing--30);padding-bottom:0;padding-left:var(--wp--preset--spacing--30)"><nav class="items-justified-center is-vertical wp-block-navigation is-content-justification-center is-layout-flex wp-container-core-navigation-is-layout-734eb2c2 wp-block-navigation-is-layout-flex" aria-label="Navigation 2"><ul class="wp-block-navigation__container items-justified-center is-vertical wp-block-navigation"><li class=" wp-block-navigation-item wp-block-navigation-link"><a class="wp-block-navigation-item__content" href="https://lakshyajeet.in/blog/"><span class="wp-block-navigation-item__label">Blog</span></a></li><li class=" wp-block-navigation-item wp-block-navigation-link"><a class="wp-block-navigation-item__content" href="https://lakshyajeet.in/dm_project"><span class="wp-block-navigation-item__label">Projects</span></a></li><li class=" wp-block-navigation-item wp-block-navigation-link"><a class="wp-block-navigation-item__content" href="https://lakshyajeet.in/about/"><span class="wp-block-navigation-item__label">About</span></a></li></ul></nav></div>
</div>



<div class="wp-block-column is-vertically-aligned-center is-layout-flow wp-block-column-is-layout-flow" style="flex-basis:50%">
<h4 class="wp-block-heading has-text-align-center" style="margin-top:var(--wp--preset--spacing--40);margin-bottom:var(--wp--preset--spacing--40)">
        My Socials
      </h4>



<div class="wp-block-group alignwide is-content-justification-center is-nowrap is-layout-flex wp-container-core-group-is-layout-e278f9a3 wp-block-group-is-layout-flex" style="margin-top:var(--wp--preset--spacing--20);margin-bottom:var(--wp--preset--spacing--20);padding-top:0;padding-right:var(--wp--preset--spacing--30);padding-bottom:0;padding-left:var(--wp--preset--spacing--30)"><nav class="items-justified-center is-vertical wp-block-navigation is-content-justification-center is-layout-flex wp-container-core-navigation-is-layout-734eb2c2 wp-block-navigation-is-layout-flex" aria-label="Socials"><ul class="wp-block-navigation__container items-justified-center is-vertical wp-block-navigation"><li class=" wp-block-navigation-item wp-block-navigation-link"><a class="wp-block-navigation-item__content" href="https://github.com/DarkMatter-999"><span class="wp-block-navigation-item__label">Github</span></a></li><li class=" wp-block-navigation-item wp-block-navigation-link"><a class="wp-block-navigation-item__content" href="https://www.linkedin.com/in/darkmatter999/"><span class="wp-block-navigation-item__label">Linkedin</span></a></li><li class=" wp-block-navigation-item wp-block-navigation-link"><a class="wp-block-navigation-item__content" href="https://x.com/darkmatter_999"><span class="wp-block-navigation-item__label">Twitter</span></a></li><li class=" wp-block-navigation-item wp-block-navigation-link"><a class="wp-block-navigation-item__content" href="https://leetcode.com/lakshyajeet"><span class="wp-block-navigation-item__label">Leetcode</span></a></li><li class=" wp-block-navigation-item wp-block-navigation-link"><a class="wp-block-navigation-item__content" href="https://www.codechef.com/users/lakshyajeet"><span class="wp-block-navigation-item__label">Codechef</span></a></li><li class=" wp-block-navigation-item wp-block-navigation-link"><a class="wp-block-navigation-item__content" href="https://www.hackerrank.com/lakshyajeet"><span class="wp-block-navigation-item__label">HackerRank</span></a></li><li class=" wp-block-navigation-item wp-block-navigation-link"><a class="wp-block-navigation-item__content" href="https://profiles.wordpress.org/lakshyajeet/"><span class="wp-block-navigation-item__label">WordPress</span></a></li></ul></nav></div>
</div>
</div>



<p class="has-text-align-center" style="padding-top:var(--wp--preset--spacing--40);padding-bottom:var(--wp--preset--spacing--40)">
    Made with 💜 | LSG 2025
  </p>
</div>
</footer></div>
<script type="speculationrules">
{"prefetch":[{"source":"document","where":{"and":[{"href_matches":"/*"},{"not":{"href_matches":["/wp-*.php","/wp-admin/*","/wp-content/uploads/*","/wp-content/*","/wp-content/plugins/*","/wp-content/themes/darkmatter/*","/*\\?(.+)"]}},{"not":{"selector_matches":"a[rel~=\"nofollow\"]"}},{"not":{"selector_matches":".no-prefetch, .no-prefetch a"}}]},"eagerness":"conservative"}]}
</script>
<script type="module" src="https://lakshyajeet.in/wp-includes/js/dist/script-modules/block-library/navigation/view.min.js?ver=b0f909c3ec791c383210" id="@wordpress/block-library/navigation/view-js-module" fetchpriority="low" data-wp-router-options="{&quot;loadOnClientNavigation&quot;:true}"></script>
<script id="wp-block-template-skip-link-js-after">
	( function() {
		var skipLinkTarget = document.querySelector( 'main' ),
			sibling,
			skipLinkTargetID,
			skipLink;

		// Early exit if a skip-link target can't be located.
		if ( ! skipLinkTarget ) {
			return;
		}

		/*
		 * Get the site wrapper.
		 * The skip-link will be injected in the beginning of it.
		 */
		sibling = document.querySelector( '.wp-site-blocks' );

		// Early exit if the root element was not found.
		if ( ! sibling ) {
			return;
		}

		// Get the skip-link target's ID, and generate one if it doesn't exist.
		skipLinkTargetID = skipLinkTarget.id;
		if ( ! skipLinkTargetID ) {
			skipLinkTargetID = 'wp--skip-link--target';
			skipLinkTarget.id = skipLinkTargetID;
		}

		// Create the skip link.
		skipLink = document.createElement( 'a' );
		skipLink.classList.add( 'skip-link', 'screen-reader-text' );
		skipLink.id = 'wp-skip-link';
		skipLink.href = '#' + skipLinkTargetID;
		skipLink.innerText = 'Skip to content';

		// Inject the skip link.
		sibling.parentElement.insertBefore( skipLink, sibling );
	}() );
	
//# sourceURL=wp-block-template-skip-link-js-after
</script>
<script id="tss-main-js-before">
window.tss_data = {"variations":[{"slug":"00-default","title":"Dark"},{"slug":"01-light","title":"Light"}],"useMappedNames":1,"isBlockTheme":true};
//# sourceURL=tss-main-js-before
</script>
<script id="wp-emoji-settings" type="application/json">
{"baseUrl":"https://s.w.org/images/core/emoji/17.0.2/72x72/","ext":".png","svgUrl":"https://s.w.org/images/core/emoji/17.0.2/svg/","svgExt":".svg","source":{"concatemoji":"https://lakshyajeet.in/wp-includes/js/wp-emoji-release.min.js?ver=6.9.1"}}
</script>
<script type="module">
/*! This file is auto-generated */
const a=JSON.parse(document.getElementById("wp-emoji-settings").textContent),o=(window._wpemojiSettings=a,"wpEmojiSettingsSupports"),s=["flag","emoji"];function i(e){try{var t={supportTests:e,timestamp:(new Date).valueOf()};sessionStorage.setItem(o,JSON.stringify(t))}catch(e){}}function c(e,t,n){e.clearRect(0,0,e.canvas.width,e.canvas.height),e.fillText(t,0,0);t=new Uint32Array(e.getImageData(0,0,e.canvas.width,e.canvas.height).data);e.clearRect(0,0,e.canvas.width,e.canvas.height),e.fillText(n,0,0);const a=new Uint32Array(e.getImageData(0,0,e.canvas.width,e.canvas.height).data);return t.every((e,t)=>e===a[t])}function p(e,t){e.clearRect(0,0,e.canvas.width,e.canvas.height),e.fillText(t,0,0);var n=e.getImageData(16,16,1,1);for(let e=0;e<n.data.length;e++)if(0!==n.data[e])return!1;return!0}function u(e,t,n,a){switch(t){case"flag":return n(e,"\ud83c\udff3\ufe0f\u200d\u26a7\ufe0f","\ud83c\udff3\ufe0f\u200b\u26a7\ufe0f")?!1:!n(e,"\ud83c\udde8\ud83c\uddf6","\ud83c\udde8\u200b\ud83c\uddf6")&&!n(e,"\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc65\udb40\udc6e\udb40\udc67\udb40\udc7f","\ud83c\udff4\u200b\udb40\udc67\u200b\udb40\udc62\u200b\udb40\udc65\u200b\udb40\udc6e\u200b\udb40\udc67\u200b\udb40\udc7f");case"emoji":return!a(e,"\ud83e\u1fac8")}return!1}function f(e,t,n,a){let r;const o=(r="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?new OffscreenCanvas(300,150):document.createElement("canvas")).getContext("2d",{willReadFrequently:!0}),s=(o.textBaseline="top",o.font="600 32px Arial",{});return e.forEach(e=>{s[e]=t(o,e,n,a)}),s}function r(e){var t=document.createElement("script");t.src=e,t.defer=!0,document.head.appendChild(t)}a.supports={everything:!0,everythingExceptFlag:!0},new Promise(t=>{let n=function(){try{var e=JSON.parse(sessionStorage.getItem(o));if("object"==typeof e&&"number"==typeof e.timestamp&&(new Date).valueOf()<e.timestamp+604800&&"object"==typeof e.supportTests)return e.supportTests}catch(e){}return null}();if(!n){if("undefined"!=typeof Worker&&"undefined"!=typeof OffscreenCanvas&&"undefined"!=typeof URL&&URL.createObjectURL&&"undefined"!=typeof Blob)try{var e="postMessage("+f.toString()+"("+[JSON.stringify(s),u.toString(),c.toString(),p.toString()].join(",")+"));",a=new Blob([e],{type:"text/javascript"});const r=new Worker(URL.createObjectURL(a),{name:"wpTestEmojiSupports"});return void(r.onmessage=e=>{i(n=e.data),r.terminate(),t(n)})}catch(e){}i(n=f(s,u,c,p))}t(n)}).then(e=>{for(const n in e)a.supports[n]=e[n],a.supports.everything=a.supports.everything&&a.supports[n],"flag"!==n&&(a.supports.everythingExceptFlag=a.supports.everythingExceptFlag&&a.supports[n]);var t;a.supports.everythingExceptFlag=a.supports.everythingExceptFlag&&!a.supports.flag,a.supports.everything||((t=a.source||{}).concatemoji?r(t.concatemoji):t.wpemoji&&t.twemoji&&(r(t.twemoji),r(t.wpemoji)))});
//# sourceURL=https://lakshyajeet.in/wp-includes/js/wp-emoji-loader.min.js
</script>
</body>
</html>
