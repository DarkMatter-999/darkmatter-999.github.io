(()=>{"use strict";var e,t={837:()=>{const e=window.wp.blocks,t=JSON.parse('{"UU":"dm-project-plugin/project-block"}'),r=window.wp.blockEditor,o=window.wp.components,n=window.wp.i18n,l=window.wp.element,i=window.wp.data,a=window.ReactJSXRuntime;(0,e.registerBlockType)(t.UU,{edit:({attributes:e,setAttributes:t})=>{const{title:c,excerpt:s,thumbnail:d,thumbnailUrl:p,link:u,id:m}=e,[h,f]=(0,l.useState)(m),[g,x]=(0,l.useState)(c),[j,w]=(0,l.useState)(g),_=(0,l.useRef)(null);(0,l.useEffect)((()=>(_.current&&clearTimeout(_.current),_.current=setTimeout((()=>{w(g)}),500),()=>{clearTimeout(_.current)})),[g]);const b=(0,i.useSelect)((e=>{if(!j||j.length<2)return[];const t=e("core").getEntityRecords("postType","dm_project",{search:j,per_page:5});return t&&t.length?t.map((e=>({label:e.title.raw,value:e.id}))):[]}),[j]),v=(0,i.useSelect)((e=>!h||isNaN(h)?null:e("core").getEntityRecord("postType","dm_project",h)),[h]),k=(0,i.useSelect)((e=>v?.featured_media?e("core").getMedia(v.featured_media):null),[v?.featured_media]);(0,l.useEffect)((()=>{h&&(v?t({title:v?.title?.raw,excerpt:v?.excerpt?.raw,thumbnail:`${v?.featured_media}`,thumbnailUrl:k?.source_url,link:v.link,externalLink:v?.meta?.dm_project_link,id:h}):m!==h&&t({id:h}))}),[v,h,k,m]);let y=[];const C=h&&void 0===v,O=!!v&&m&&!!k?.source_url;return O&&(y=[["core/media-text",{mediaId:v.featured_media,mediaUrl:k.source_url,mediaType:"image",imageFill:!0},[["core/heading",{content:`<a href="${v.link}">${v.title.raw}</a>`,level:3}],["core/paragraph",{content:v.excerpt.raw}],["core/button",{text:(0,n.__)("View Project","dm-project-plugin"),url:v.meta?.dm_project_link}]]]]),(0,a.jsxs)("div",{...(0,r.useBlockProps)(),children:[(0,a.jsx)(r.InspectorControls,{children:(0,a.jsx)(o.PanelBody,{children:(0,a.jsx)(o.ComboboxControl,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,label:(0,n.__)("Search Projects","dm-project-plugin"),value:h,onChange:e=>{f(e)},onFilterValueChange:e=>{x(e)},options:b})})}),O?(0,a.jsx)(r.InnerBlocks,{allowedBlocks:["core/media-text"],template:y,templateLock:"all"},h):(0,a.jsx)("div",{className:"dm-project-placeholder",style:{padding:"20px",border:"1px dashed #ccc",textAlign:"center",minHeight:"100px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px",color:"#555",backgroundColor:"#f0f0f0"},children:h?C?(0,n.__)("Project ID not found.","dm-project-plugin"):(0,n.__)("Enter a valid Project ID in the Inspector Controls.","dm-project-plugin"):(0,n.__)("Please enter a Project ID in the Inspector Controls to display content.","dm-project-plugin")})]})},save:({attributes:e})=>e.id?(0,a.jsx)("div",{...r.useBlockProps.save(),children:(0,a.jsx)(r.InnerBlocks.Content,{})}):(0,a.jsx)(a.Fragment,{})})}},r={};function o(e){var n=r[e];if(void 0!==n)return n.exports;var l=r[e]={exports:{}};return t[e](l,l.exports,o),l.exports}o.m=t,e=[],o.O=(t,r,n,l)=>{if(!r){var i=1/0;for(d=0;d<e.length;d++){for(var[r,n,l]=e[d],a=!0,c=0;c<r.length;c++)(!1&l||i>=l)&&Object.keys(o.O).every((e=>o.O[e](r[c])))?r.splice(c--,1):(a=!1,l<i&&(i=l));if(a){e.splice(d--,1);var s=n();void 0!==s&&(t=s)}}return t}l=l||0;for(var d=e.length;d>0&&e[d-1][2]>l;d--)e[d]=e[d-1];e[d]=[r,n,l]},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={19:0,355:0};o.O.j=t=>0===e[t];var t=(t,r)=>{var n,l,[i,a,c]=r,s=0;if(i.some((t=>0!==e[t]))){for(n in a)o.o(a,n)&&(o.m[n]=a[n]);if(c)var d=c(o)}for(t&&t(r);s<i.length;s++)l=i[s],o.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return o.O(d)},r=globalThis.webpackChunk=globalThis.webpackChunk||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var n=o.O(void 0,[355],(()=>o(837)));n=o.O(n)})();